!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("leaflet"),require("lodash"),require("isomorphic-fetch"),require("react"),require("react-leaflet")):"function"==typeof define&&define.amd?define(["leaflet","lodash","isomorphic-fetch","react","react-leaflet"],e):"object"==typeof exports?exports.reactGeoengine=e(require("leaflet"),require("lodash"),require("isomorphic-fetch"),require("react"),require("react-leaflet")):t.reactGeoengine=e(t.L,t._,t.fetch,t.React,t.ReactLeaflet)}(this,function(__WEBPACK_EXTERNAL_MODULE_2__,__WEBPACK_EXTERNAL_MODULE_3__,__WEBPACK_EXTERNAL_MODULE_6__,__WEBPACK_EXTERNAL_MODULE_38__,__WEBPACK_EXTERNAL_MODULE_39__){return function(t){function e(r){if(i[r])return i[r].exports;var n=i[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var i={};return e.m=t,e.c=i,e.i=function(t){return t},e.d=function(t,i,r){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=41)}([function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){var i=e.domain,r=e.range;if(!A.default.isArray(r)||0===r.length)throw Error("range must be an not empty array");if(void 0==i||0===i.length)return r[0];if(!A.default.isArray(i))throw Error("domain must be an array or void 0");var n=Math.min(i.length,r.length);if(isNaN(t))return r[0];for(var o=0,s=0;n-1>s&&i[s]<t;s++)o=s+1;return r[o]}function o(t,e){return L.point(t.x,t.y).add(e)}function s(t,e){if(void 0==e)throw Error("scaleOpts cannot be empty");return A.default.isObject(e)?n(t,e):e}function a(t,e,i){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=[],s=void 0,a=0,l=t.geometry.coordinates.length;l>a;a++){var h=t.geometry.coordinates[a],c=i.latLngToContainerPoint([h[1],h[0]]),u=c;s||e.contains([u.x,u.y])&&(s=!0),r&&(u=o(u,r));var f=n[n.length-1]||{};f.x===u.x&&f.y===u.y||n.push(u)}return 1===n.length&&n.push({x:n[0].x+.1,y:n[0].y+.1}),s?n:null}function l(t,i,r){for(var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=[],s=void 0,a=0,l=t.geometry.coordinates.length;l>a;a++){var h=t.geometry.coordinates[a],c=e.lineToPixels({geometry:{coordinates:h}},i,r,n);if(c&&(c.forEach(function(t){o.push(t)}),!s))for(var u=0,f=c.length;f>u;++u)if(i.contains(c[u])){s=!0;break}}return 1===o.length&&o.push({x:o[0].x+.1,y:o[0].y+.1}),s?o:null}function h(t){return(0,I.default)(t.join("_"))}function c(t,e,i){return i.containerPointToLatLng(L.point(t,e))}function u(t){var e=(0,R.getCoords)(t),i=e.reduce(function(t,e){return t.concat(e)});return i[0][0]===i[i.length-1][0]&&i[0][1]===i[i.length-1][1]||i.push(i[0]),[i]}function f(t){if("object"!==(void 0===t?"undefined":P(t)))return(0,I.default)(t);if(Array.isArray(t))return h(t);var e=[],i=!0,r=!1,n=void 0;try{for(var o,s=Object.keys(t).sort()[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var a=o.value;e.push(a+"_"+t[a])}}catch(t){r=!0,n=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw n}}return h(e)}function d(t,e,i){return t.split(".").reduce(function(t,e){return t&&null!=t[e]?t[e]:i||null},e)}function p(t,e,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=t.geometry.coordinates,s=i.latLngToContainerPoint([n[1],n[0]]),a=s;return e.contains(a)?(r&&(a=o(s,r)),a):null}function g(t,e,i,r){var n=r.latLngToContainerPoint([0,0]);return t=Math.abs(r.latLngToContainerPoint([0,t]).x-n.x),e=Math.abs(r.latLngToContainerPoint([e,0]).y-n.y),{width:i>t?i:t,height:i>e?i:e}}function v(t,e){var i=t.toBounds(2*e);return[(i._southWest.lat+i._northEast.lat)/2,i._northEast.lng]}function m(t,e){var i=t.toBounds(2*e);return[i._southWest.lat,(i._southWest.lng+i._northEast.lng)/2]}function y(t,e,i,r){var n=r.latLngToContainerPoint([0,0]),o=v(L.latLng([0,0]),t),s=m(L.latLng([0,0]),e);return t=Math.abs(r.latLngToContainerPoint(o).x-n.x),e=Math.abs(r.latLngToContainerPoint(s).y-n.y),{width:i>t?i:t,height:i>e?i:e}}function b(t){return 40075016.686*Math.abs(Math.cos(180*t.getCenter().lat/Math.PI))/Math.pow(2,t.getZoom()+8)}function _(t){var e=t.latLngToContainerPoint([0,0]);return t.latLngToContainerPoint([1,1]).x-e.x}function x(t,e,i){for(var r=0,n=i.length;n>r;r++){var o=i[r];if(t[o]&&!A.default.isEqual(t[o],e[o]))return!0}return!1}function w(t,e,i){if(e>i){var r=i;i=e,e=r}return t>=e&&i>=t}function C(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function k(t,e,i){return t+i*(e-t)}function T(t,e,i,r){var n=e.x-t.x,o=e.y-t.y,s=((i-t.x)*n+(r-t.y)*o)/(n*n+o*o);return{x:k(t.x,e.x,s),y:k(t.y,e.y,s)}}function O(t,e,i,r){for(var n=r/2,o={x:t,y:e},s=0,a=i.length;a-1>s;s++){var l=i[s],h=i[s+1];if(l.x!==h.x){if(l.y!==h.y){if(w(t,l.x,h.x)){var c=T(l,h,t,e),u=C(c,o);if(n>=u)return!0}}else if(w(e,l.y+n,l.y-n)&&w(t,l.x,h.x))return!0}else if(w(t,l.x+n,l.x-n)&&w(e,l.y,h.y))return!0}return!1}function E(t){return t.features.map(function(t){if(t.geometry&&"point"===t.geometry.type.toLowerCase()){var e=M(t.geometry.coordinates,2),i=e[0],r=e[1];return S({},t.properties||{},{position:[r,i]})}return null}).filter(function(t){return null!==t})}Object.defineProperty(e,"__esModule",{value:!0});var S=Object.assign||function(t){for(var e=1;arguments.length>e;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},M=function(){function t(t,e){var i=[],r=!0,n=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);r=!0);}catch(t){n=!0,o=t}finally{try{!r&&a.return&&a.return()}finally{if(n)throw o}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.getScale=s,e.lineToPixels=a,e.polygonToPixels=l,e.pixelToPoint=c,e.getPolygonCoords=u,e.getKey=f,e.getValueByKeys=d,e.pointToPixel=p,e.arcToPixel=g,e.meterToPixel=y,e.meterPerPixel=b,e.arcPerPixel=_,e.isAnyRenderOptionsChange=x,e.between=w,e.distance=C,e.isPointOnLine=O,e.geoJsonToMarkerList=E;var D=i(3),A=r(D),j=i(44),I=r(j);i(2);var R=i(12);e.default={getScale:s,polygonToPixels:l,lineToPixels:a,pointToPixel:p,arcToPixel:g,isAnyRenderOptionsChange:x,isPointOnLine:O,distance:C,between:w,pixelToPoint:c,getPolygonCoords:u}},function(module,exports,__webpack_require__){"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fabric=fabric||{version:"1.5.0"};exports.fabric=fabric,"undefined"!=typeof document&&"undefined"!=typeof window?(fabric.document=document,fabric.window=window,window.fabric=fabric):(fabric.document=__webpack_require__(!function(){var t=Error('Cannot find module "jsdom"');throw t.code="MODULE_NOT_FOUND",t}()).jsdom("<!DOCTYPE html><html><head></head><body></body></html>"),fabric.window=fabric.document.createWindow?fabric.document.createWindow():fabric.document.parentWindow),fabric.isTouchSupported="ontouchstart"in fabric.document.documentElement,fabric.isLikelyNode=!1,fabric.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width"],fabric.DPI=96,fabric.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:e[-+]?\\d+)?)","object"!==("undefined"==typeof JSON?"undefined":_typeof(JSON))&&(JSON={}),function(){function f(t){return 10>t?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var i,r,n,o,s,a=gap,l=e[t];switch(l&&"object"===(void 0===l?"undefined":_typeof(l))&&"function"==typeof l.toJSON&&(l=l.toJSON(t)),"function"==typeof rep&&(l=rep.call(e,t,l)),void 0===l?"undefined":_typeof(l)){case"string":return quote(l);case"number":return isFinite(l)?l+"":"null";case"boolean":case"null":return l+"";case"object":if(!l)return"null";if(gap+=indent,s=[],"[object Array]"===Object.prototype.toString.apply(l)){for(o=l.length,i=0;o>i;i+=1)s[i]=str(i,l)||"null";return n=0===s.length?"[]":gap?"[\n"+gap+s.join(",\n"+gap)+"\n"+a+"]":"["+s.join(",")+"]",gap=a,n}if(rep&&"object"===(void 0===rep?"undefined":_typeof(rep)))for(o=rep.length,i=0;o>i;i+=1)"string"==typeof rep[i]&&(r=rep[i],(n=str(r,l))&&s.push(quote(r)+(gap?": ":":")+n));else for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(n=str(r,l))&&s.push(quote(r)+(gap?": ":":")+n);return n=0===s.length?"{}":gap?"{\n"+gap+s.join(",\n"+gap)+"\n"+a+"}":"{"+s.join(",")+"}",gap=a,n}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx,escapable,gap,indent,meta,rep;"function"!=typeof JSON.stringify&&(escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(t,e,i){var r;if(gap="",indent="","number"==typeof i)for(r=0;i>r;r+=1)indent+=" ";else"string"==typeof i&&(indent=i);if(rep=e,e&&"function"!=typeof e&&("object"!==(void 0===e?"undefined":_typeof(e))||"number"!=typeof e.length))throw Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,JSON.parse=function(text,reviver){function walk(t,e){var i,r,n=t[e];if(n&&"object"===(void 0===n?"undefined":_typeof(n)))for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r=walk(n,i),void 0!==r?n[i]=r:delete n[i]);return reviver.call(t,e,n)}var j;if(text+="",cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(){function t(t,e){this.__eventListeners[t]&&(e?fabric.util.removeFromArray(this.__eventListeners[t],e):this.__eventListeners[t].length=0)}function e(t,e){if(this.__eventListeners||(this.__eventListeners={}),1===arguments.length)for(var i in t)this.on(i,t[i]);else this.__eventListeners[t]||(this.__eventListeners[t]=[]),this.__eventListeners[t].push(e);return this}function i(e,i){if(this.__eventListeners){if(0===arguments.length)this.__eventListeners={};else if(1===arguments.length&&"object"===_typeof(arguments[0]))for(var r in e)t.call(this,r,e[r]);else t.call(this,e,i);return this}}function r(t,e){if(this.__eventListeners){var i=this.__eventListeners[t];if(i){for(var r=0,n=i.length;n>r;r++)i[r].call(this,e||{});return this}}}fabric.Observable={observe:e,stopObserving:i,fire:r,on:e,off:i,trigger:r}}(),fabric.Collection={add:function(){this._objects.push.apply(this._objects,arguments);for(var t=0,e=arguments.length;e>t;t++)this._onObjectAdded(arguments[t]);return this.renderOnAddRemove&&this.renderAll(),this},insertAt:function(t,e,i){var r=this.getObjects();return i?r[e]=t:r.splice(e,0,t),this._onObjectAdded(t),this.renderOnAddRemove&&this.renderAll(),this},remove:function(){for(var t,e=this.getObjects(),i=0,r=arguments.length;r>i;i++)-1!==(t=e.indexOf(arguments[i]))&&(e.splice(t,1),this._onObjectRemoved(arguments[i]));return this.renderOnAddRemove&&this.renderAll(),this},forEachObject:function(t,e){for(var i=this.getObjects(),r=i.length;r--;)t.call(e,i[r],r,i);return this},getObjects:function(t){return void 0===t?this._objects:this._objects.filter(function(e){return e.type===t})},item:function(t){return this.getObjects()[t]},isEmpty:function(){return 0===this.getObjects().length},size:function(){return this.getObjects().length},contains:function(t){return this.getObjects().indexOf(t)>-1},complexity:function(){return this.getObjects().reduce(function(t,e){return t+=e.complexity?e.complexity():0},0)}},function(t){var e=Math.sqrt,i=Math.atan2,r=Math.PI/180;fabric.util={removeFromArray:function(t,e){var i=t.indexOf(e);return-1!==i&&t.splice(i,1),t},getRandomInt:function(t,e){return Math.floor(Math.random()*(e-t+1))+t},degreesToRadians:function(t){return t*r},radiansToDegrees:function(t){return t/r},rotatePoint:function(t,e,i){var r=Math.sin(i),n=Math.cos(i);return t.subtractEquals(e),new fabric.Point(t.x*n-t.y*r,t.x*r+t.y*n).addEquals(e)},transformPoint:function(t,e,i){return i?new fabric.Point(e[0]*t.x+e[2]*t.y,e[1]*t.x+e[3]*t.y):new fabric.Point(e[0]*t.x+e[2]*t.y+e[4],e[1]*t.x+e[3]*t.y+e[5])},invertTransform:function(t){var e=t.slice(),i=1/(t[0]*t[3]-t[1]*t[2]);e=[i*t[3],-i*t[1],-i*t[2],i*t[0],0,0];var r=fabric.util.transformPoint({x:t[4],y:t[5]},e);return e[4]=-r.x,e[5]=-r.y,e},toFixed:function(t,e){return parseFloat((+t).toFixed(e))},parseUnit:function(t,e){var i=/\D{0,2}$/.exec(t),r=parseFloat(t);switch(e||(e=fabric.Text.DEFAULT_SVG_FONT_SIZE),i[0]){case"mm":return r*fabric.DPI/25.4;case"cm":return r*fabric.DPI/2.54;case"in":return r*fabric.DPI;case"pt":return r*fabric.DPI/72;case"pc":return r*fabric.DPI/72*12;case"em":return r*e;default:return r}},falseFunction:function(){return!1},getKlass:function(t,e){return t=fabric.util.string.camelize(t.charAt(0).toUpperCase()+t.slice(1)),fabric.util.resolveNamespace(e)[t]},resolveNamespace:function(e){if(!e)return fabric;for(var i=e.split("."),r=i.length,n=t||fabric.window,o=0;r>o;++o)n=n[i[o]];return n},loadImage:function(t,e,i,r){if(!t)return void(e&&e.call(i,t));var n=fabric.util.createImage();n.onload=function(){e&&e.call(i,n),n=n.onload=n.onerror=null},n.onerror=function(){fabric.log("Error loading "+n.src),e&&e.call(i,null,!0),n=n.onload=n.onerror=null},0!==t.indexOf("data")&&void 0!==r&&(n.crossOrigin=r),n.src=t},enlivenObjects:function(t,e,i,r){function n(){++s===a&&e&&e(o)}t=t||[];var o=[],s=0,a=t.length;if(!a)return void(e&&e(o));t.forEach(function(t,e){if(!t||!t.type)return void n();var s=fabric.util.getKlass(t.type,i);s.async?s.fromObject(t,function(i,s){s||(o[e]=i,r&&r(t,o[e])),n()}):(o[e]=s.fromObject(t),r&&r(t,o[e]),n())})},groupSVGElements:function(t,e,i){var r;return r=new fabric.PathGroup(t,e),void 0!==i&&r.setSourcePath(i),r},populateWithProperties:function(t,e,i){if(i&&"[object Array]"===Object.prototype.toString.call(i))for(var r=0,n=i.length;n>r;r++)i[r]in t&&(e[i[r]]=t[i[r]])},drawDashedLine:function(t,r,n,o,s,a){var l=o-r,h=s-n,c=e(l*l+h*h),u=i(h,l),f=a.length,d=0,p=!0;for(t.save(),t.translate(r,n),t.moveTo(0,0),t.rotate(u),r=0;c>r;)r+=a[d++%f],r>c&&(r=c),t[p?"lineTo":"moveTo"](r,0),p=!p;t.restore()},createCanvasElement:function(t){return t||(t=fabric.document.createElement("canvas")),t.getContext||"undefined"==typeof G_vmlCanvasManager||G_vmlCanvasManager.initElement(t),t},createImage:function(){return fabric.isLikelyNode?new(__webpack_require__(!function(){var t=Error('Cannot find module "canvas"');throw t.code="MODULE_NOT_FOUND",t}()).Image):fabric.document.createElement("img")},createAccessors:function(t){for(var e=t.prototype,i=e.stateProperties.length;i--;){var r=e.stateProperties[i],n=r.charAt(0).toUpperCase()+r.slice(1),o="set"+n,s="get"+n;e[s]||(e[s]=function(t){return Function('return this.get("'+t+'")')}(r)),e[o]||(e[o]=function(t){return Function("value",'return this.set("'+t+'", value)')}(r))}},clipContext:function(t,e){e.save(),e.beginPath(),t.clipTo(e),e.clip()},multiplyTransformMatrices:function(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]},getFunctionBody:function(t){return((t+"").match(/function[^{]*\{([\s\S]*)\}/)||{})[1]},isTransparent:function(t,e,i,r){r>0&&(e>r?e-=r:e=0,i>r?i-=r:i=0);for(var n=!0,o=t.getImageData(e,i,2*r||1,2*r||1),s=3,a=o.data.length;a>s;s+=4){if(!1===(n=0>=o.data[s]))break}return o=null,n}}}(exports),function(){function t(t,r,o,s,l,h,c){var u=a.call(arguments);if(n[u])return n[u];var f=Math.PI,d=c*f/180,p=Math.sin(d),g=Math.cos(d),v=0,m=0;o=Math.abs(o),s=Math.abs(s);var y=-g*t*.5-p*r*.5,b=-g*r*.5+p*t*.5,_=o*o,x=s*s,w=b*b,L=y*y,C=_*x-_*w-x*L,k=0;if(0>C){var T=Math.sqrt(1-C/(_*x));o*=T,s*=T}else k=(l===h?-1:1)*Math.sqrt(C/(_*w+x*L));var O=k*o*b/s,E=-k*s*y/o,S=g*O-p*E+.5*t,M=p*O+g*E+.5*r,P=i(1,0,(y-O)/o,(b-E)/s),D=i((y-O)/o,(b-E)/s,(-y-O)/o,(-b-E)/s);0===h&&D>0?D-=2*f:1===h&&0>D&&(D+=2*f);for(var A=Math.ceil(Math.abs(D/f*2)),j=[],I=D/A,R=8/3*Math.sin(I/4)*Math.sin(I/4)/Math.sin(I/2),B=P+I,F=0;A>F;F++)j[F]=e(P,B,g,p,o,s,S,M,R,v,m),v=j[F][4],m=j[F][5],P=B,B+=I;return n[u]=j,j}function e(t,e,i,r,n,s,l,h,c,u,f){var d=a.call(arguments);if(o[d])return o[d];var p=Math.cos(t),g=Math.sin(t),v=Math.cos(e),m=Math.sin(e),y=i*n*v-r*s*m+l,b=r*n*v+i*s*m+h;return o[d]=[u+c*(-i*n*g-r*s*p),f+c*(-r*n*g+i*s*p),y+c*(i*n*m+r*s*v),b+c*(r*n*m-i*s*v),y,b]}function i(t,e,i,r){var n=Math.atan2(e,t),o=Math.atan2(r,i);return n>o?2*Math.PI-(n-o):o-n}function r(t,e,i,r,n,o,l,h){var c=a.call(arguments);if(s[c])return s[c];var u,f,d,p,g,v,m,y,b=Math.sqrt,_=Math.min,x=Math.max,w=Math.abs,L=[],C=[[],[]];f=6*t-12*i+6*n,u=-3*t+9*i-9*n+3*l,d=3*i-3*t;for(var k=0;2>k;++k)if(k>0&&(f=6*e-12*r+6*o,u=-3*e+9*r-9*o+3*h,d=3*r-3*e),1e-12>w(u)){if(1e-12>w(f))continue;(p=-d/f)>0&&1>p&&L.push(p)}else 0>(m=f*f-4*d*u)||(y=b(m),g=(-f+y)/(2*u),g>0&&1>g&&L.push(g),(v=(-f-y)/(2*u))>0&&1>v&&L.push(v));for(var T,O,E,S=L.length,M=S;S--;)p=L[S],E=1-p,T=E*E*E*t+3*E*E*p*i+3*E*p*p*n+p*p*p*l,C[0][S]=T,O=E*E*E*e+3*E*E*p*r+3*E*p*p*o+p*p*p*h,C[1][S]=O;C[0][M]=t,C[1][M]=e,C[0][M+1]=l,C[1][M+1]=h;var P=[{x:_.apply(null,C[0]),y:_.apply(null,C[1])},{x:x.apply(null,C[0]),y:x.apply(null,C[1])}];return s[c]=P,P}var n={},o={},s={},a=Array.prototype.join;fabric.util.drawArc=function(e,i,r,n){for(var o=n[0],s=n[1],a=n[2],l=n[3],h=n[4],c=n[5],u=n[6],f=[[],[],[],[]],d=t(c-i,u-r,o,s,l,h,a),p=0,g=d.length;g>p;p++)f[p][0]=d[p][0]+i,f[p][1]=d[p][1]+r,f[p][2]=d[p][2]+i,f[p][3]=d[p][3]+r,f[p][4]=d[p][4]+i,f[p][5]=d[p][5]+r,e.bezierCurveTo.apply(e,f[p])},fabric.util.getBoundsOfArc=function(e,i,n,o,s,a,l,h,c){for(var u=0,f=0,d=[],p=[],g=t(h-e,c-i,n,o,a,l,s),v=[[],[]],m=0,y=g.length;y>m;m++)d=r(u,f,g[m][0],g[m][1],g[m][2],g[m][3],g[m][4],g[m][5]),v[0].x=d[0].x+e,v[0].y=d[0].y+i,v[1].x=d[1].x+e,v[1].y=d[1].y+i,p.push(v[0]),p.push(v[1]),u=g[m][4],f=g[m][5];return p},fabric.util.getBoundsOfCurve=r}(),function(){function t(t,e){for(var i=n.call(arguments,2),r=[],o=0,s=t.length;s>o;o++)r[o]=i.length?t[o][e].apply(t[o],i):t[o][e].call(t[o]);return r}function e(t,e){return r(t,e,function(t,e){return t>=e})}function i(t,e){return r(t,e,function(t,e){return e>t})}function r(t,e,i){if(t&&0!==t.length){var r=t.length-1,n=e?t[r][e]:t[r];if(e)for(;r--;)i(t[r][e],n)&&(n=t[r][e]);else for(;r--;)i(t[r],n)&&(n=t[r]);return n}}var n=Array.prototype.slice;Array.prototype.indexOf||(Array.prototype.indexOf=function(t){if(void 0===this||null===this)throw new TypeError;var e=Object(this),i=e.length>>>0;if(0===i)return-1;var r=0;if(arguments.length>0&&(r=+arguments[1],r!==r?r=0:0!==r&&r!==Number.POSITIVE_INFINITY&&r!==Number.NEGATIVE_INFINITY&&(r=(r>0||-1)*Math.floor(Math.abs(r)))),r>=i)return-1;for(var n=0>r?Math.max(i-Math.abs(r),0):r;i>n;n++)if(n in e&&e[n]===t)return n;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(t,e){for(var i=0,r=this.length>>>0;r>i;i++)i in this&&t.call(e,this[i],i,this)}),Array.prototype.map||(Array.prototype.map=function(t,e){for(var i=[],r=0,n=this.length>>>0;n>r;r++)r in this&&(i[r]=t.call(e,this[r],r,this));return i}),Array.prototype.every||(Array.prototype.every=function(t,e){for(var i=0,r=this.length>>>0;r>i;i++)if(i in this&&!t.call(e,this[i],i,this))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(t,e){for(var i=0,r=this.length>>>0;r>i;i++)if(i in this&&t.call(e,this[i],i,this))return!0;return!1}),Array.prototype.filter||(Array.prototype.filter=function(t,e){for(var i,r=[],n=0,o=this.length>>>0;o>n;n++)n in this&&(i=this[n],t.call(e,i,n,this)&&r.push(i));return r}),Array.prototype.reduce||(Array.prototype.reduce=function(t){var e,i=this.length>>>0,r=0;if(arguments.length>1)e=arguments[1];else for(;;){if(r in this){e=this[r++];break}if(++r>=i)throw new TypeError}for(;i>r;r++)r in this&&(e=t.call(null,e,this[r],r,this));return e}),fabric.util.array={invoke:t,min:i,max:e}}(),function(){function t(t,e){for(var i in e)t[i]=e[i];return t}function e(e){return t({},e)}fabric.util.object={extend:t,clone:e}}(),function(){function t(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})}function e(t,e){return t.charAt(0).toUpperCase()+(e?t.slice(1):t.slice(1).toLowerCase())}function i(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\xA0]+/,"").replace(/[\s\xA0]+$/,"")}),fabric.util.string={camelize:t,capitalize:e,escapeXml:i}}(),function(){var t=Array.prototype.slice,e=Function.prototype.apply,i=function(){};Function.prototype.bind||(Function.prototype.bind=function(r){var n,o=this,s=t.call(arguments,1);return n=s.length?function(){return e.call(o,this instanceof i?this:r,s.concat(t.call(arguments)))}:function(){return e.call(o,this instanceof i?this:r,arguments)},i.prototype=this.prototype,n.prototype=new i,n})}(),function(){function t(){}function e(t){var e=this.constructor.superclass.prototype[t];return arguments.length>1?e.apply(this,r.call(arguments,1)):e.call(this)}function i(){function i(){this.initialize.apply(this,arguments)}var o=null,a=r.call(arguments,0);"function"==typeof a[0]&&(o=a.shift()),i.superclass=o,i.subclasses=[],o&&(t.prototype=o.prototype,i.prototype=new t,o.subclasses.push(i));for(var l=0,h=a.length;h>l;l++)s(i,a[l],o);return i.prototype.initialize||(i.prototype.initialize=n),i.prototype.constructor=i,i.prototype.callSuper=e,i}var r=Array.prototype.slice,n=function(){},o=function(){for(var t in{toString:1})if("toString"===t)return!1;return!0}(),s=function(t,e,i){for(var r in e)t.prototype[r]=r in t.prototype&&"function"==typeof t.prototype[r]&&(e[r]+"").indexOf("callSuper")>-1?function(t){return function(){var r=this.constructor.superclass;this.constructor.superclass=i;var n=e[t].apply(this,arguments);if(this.constructor.superclass=r,"initialize"!==t)return n}}(r):e[r],o&&(e.toString!==Object.prototype.toString&&(t.prototype.toString=e.toString),e.valueOf!==Object.prototype.valueOf&&(t.prototype.valueOf=e.valueOf))};fabric.util.createClass=i}(),function(){function t(t){var e,i,r=Array.prototype.slice.call(arguments,1),n=r.length;for(i=0;n>i;i++)if(e=_typeof(t[r[i]]),!/^(?:function|object|unknown)$/.test(e))return!1;return!0}function e(t,e){return{handler:e,wrappedHandler:i(t,e)}}function i(t,e){return function(i){e.call(s(t),i||fabric.window.event)}}function r(t,e){return function(i){if(g[t]&&g[t][e])for(var r=g[t][e],n=0,o=r.length;o>n;n++)r[n].call(this,i||fabric.window.event)}}function n(t,e){t||(t=fabric.window.event);var i=t.target||(_typeof(t.srcElement)!==l?t.srcElement:null),r=fabric.util.getScrollLeftTop(i,e);return{x:v(t)+r.left,y:m(t)+r.top}}function o(t,e,i){var r="touchend"===t.type?"changedTouches":"touches";return t[r]&&t[r][0]?t[r][0][e]-(t[r][0][e]-t[r][0][i])||t[i]:t[i]}var s,a,l="unknown",h=function(){var t=0;return function(e){return e.__uniqueID||(e.__uniqueID="uniqueID__"+t++)}}();!function(){var t={};s=function(e){return t[e]},a=function(e,i){t[e]=i}}();var c,u,f=t(fabric.document.documentElement,"addEventListener","removeEventListener")&&t(fabric.window,"addEventListener","removeEventListener"),d=t(fabric.document.documentElement,"attachEvent","detachEvent")&&t(fabric.window,"attachEvent","detachEvent"),p={},g={};f?(c=function(t,e,i){t.addEventListener(e,i,!1)},u=function(t,e,i){t.removeEventListener(e,i,!1)}):d?(c=function(t,i,r){var n=h(t);a(n,t),p[n]||(p[n]={}),p[n][i]||(p[n][i]=[]);var o=e(n,r);p[n][i].push(o),t.attachEvent("on"+i,o.wrappedHandler)},u=function(t,e,i){var r,n=h(t);if(p[n]&&p[n][e])for(var o=0,s=p[n][e].length;s>o;o++)(r=p[n][e][o])&&r.handler===i&&(t.detachEvent("on"+e,r.wrappedHandler),p[n][e][o]=null)}):(c=function(t,e,i){var n=h(t);if(g[n]||(g[n]={}),!g[n][e]){g[n][e]=[];var o=t["on"+e];o&&g[n][e].push(o),t["on"+e]=r(n,e)}g[n][e].push(i)},u=function(t,e,i){var r=h(t);if(g[r]&&g[r][e])for(var n=g[r][e],o=0,s=n.length;s>o;o++)n[o]===i&&n.splice(o,1)}),fabric.util.addListener=c,fabric.util.removeListener=u;var v=function(t){return _typeof(t.clientX)!==l?t.clientX:0},m=function(t){return _typeof(t.clientY)!==l?t.clientY:0};fabric.isTouchSupported&&(v=function(t){return o(t,"pageX","clientX")},m=function(t){return o(t,"pageY","clientY")}),fabric.util.getPointer=n,fabric.util.object.extend(fabric.util,fabric.Observable)}(),function(){function t(t,e){var i=t.style;if(!i)return t;if("string"==typeof e)return t.style.cssText+=";"+e,e.indexOf("opacity")>-1?o(t,e.match(/opacity:\s*(\d?\.?\d*)/)[1]):t;for(var r in e)if("opacity"===r)o(t,e[r]);else{var n="float"===r||"cssFloat"===r?void 0===i.styleFloat?"cssFloat":"styleFloat":r;i[n]=e[r]}return t}var e=fabric.document.createElement("div"),i="string"==typeof e.style.opacity,r="string"==typeof e.style.filter,n=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,o=function(t){return t};i?o=function(t,e){return t.style.opacity=e,t}:r&&(o=function(t,e){var i=t.style;return t.currentStyle&&!t.currentStyle.hasLayout&&(i.zoom=1),n.test(i.filter)?(e=.9999>e?"alpha(opacity="+100*e+")":"",i.filter=i.filter.replace(n,e)):i.filter+=" alpha(opacity="+100*e+")",t}),fabric.util.setStyle=t}(),function(){function t(t){return"string"==typeof t?fabric.document.getElementById(t):t}function e(t,e){var i=fabric.document.createElement(t);for(var r in e)"class"===r?i.className=e[r]:"for"===r?i.htmlFor=e[r]:i.setAttribute(r,e[r]);return i}function i(t,e){t&&-1===(" "+t.className+" ").indexOf(" "+e+" ")&&(t.className+=(t.className?" ":"")+e)}function r(t,i,r){return"string"==typeof i&&(i=e(i,r)),t.parentNode&&t.parentNode.replaceChild(i,t),i.appendChild(t),i}function n(t,e){var i,r,n=0,o=0,s=fabric.document.documentElement,a=fabric.document.body||{scrollLeft:0,scrollTop:0};for(r=t;t&&t.parentNode&&!i;)t=t.parentNode,1===t.nodeType&&"fixed"===fabric.util.getElementStyle(t,"position")&&(i=t),1===t.nodeType&&r!==e&&"absolute"===fabric.util.getElementStyle(t,"position")?(n=0,o=0):t===fabric.document?(n=a.scrollLeft||s.scrollLeft||0,o=a.scrollTop||s.scrollTop||0):(n+=t.scrollLeft||0,o+=t.scrollTop||0);return{left:n,top:o}}function o(t){var e,i,r=t&&t.ownerDocument,n={left:0,top:0},o={left:0,top:0},s={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!r)return{left:0,top:0};for(var a in s)o[s[a]]+=parseInt(h(t,a),10)||0;return e=r.documentElement,void 0!==t.getBoundingClientRect&&(n=t.getBoundingClientRect()),i=fabric.util.getScrollLeftTop(t,null),{left:n.left+i.left-(e.clientLeft||0)+o.left,top:n.top+i.top-(e.clientTop||0)+o.top}}var s,a=Array.prototype.slice,l=function(t){return a.call(t,0)};try{s=l(fabric.document.childNodes)instanceof Array}catch(t){}s||(l=function(t){for(var e=Array(t.length),i=t.length;i--;)e[i]=t[i];return e});var h;h=fabric.document.defaultView&&fabric.document.defaultView.getComputedStyle?function(t,e){var i=fabric.document.defaultView.getComputedStyle(t,null);return i?i[e]:void 0}:function(t,e){var i=t.style[e];return!i&&t.currentStyle&&(i=t.currentStyle[e]),i},function(){function t(t){return void 0!==t.onselectstart&&(t.onselectstart=fabric.util.falseFunction),r?t.style[r]="none":"string"==typeof t.unselectable&&(t.unselectable="on"),t}function e(t){return void 0!==t.onselectstart&&(t.onselectstart=null),r?t.style[r]="":"string"==typeof t.unselectable&&(t.unselectable=""),t}var i=fabric.document.documentElement.style,r="userSelect"in i?"userSelect":"MozUserSelect"in i?"MozUserSelect":"WebkitUserSelect"in i?"WebkitUserSelect":"KhtmlUserSelect"in i?"KhtmlUserSelect":"";fabric.util.makeElementUnselectable=t,fabric.util.makeElementSelectable=e}(),function(){function t(t,e){var i=fabric.document.getElementsByTagName("head")[0],r=fabric.document.createElement("script"),n=!0;r.onload=r.onreadystatechange=function(t){if(n){if("string"==typeof this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState)return;n=!1,e(t||fabric.window.event),r=r.onload=r.onreadystatechange=null}},r.src=t,i.appendChild(r)}fabric.util.getScript=t}(),fabric.util.getById=t,fabric.util.toArray=l,fabric.util.makeElement=e,fabric.util.addClass=i,fabric.util.wrapElement=r,fabric.util.getScrollLeftTop=n,fabric.util.getElementOffset=o,fabric.util.getElementStyle=h}(),function(){function t(t,e){return t+(/\?/.test(t)?"&":"?")+e}function e(){}function i(i,n){n||(n={});var o,s=n.method?n.method.toUpperCase():"GET",a=n.onComplete||function(){},l=r();return l.onreadystatechange=function(){4===l.readyState&&(a(l),l.onreadystatechange=e)},"GET"===s&&(o=null,"string"==typeof n.parameters&&(i=t(i,n.parameters))),l.open(s,i,!0),"POST"!==s&&"PUT"!==s||l.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),l.send(o),l}var r=function(){for(var t=[function(){return new ActiveXObject("Microsoft.XMLHTTP")},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml2.XMLHTTP.3.0")},function(){return new XMLHttpRequest}],e=t.length;e--;)try{if(t[e]())return t[e]}catch(t){}}();fabric.util.request=i}(),fabric.log=function(){},fabric.warn=function(){},"undefined"!=typeof console&&["log","warn"].forEach(function(t){void 0!==console[t]&&"function"==typeof console[t].apply&&(fabric[t]=function(){return console[t].apply(console,arguments)})}),function(){function t(t,e,i,r){return t<Math.abs(e)?(t=e,r=i/4):r=i/(2*Math.PI)*Math.asin(e/t),{a:t,c:e,p:i,s:r}}function e(t,e,i){return t.a*Math.pow(2,10*(e-=1))*Math.sin((e*i-t.s)*(2*Math.PI)/t.p)}function i(t,e,i,r){return i*((t=t/r-1)*t*t+1)+e}function r(t,e,i,r){return t/=r/2,1>t?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e}function n(t,e,i,r){return i*(t/=r)*t*t*t+e}function o(t,e,i,r){return-i*((t=t/r-1)*t*t*t-1)+e}function s(t,e,i,r){return t/=r/2,1>t?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e}function a(t,e,i,r){return i*(t/=r)*t*t*t*t+e}function l(t,e,i,r){return i*((t=t/r-1)*t*t*t*t+1)+e}function h(t,e,i,r){return t/=r/2,1>t?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e}function c(t,e,i,r){return-i*Math.cos(t/r*(Math.PI/2))+i+e}function u(t,e,i,r){return i*Math.sin(t/r*(Math.PI/2))+e}function f(t,e,i,r){return-i/2*(Math.cos(Math.PI*t/r)-1)+e}function d(t,e,i,r){return 0===t?e:i*Math.pow(2,10*(t/r-1))+e}function p(t,e,i,r){return t===r?e+i:i*(1-Math.pow(2,-10*t/r))+e}function g(t,e,i,r){return 0===t?e:t===r?e+i:(t/=r/2,1>t?i/2*Math.pow(2,10*(t-1))+e:i/2*(2-Math.pow(2,-10*--t))+e)}function v(t,e,i,r){return-i*(Math.sqrt(1-(t/=r)*t)-1)+e}function m(t,e,i,r){return i*Math.sqrt(1-(t=t/r-1)*t)+e}function y(t,e,i,r){return t/=r/2,1>t?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e}function b(i,r,n,o){var s=0,a=n;return 0===i?r:1===(i/=o)?r+n:(s||(s=.3*o),-e(t(a,n,s,1.70158),i,o)+r)}function _(e,i,r,n){var o=0,s=r;if(0===e)return i;if(1===(e/=n))return i+r;o||(o=.3*n);var a=t(s,r,o,1.70158);return a.a*Math.pow(2,-10*e)*Math.sin((e*n-a.s)*(2*Math.PI)/a.p)+a.c+i}function x(i,r,n,o){var s=0,a=n;if(0===i)return r;if(2===(i/=o/2))return r+n;s||(s=o*(.3*1.5));var l=t(a,n,s,1.70158);return 1>i?-.5*e(l,i,o)+r:l.a*Math.pow(2,-10*(i-=1))*Math.sin((i*o-l.s)*(2*Math.PI)/l.p)*.5+l.c+r}function w(t,e,i,r,n){return void 0===n&&(n=1.70158),i*(t/=r)*t*((n+1)*t-n)+e}function L(t,e,i,r,n){return void 0===n&&(n=1.70158),i*((t=t/r-1)*t*((n+1)*t+n)+1)+e}function C(t,e,i,r,n){return void 0===n&&(n=1.70158),t/=r/2,1>t?i/2*(t*t*((1+(n*=1.525))*t-n))+e:i/2*((t-=2)*t*((1+(n*=1.525))*t+n)+2)+e}function k(t,e,i,r){return i-T(r-t,0,i,r)+e}function T(t,e,i,r){return(t/=r)<1/2.75?i*(7.5625*t*t)+e:2/2.75>t?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:2.5/2.75>t?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e}function O(t,e,i,r){return r/2>t?.5*k(2*t,0,i,r)+e:.5*T(2*t-r,0,i,r)+.5*i+e}fabric.util.ease={easeInQuad:function(t,e,i,r){return i*(t/=r)*t+e},easeOutQuad:function(t,e,i,r){return-i*(t/=r)*(t-2)+e},easeInOutQuad:function(t,e,i,r){return t/=r/2,1>t?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,i,r){return i*(t/=r)*t*t+e},easeOutCubic:i,easeInOutCubic:r,easeInQuart:n,easeOutQuart:o,easeInOutQuart:s,easeInQuint:a,easeOutQuint:l,easeInOutQuint:h,easeInSine:c,easeOutSine:u,easeInOutSine:f,easeInExpo:d,easeOutExpo:p,easeInOutExpo:g,easeInCirc:v,easeOutCirc:m,easeInOutCirc:y,easeInElastic:b,easeOutElastic:_,easeInOutElastic:x,easeInBack:w,easeOutBack:L,easeInOutBack:C,easeInBounce:k,easeOutBounce:T,easeInOutBounce:O}}(),function(t){function e(t){return t in x?x[t]:t}function i(t,e,i,r){var n,o="[object Array]"===Object.prototype.toString.call(e);return"fill"!==t&&"stroke"!==t||"none"!==e?"strokeDashArray"===t?e=e.replace(/,/g," ").split(/\s+/).map(function(t){return parseFloat(t)}):"transformMatrix"===t?e=i&&i.transformMatrix?_(i.transformMatrix,p.parseTransformAttribute(e)):p.parseTransformAttribute(e):"visible"===t?(e="none"!==e&&"hidden"!==e,i&&!1===i.visible&&(e=!1)):"originX"===t?e="start"===e?"left":"end"===e?"right":"center":n=o?e.map(b):b(e,r):e="",!o&&isNaN(n)?e:n}function r(t){for(var e in w)if(t[e]&&void 0!==t[w[e]]&&0!==t[e].indexOf("url(")){var i=new p.Color(t[e]);t[e]=i.setAlpha(y(i.getAlpha()*t[w[e]],2)).toRgba()}return t}function n(t,r){var n,o;t.replace(/;$/,"").split(";").forEach(function(t){var s=t.split(":");n=e(s[0].trim().toLowerCase()),o=i(n,s[1].trim()),r[n]=o})}function o(t,r){var n,o;for(var s in t)void 0!==t[s]&&(n=e(s.toLowerCase()),o=i(n,t[s]),r[n]=o)}function s(t,e){var i={};for(var r in p.cssRules[e])if(a(t,r.split(" ")))for(var n in p.cssRules[e][r])i[n]=p.cssRules[e][r][n];return i}function a(t,e){var i,r=!0;return i=h(t,e.pop()),i&&e.length&&(r=l(t,e)),i&&r&&0===e.length}function l(t,e){for(var i,r=!0;t.parentNode&&1===t.parentNode.nodeType&&e.length;)r&&(i=e.pop()),t=t.parentNode,r=h(t,i);return 0===e.length}function h(t,e){var i,r=t.nodeName,n=t.getAttribute("class"),o=t.getAttribute("id");if(i=RegExp("^"+r,"i"),e=e.replace(i,""),o&&e.length&&(i=RegExp("#"+o+"(?![a-zA-Z\\-]+)","i"),e=e.replace(i,"")),n&&e.length){n=n.split(" ");for(var s=n.length;s--;)i=RegExp("\\."+n[s]+"(?![a-zA-Z\\-]+)","i"),e=e.replace(i,"")}return 0===e.length}function c(t){for(var e=t.getElementsByTagName("use");e.length;){for(var i,r=e[0],n=r.getAttribute("xlink:href").substr(1),o=r.getAttribute("x")||0,s=r.getAttribute("y")||0,a=t.getElementById(n).cloneNode(!0),l=(a.getAttribute("transform")||"")+" translate("+o+", "+s+")",h=0,c=r.attributes,u=c.length;u>h;h++){var f=c.item(h);"x"!==f.nodeName&&"y"!==f.nodeName&&"xlink:href"!==f.nodeName&&("transform"===f.nodeName?l=f.nodeValue+" "+l:a.setAttribute(f.nodeName,f.nodeValue))}a.setAttribute("transform",l),a.setAttribute("instantiated_by_use","1"),a.removeAttribute("id"),i=r.parentNode,i.replaceChild(a,r)}}function u(t,e,i){var r,n,o,s,a=t.getAttribute("viewBox"),l=1,h=1,c=0,u=0;if(a&&(a=a.match(L))&&(c=-parseFloat(a[1]),u=-parseFloat(a[2]),r=parseFloat(a[3]),n=parseFloat(a[4]),e&&e!==r&&(l=e/r),i&&i!==n&&(h=i/n),h=l=l>h?h:l,1!==l||1!==h||0!==c||0!==u)){if(o=" matrix("+l+" 0 0 "+h+" "+c*l+" "+u*h+") ","svg"===t.tagName){for(s=t.ownerDocument.createElement("g");null!=t.firstChild;)s.appendChild(t.firstChild);t.appendChild(s)}else s=t,o=s.getAttribute("transform")+o;s.setAttribute("transform",o)}}function f(t){var e=t.objects,i=t.options;return e=e.map(function(t){return p[v(t.type)].fromObject(t)}),{objects:e,options:i}}function d(t,e,i){e[i]&&e[i].toSVG&&t.push('<pattern x="0" y="0" id="',i,'Pattern" ','width="',e[i].source.width,'" height="',e[i].source.height,'" patternUnits="userSpaceOnUse">','<image x="0" y="0" ','width="',e[i].source.width,'" height="',e[i].source.height,'" xlink:href="',e[i].source.src,'"></image></pattern>')}var p=t.fabric||(t.fabric={}),g=p.util.object.extend,v=p.util.string.capitalize,m=p.util.object.clone,y=p.util.toFixed,b=p.util.parseUnit,_=p.util.multiplyTransformMatrices,x={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","stroke-dasharray":"strokeDashArray","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"originX"},w={stroke:"strokeOpacity",fill:"fillOpacity"};p.cssRules={},p.gradientDefs={},p.parseTransformAttribute=function(){function t(t,e){var i=e[0];t[0]=Math.cos(i),t[1]=Math.sin(i),t[2]=-Math.sin(i),t[3]=Math.cos(i)}function e(t,e){var i=e[0],r=2===e.length?e[1]:e[0];t[0]=i,t[3]=r}function i(t,e){t[2]=Math.tan(p.util.degreesToRadians(e[0]))}function r(t,e){t[1]=Math.tan(p.util.degreesToRadians(e[0]))}function n(t,e){t[4]=e[0],2===e.length&&(t[5]=e[1])}var o=[1,0,0,1,0,0],s=p.reNum,a="(?:\\s+,?\\s*|,\\s*)",l="(?:(skewX)\\s*\\(\\s*("+s+")\\s*\\))",h="(?:(skewY)\\s*\\(\\s*("+s+")\\s*\\))",c="(?:(rotate)\\s*\\(\\s*("+s+")(?:"+a+"("+s+")"+a+"("+s+"))?\\s*\\))",u="(?:(scale)\\s*\\(\\s*("+s+")(?:"+a+"("+s+"))?\\s*\\))",f="(?:(translate)\\s*\\(\\s*("+s+")(?:"+a+"("+s+"))?\\s*\\))",d="(?:(matrix)\\s*\\(\\s*("+s+")"+a+"("+s+")"+a+"("+s+")"+a+"("+s+")"+a+"("+s+")"+a+"("+s+")\\s*\\))",g="(?:"+d+"|"+f+"|"+u+"|"+c+"|"+l+"|"+h+")",v="(?:"+g+"(?:"+a+g+")*)",m="^\\s*(?:"+v+"?)\\s*$",y=RegExp(m),b=RegExp(g,"g");return function(s){var a=o.concat(),l=[];if(!s||s&&!y.test(s))return a;s.replace(b,function(s){var h=RegExp(g).exec(s).filter(function(t){return""!==t&&null!=t}),c=h[1],u=h.slice(2).map(parseFloat);switch(c){case"translate":n(a,u);break;case"rotate":u[0]=p.util.degreesToRadians(u[0]),t(a,u);break;case"scale":e(a,u);break;case"skewX":i(a,u);break;case"skewY":r(a,u);break;case"matrix":a=u}l.push(a.concat()),a=o.concat()});for(var h=l[0];l.length>1;)l.shift(),h=p.util.multiplyTransformMatrices(h,l[0]);return h}}();var L=RegExp("^\\s*("+p.reNum+"+)\\s*,?\\s*("+p.reNum+"+)\\s*,?\\s*("+p.reNum+"+)\\s*,?\\s*("+p.reNum+"+)\\s*$");p.parseSVGDocument=function(){function t(t,e){for(;t&&(t=t.parentNode);)if(e.test(t.nodeName)&&!t.getAttribute("instantiated_by_use"))return!0;return!1}var e=/^(path|circle|polygon|polyline|ellipse|rect|line|image|text)$/,i=/^(symbol|image|marker|pattern|view)$/;return function(r,n,o){if(r){c(r);var s,a,l=new Date,h=p.Object.__uid++,f=!1;if(r.getAttribute("width")&&"100%"!==r.getAttribute("width")&&(s=b(r.getAttribute("width"))),r.getAttribute("height")&&"100%"!==r.getAttribute("height")&&(a=b(r.getAttribute("height"))),!s||!a){var d=r.getAttribute("viewBox");d&&(d=d.match(L))?(s=parseFloat(d[3]),a=parseFloat(d[4])):f=!0}u(r,s,a);var g=p.util.toArray(r.getElementsByTagName("*"));if(0===g.length&&p.isLikelyNode){g=r.selectNodes('//*[name(.)!="svg"]');for(var v=[],y=0,_=g.length;_>y;y++)v[y]=g[y];g=v}var x=g.filter(function(r){return i.test(r.tagName)&&u(r,0,0),e.test(r.tagName)&&!t(r,/^(?:pattern|defs|symbol)$/)});if(!x||x&&!x.length)return void(n&&n([],{}));var w={width:s,height:a,svgUid:h,toBeParsed:f};p.gradientDefs[h]=p.getGradientDefs(r),p.cssRules[h]=p.getCSSRules(r),p.parseElements(x,function(t){p.documentParsingTime=new Date-l,n&&n(t,w)},m(w),o)}}}();var C={has:function(t,e){e(!1)},get:function(){},set:function(){}},k=RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+p.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+p.reNum+"))?\\s+(.*)");g(p,{parseFontDeclaration:function(t,e){var i=t.match(k);if(i){var r=i[1],n=i[3],o=i[4],s=i[5],a=i[6];r&&(e.fontStyle=r),n&&(e.fontWeight=isNaN(parseFloat(n))?n:parseFloat(n)),o&&(e.fontSize=b(o)),a&&(e.fontFamily=a),s&&(e.lineHeight="normal"===s?1:s)}},getGradientDefs:function(t){var e,i,r,n,o=t.getElementsByTagName("linearGradient"),s=t.getElementsByTagName("radialGradient"),a=0,l=[],h={},c={};for(l.length=o.length+s.length,i=o.length;i--;)l[a++]=o[i];for(i=s.length;i--;)l[a++]=s[i];for(;a--;)e=l[a],n=e.getAttribute("xlink:href"),r=e.getAttribute("id"),n&&(c[r]=n.substr(1)),h[r]=e;for(r in c){var u=h[c[r]].cloneNode(!0);for(e=h[r];u.firstChild;)e.appendChild(u.firstChild)}return h},parseAttributes:function(t,n,o){if(t){var a,l,h={};void 0===o&&(o=t.getAttribute("svgUid")),t.parentNode&&/^symbol|[g|a]$/i.test(t.parentNode.nodeName)&&(h=p.parseAttributes(t.parentNode,n,o)),l=h&&h.fontSize||t.getAttribute("font-size")||p.Text.DEFAULT_SVG_FONT_SIZE;var c=n.reduce(function(r,n){return a=t.getAttribute(n),a&&(n=e(n),a=i(n,a,h,l),r[n]=a),r},{});return c=g(c,g(s(t,o),p.parseStyleAttribute(t))),c.font&&p.parseFontDeclaration(c.font,c),r(g(h,c))}},parseElements:function(t,e,i,r){new p.ElementsParser(t,e,i,r).parse()},parseStyleAttribute:function(t){var e={},i=t.getAttribute("style");return i?("string"==typeof i?n(i,e):o(i,e),e):e},parsePointsAttribute:function(t){if(!t)return null;t=t.replace(/,/g," ").trim(),t=t.split(/\s+/);var e,i,r=[];for(e=0,i=t.length;i>e;e+=2)r.push({x:parseFloat(t[e]),y:parseFloat(t[e+1])});return r},getCSSRules:function(t){for(var r,n=t.getElementsByTagName("style"),o={},s=0,a=n.length;a>s;s++){var l=n[s].textContent;l=l.replace(/\/\*[\s\S]*?\*\//g,""),""!==l.trim()&&(r=l.match(/[^{]*\{[\s\S]*?\}/g),r=r.map(function(t){return t.trim()}),r.forEach(function(t){for(var r=t.match(/([\s\S]*?)\s*\{([^}]*)\}/),n={},s=r[2].trim(),a=s.replace(/;$/,"").split(/\s*;\s*/),l=0,h=a.length;h>l;l++){var c=a[l].split(/\s*:\s*/),u=e(c[0]),f=i(u,c[1],c[0]);n[u]=f}t=r[1],t.split(",").forEach(function(t){""!==(t=t.replace(/^svg/i,"").trim())&&(o[t]=p.util.object.clone(n))})}))}return o},loadSVGFromURL:function(t,e,i){function r(r){var n=r.responseXML;n&&!n.documentElement&&p.window.ActiveXObject&&r.responseText&&(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(r.responseText.replace(/<!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?>/i,""))),n&&n.documentElement&&p.parseSVGDocument(n.documentElement,function(i,r){C.set(t,{objects:p.util.array.invoke(i,"toObject"),options:r}),e(i,r)},i)}t=t.replace(/^\n\s*/,"").trim(),C.has(t,function(i){i?C.get(t,function(t){var i=f(t);e(i.objects,i.options)}):new p.util.request(t,{method:"get",onComplete:r})})},loadSVGFromString:function(t,e,i){t=t.trim();var r;if("undefined"!=typeof DOMParser){var n=new DOMParser;n&&n.parseFromString&&(r=n.parseFromString(t,"text/xml"))}else p.window.ActiveXObject&&(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(t.replace(/<!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?>/i,"")));p.parseSVGDocument(r.documentElement,function(t,i){e(t,i)},i)},createSVGFontFacesMarkup:function(t){for(var e="",i=0,r=t.length;r>i;i++)"text"===t[i].type&&t[i].path&&(e+="@font-face {font-family: "+t[i].fontFamily+"; src: url('"+t[i].path+"')}");return e&&(e='<style type="text/css"><![CDATA['+e+"]]></style>"),e},createSVGRefElementsMarkup:function(t){var e=[];return d(e,t,"backgroundColor"),d(e,t,"overlayColor"),e.join("")}})}(exports),fabric.ElementsParser=function(t,e,i,r){this.elements=t,this.callback=e,this.options=i,this.reviver=r,this.svgUid=i&&i.svgUid||0},fabric.ElementsParser.prototype.parse=function(){this.instances=Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},fabric.ElementsParser.prototype.createObjects=function(){for(var t=0,e=this.elements.length;e>t;t++)this.elements[t].setAttribute("svgUid",this.svgUid),function(t,e){setTimeout(function(){t.createObject(t.elements[e],e)},0)}(this,t)},fabric.ElementsParser.prototype.createObject=function(t,e){var i=fabric[fabric.util.string.capitalize(t.tagName)];if(i&&i.fromElement)try{this._createObject(i,t,e)}catch(t){fabric.log(t)}else this.checkIfDone()},fabric.ElementsParser.prototype._createObject=function(t,e,i){if(t.async)t.fromElement(e,this.createCallback(i,e),this.options);else{var r=t.fromElement(e,this.options);this.resolveGradient(r,"fill"),this.resolveGradient(r,"stroke"),this.reviver&&this.reviver(e,r),this.instances[i]=r,this.checkIfDone()}},fabric.ElementsParser.prototype.createCallback=function(t,e){var i=this;return function(r){i.resolveGradient(r,"fill"),i.resolveGradient(r,"stroke"),i.reviver&&i.reviver(e,r),i.instances[t]=r,i.checkIfDone()}},fabric.ElementsParser.prototype.resolveGradient=function(t,e){var i=t.get(e);if(/^url\(/.test(i)){var r=i.slice(5,i.length-1);fabric.gradientDefs[this.svgUid][r]&&t.set(e,fabric.Gradient.fromElement(fabric.gradientDefs[this.svgUid][r],t))}},fabric.ElementsParser.prototype.checkIfDone=function(){0==--this.numElements&&(this.instances=this.instances.filter(function(t){return null!=t}),this.callback(this.instances))},function(t){function e(t,e){this.x=t,this.y=e}var i=t.fabric||(t.fabric={});if(i.Point)return void i.warn("fabric.Point is already defined");i.Point=e,e.prototype={constructor:e,add:function(t){return new e(this.x+t.x,this.y+t.y)},addEquals:function(t){return this.x+=t.x,this.y+=t.y,this},scalarAdd:function(t){return new e(this.x+t,this.y+t)},scalarAddEquals:function(t){return this.x+=t,this.y+=t,this},subtract:function(t){return new e(this.x-t.x,this.y-t.y)},subtractEquals:function(t){return this.x-=t.x,this.y-=t.y,this},scalarSubtract:function(t){return new e(this.x-t,this.y-t)},scalarSubtractEquals:function(t){return this.x-=t,this.y-=t,this},multiply:function(t){return new e(this.x*t,this.y*t)},multiplyEquals:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return new e(this.x/t,this.y/t)},divideEquals:function(t){return this.x/=t,this.y/=t,this},eq:function(t){return this.x===t.x&&this.y===t.y},lt:function(t){return t.x>this.x&&t.y>this.y},lte:function(t){return t.x>=this.x&&t.y>=this.y},gt:function(t){return this.x>t.x&&this.y>t.y},gte:function(t){return this.x>=t.x&&this.y>=t.y},lerp:function(t,i){return new e(this.x+(t.x-this.x)*i,this.y+(t.y-this.y)*i)},distanceFrom:function(t){var e=this.x-t.x,i=this.y-t.y;return Math.sqrt(e*e+i*i)},midPointFrom:function(t){return new e(this.x+(t.x-this.x)/2,this.y+(t.y-this.y)/2)},min:function(t){return new e(Math.min(this.x,t.x),Math.min(this.y,t.y))},max:function(t){return new e(Math.max(this.x,t.x),Math.max(this.y,t.y))},toString:function(){return this.x+","+this.y},setXY:function(t,e){this.x=t,this.y=e},setFromPoint:function(t){this.x=t.x,this.y=t.y},swap:function(t){var e=this.x,i=this.y;this.x=t.x,this.y=t.y,t.x=e,t.y=i}}}(exports),function(t){function e(t){this.status=t,this.points=[]}var i=t.fabric||(t.fabric={});if(i.Intersection)return void i.warn("fabric.Intersection is already defined");i.Intersection=e,i.Intersection.prototype={appendPoint:function(t){this.points.push(t)},appendPoints:function(t){this.points=this.points.concat(t)}},i.Intersection.intersectLineLine=function(t,r,n,o){var s,a=(o.x-n.x)*(t.y-n.y)-(o.y-n.y)*(t.x-n.x),l=(r.x-t.x)*(t.y-n.y)-(r.y-t.y)*(t.x-n.x),h=(o.y-n.y)*(r.x-t.x)-(o.x-n.x)*(r.y-t.y);if(0!==h){var c=a/h,u=l/h;0>c||c>1||0>u||u>1?s=new e:(s=new e("Intersection"),s.points.push(new i.Point(t.x+c*(r.x-t.x),t.y+c*(r.y-t.y))))}else s=new e(0===a||0===l?"Coincident":"Parallel");return s},i.Intersection.intersectLinePolygon=function(t,i,r){for(var n=new e,o=r.length,s=0;o>s;s++){n.appendPoints(e.intersectLineLine(t,i,r[s],r[(s+1)%o]).points)}return n.points.length>0&&(n.status="Intersection"),n},i.Intersection.intersectPolygonPolygon=function(t,i){for(var r=new e,n=t.length,o=0;n>o;o++){r.appendPoints(e.intersectLinePolygon(t[o],t[(o+1)%n],i).points)}return r.points.length>0&&(r.status="Intersection"),r},i.Intersection.intersectPolygonRectangle=function(t,r,n){var o=r.min(n),s=r.max(n),a=new i.Point(s.x,o.y),l=new i.Point(o.x,s.y),h=e.intersectLinePolygon(o,a,t),c=e.intersectLinePolygon(a,s,t),u=e.intersectLinePolygon(s,l,t),f=e.intersectLinePolygon(l,o,t),d=new e;return d.appendPoints(h.points),d.appendPoints(c.points),d.appendPoints(u.points),d.appendPoints(f.points),d.points.length>0&&(d.status="Intersection"),d}}(exports),function(t){function e(t){t?this._tryParsingColor(t):this.setSource([0,0,0,1])}function i(t,e,i){return 0>i&&(i+=1),i>1&&(i-=1),1/6>i?t+6*(e-t)*i:.5>i?e:2/3>i?t+(e-t)*(2/3-i)*6:t}var r=t.fabric||(t.fabric={});if(r.Color)return void r.warn("fabric.Color is already defined.");r.Color=e,r.Color.prototype={_tryParsingColor:function(t){var i;if(t in e.colorNameMap&&(t=e.colorNameMap[t]),"transparent"===t)return void this.setSource([255,255,255,0]);i=e.sourceFromHex(t),i||(i=e.sourceFromRgb(t)),i||(i=e.sourceFromHsl(t)),i&&this.setSource(i)},_rgbToHsl:function(t,e,i){t/=255,e/=255,i/=255;var n,o,s,a=r.util.array.max([t,e,i]),l=r.util.array.min([t,e,i]);if(s=(a+l)/2,a===l)n=o=0;else{var h=a-l;switch(o=s>.5?h/(2-a-l):h/(a+l),a){case t:n=(e-i)/h+(i>e?6:0);break;case e:n=(i-t)/h+2;break;case i:n=(t-e)/h+4}n/=6}return[Math.round(360*n),Math.round(100*o),Math.round(100*s)]},getSource:function(){return this._source},setSource:function(t){this._source=t},toRgb:function(){var t=this.getSource();return"rgb("+t[0]+","+t[1]+","+t[2]+")"},toRgba:function(){var t=this.getSource();return"rgba("+t[0]+","+t[1]+","+t[2]+","+t[3]+")"},toHsl:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return"hsl("+e[0]+","+e[1]+"%,"+e[2]+"%)"},toHsla:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return"hsla("+e[0]+","+e[1]+"%,"+e[2]+"%,"+t[3]+")"},toHex:function(){var t,e,i,r=this.getSource();return t=r[0].toString(16),t=1===t.length?"0"+t:t,e=r[1].toString(16),e=1===e.length?"0"+e:e,i=r[2].toString(16),i=1===i.length?"0"+i:i,t.toUpperCase()+e.toUpperCase()+i.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(t){var e=this.getSource();return e[3]=t,this.setSource(e),this},toGrayscale:function(){var t=this.getSource(),e=parseInt((.3*t[0]+.59*t[1]+.11*t[2]).toFixed(0),10);return this.setSource([e,e,e,t[3]]),this},toBlackWhite:function(t){var e=this.getSource(),i=(.3*e[0]+.59*e[1]+.11*e[2]).toFixed(0),r=e[3];return t=t||127,i=+t>+i?0:255,this.setSource([i,i,i,r]),this},overlayWith:function(t){t instanceof e||(t=new e(t));for(var i=[],r=this.getAlpha(),n=this.getSource(),o=t.getSource(),s=0;3>s;s++)i.push(Math.round(.5*n[s]+.5*o[s]));return i[3]=r,this.setSource(i),this}},r.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/,r.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/,r.Color.reHex=/^#?([0-9a-f]{6}|[0-9a-f]{3})$/i,r.Color.colorNameMap={aqua:"#00FFFF",black:"#000000",blue:"#0000FF",fuchsia:"#FF00FF",gray:"#808080",green:"#008000",lime:"#00FF00",maroon:"#800000",navy:"#000080",olive:"#808000",orange:"#FFA500",purple:"#800080",red:"#FF0000",silver:"#C0C0C0",teal:"#008080",white:"#FFFFFF",yellow:"#FFFF00"},r.Color.fromRgb=function(t){return e.fromSource(e.sourceFromRgb(t))},r.Color.sourceFromRgb=function(t){var i=t.match(e.reRGBa);if(i){var r=parseInt(i[1],10)/(/%$/.test(i[1])?100:1)*(/%$/.test(i[1])?255:1),n=parseInt(i[2],10)/(/%$/.test(i[2])?100:1)*(/%$/.test(i[2])?255:1),o=parseInt(i[3],10)/(/%$/.test(i[3])?100:1)*(/%$/.test(i[3])?255:1);return[parseInt(r,10),parseInt(n,10),parseInt(o,10),i[4]?parseFloat(i[4]):1]}},r.Color.fromRgba=e.fromRgb,r.Color.fromHsl=function(t){return e.fromSource(e.sourceFromHsl(t))},r.Color.sourceFromHsl=function(t){var r=t.match(e.reHSLa);if(r){var n,o,s,a=(parseFloat(r[1])%360+360)%360/360,l=parseFloat(r[2])/(/%$/.test(r[2])?100:1),h=parseFloat(r[3])/(/%$/.test(r[3])?100:1);if(0===l)n=o=s=h;else{var c=h>.5?h+l-h*l:h*(l+1),u=2*h-c;n=i(u,c,a+1/3),o=i(u,c,a),s=i(u,c,a-1/3)}return[Math.round(255*n),Math.round(255*o),Math.round(255*s),r[4]?parseFloat(r[4]):1]}},r.Color.fromHsla=e.fromHsl,r.Color.fromHex=function(t){return e.fromSource(e.sourceFromHex(t))},r.Color.sourceFromHex=function(t){if(t.match(e.reHex)){var i=t.slice(t.indexOf("#")+1),r=3===i.length,n=r?i.charAt(0)+i.charAt(0):i.substring(0,2),o=r?i.charAt(1)+i.charAt(1):i.substring(2,4),s=r?i.charAt(2)+i.charAt(2):i.substring(4,6);return[parseInt(n,16),parseInt(o,16),parseInt(s,16),1]}},r.Color.fromSource=function(t){var i=new e;return i.setSource(t),i}}(exports),function(){function t(t){var e,i,r,n=t.getAttribute("style"),o=t.getAttribute("offset");if(o=parseFloat(o)/(/%$/.test(o)?100:1),o=0>o?0:o>1?1:o,n){var s=n.split(/\s*;\s*/);""===s[s.length-1]&&s.pop();for(var a=s.length;a--;){var l=s[a].split(/\s*:\s*/),h=l[0].trim(),c=l[1].trim();"stop-color"===h?e=c:"stop-opacity"===h&&(r=c)}}return e||(e=t.getAttribute("stop-color")||"rgb(0,0,0)"),r||(r=t.getAttribute("stop-opacity")),e=new fabric.Color(e),i=e.getAlpha(),r=isNaN(parseFloat(r))?1:parseFloat(r),r*=i,{offset:o,color:e.toRgb(),opacity:r}}function e(t){return{x1:t.getAttribute("x1")||0,y1:t.getAttribute("y1")||0,x2:t.getAttribute("x2")||"100%",y2:t.getAttribute("y2")||0}}function i(t){return{x1:t.getAttribute("fx")||t.getAttribute("cx")||"50%",y1:t.getAttribute("fy")||t.getAttribute("cy")||"50%",r1:0,x2:t.getAttribute("cx")||"50%",y2:t.getAttribute("cy")||"50%",r2:t.getAttribute("r")||"50%"}}function r(t,e,i){var r,n=0,o=1,s="";for(var a in e)r=parseFloat(e[a],10),o="string"==typeof e[a]&&/^\d+%$/.test(e[a])?.01:1,"x1"===a||"x2"===a||"r2"===a?(o*="objectBoundingBox"===i?t.width:1,n="objectBoundingBox"===i?t.left||0:0):"y1"!==a&&"y2"!==a||(o*="objectBoundingBox"===i?t.height:1,n="objectBoundingBox"===i?t.top||0:0),e[a]=r*o+n;if("ellipse"===t.type&&null!==e.r2&&"objectBoundingBox"===i&&t.rx!==t.ry){var l=t.ry/t.rx;s=" scale(1, "+l+")",e.y1&&(e.y1/=l),e.y2&&(e.y2/=l)}return s}fabric.Gradient=fabric.util.createClass({offsetX:0,offsetY:0,initialize:function(t){t||(t={});var e={};this.id=fabric.Object.__uid++,this.type=t.type||"linear",e={x1:t.coords.x1||0,y1:t.coords.y1||0,x2:t.coords.x2||0,y2:t.coords.y2||0},"radial"===this.type&&(e.r1=t.coords.r1||0,e.r2=t.coords.r2||0),this.coords=e,this.colorStops=t.colorStops.slice(),t.gradientTransform&&(this.gradientTransform=t.gradientTransform),this.offsetX=t.offsetX||this.offsetX,this.offsetY=t.offsetY||this.offsetY},addColorStop:function(t){for(var e in t){var i=new fabric.Color(t[e]);this.colorStops.push({offset:e,color:i.toRgb(),opacity:i.getAlpha()})}return this},toObject:function(){return{type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY}},toSVG:function(t){var e,i,r=fabric.util.object.clone(this.coords);if(this.colorStops.sort(function(t,e){return t.offset-e.offset}),!t.group||"path-group"!==t.group.type)for(var n in r)"x1"===n||"x2"===n||"r2"===n?r[n]+=this.offsetX-t.width/2:"y1"!==n&&"y2"!==n||(r[n]+=this.offsetY-t.height/2);i='id="SVGID_'+this.id+'" gradientUnits="userSpaceOnUse"',this.gradientTransform&&(i+=' gradientTransform="matrix('+this.gradientTransform.join(" ")+')" '),"linear"===this.type?e=["<linearGradient ",i,' x1="',r.x1,'" y1="',r.y1,'" x2="',r.x2,'" y2="',r.y2,'">\n']:"radial"===this.type&&(e=["<radialGradient ",i,' cx="',r.x2,'" cy="',r.y2,'" r="',r.r2,'" fx="',r.x1,'" fy="',r.y1,'">\n']);for(var o=0;this.colorStops.length>o;o++)e.push("<stop ",'offset="',100*this.colorStops[o].offset+"%",'" style="stop-color:',this.colorStops[o].color,null!=this.colorStops[o].opacity?";stop-opacity: "+this.colorStops[o].opacity:";",'"/>\n');return e.push("linear"===this.type?"</linearGradient>\n":"</radialGradient>\n"),e.join("")},toLive:function(t,e){var i,r,n=fabric.util.object.clone(this.coords);if(this.type){if(e.group&&"path-group"===e.group.type)for(r in n)"x1"===r||"x2"===r?n[r]+=e.width/2-this.offsetX:"y1"!==r&&"y2"!==r||(n[r]+=e.height/2-this.offsetY);if("text"===e.type||"i-text"===e.type)for(r in n)"x1"===r||"x2"===r?n[r]-=e.width/2:"y1"!==r&&"y2"!==r||(n[r]-=e.height/2);"linear"===this.type?i=t.createLinearGradient(n.x1,n.y1,n.x2,n.y2):"radial"===this.type&&(i=t.createRadialGradient(n.x1,n.y1,n.r1,n.x2,n.y2,n.r2));for(var o=0,s=this.colorStops.length;s>o;o++){var a=this.colorStops[o].color,l=this.colorStops[o].opacity,h=this.colorStops[o].offset;void 0!==l&&(a=new fabric.Color(a).setAlpha(l).toRgba()),i.addColorStop(parseFloat(h),a)}return i}}}),fabric.util.object.extend(fabric.Gradient,{fromElement:function(n,o){var s,a=n.getElementsByTagName("stop"),l="linearGradient"===n.nodeName?"linear":"radial",h=n.getAttribute("gradientUnits")||"objectBoundingBox",c=n.getAttribute("gradientTransform"),u=[],f={};"linear"===l?f=e(n):"radial"===l&&(f=i(n));for(var d=a.length;d--;)u.push(t(a[d]));s=r(o,f,h);var p=new fabric.Gradient({type:l,coords:f,colorStops:u,offsetX:-o.left,offsetY:-o.top});return(c||""!==s)&&(p.gradientTransform=fabric.parseTransformAttribute((c||"")+s)),p},forObject:function(t,e){return e||(e={}),r(t,e.coords,"userSpaceOnUse"),new fabric.Gradient(e)}})}(),fabric.Pattern=fabric.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,initialize:function(t){if(t||(t={}),this.id=fabric.Object.__uid++,t.source)if("string"==typeof t.source)if(void 0!==fabric.util.getFunctionBody(t.source))this.source=Function(fabric.util.getFunctionBody(t.source));else{var e=this;this.source=fabric.util.createImage(),fabric.util.loadImage(t.source,function(t){e.source=t})}else this.source=t.source;t.repeat&&(this.repeat=t.repeat),t.offsetX&&(this.offsetX=t.offsetX),t.offsetY&&(this.offsetY=t.offsetY)},toObject:function(){var t;return"function"==typeof this.source?t=this.source+"":"string"==typeof this.source.src&&(t=this.source.src),{source:t,repeat:this.repeat,offsetX:this.offsetX,offsetY:this.offsetY}},toSVG:function(t){var e="function"==typeof this.source?this.source():this.source,i=e.width/t.getWidth(),r=e.height/t.getHeight(),n=this.offsetX/t.getWidth(),o=this.offsetY/t.getHeight(),s="";return"repeat-x"!==this.repeat&&"no-repeat"!==this.repeat||(r=1),"repeat-y"!==this.repeat&&"no-repeat"!==this.repeat||(i=1),e.src?s=e.src:e.toDataURL&&(s=e.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+n+'" y="'+o+'" width="'+i+'" height="'+r+'">\n<image x="0" y="0" width="'+e.width+'" height="'+e.height+'" xlink:href="'+s+'"></image>\n</pattern>\n'},toLive:function(t){var e="function"==typeof this.source?this.source():this.source;if(!e)return"";if(void 0!==e.src){if(!e.complete)return"";if(0===e.naturalWidth||0===e.naturalHeight)return""}return t.createPattern(e,this.repeat)}}),function(t){var e=t.fabric||(t.fabric={}),i=e.util.toFixed;if(e.Shadow)return void e.warn("fabric.Shadow is already defined.");e.Shadow=e.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,initialize:function(t){"string"==typeof t&&(t=this._parseShadow(t));for(var i in t)this[i]=t[i];this.id=e.Object.__uid++},_parseShadow:function(t){var i=t.trim(),r=e.Shadow.reOffsetsAndBlur.exec(i)||[];return{color:(i.replace(e.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)").trim(),offsetX:parseInt(r[1],10)||0,offsetY:parseInt(r[2],10)||0,blur:parseInt(r[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(t){var e="SourceAlpha",r=40,n=40;return!t||t.fill!==this.color&&t.stroke!==this.color||(e="SourceGraphic"),t.width&&t.height&&(r=100*i(Math.abs(this.offsetX/t.getWidth()),2)+20,n=100*i(Math.abs(this.offsetY/t.getHeight()),2)+20),'<filter id="SVGID_'+this.id+'" y="-'+n+'%" height="'+(100+2*n)+'%" x="-'+r+'%" width="'+(100+2*r)+'%" >\n\t<feGaussianBlur in="'+e+'" stdDeviation="'+i(this.blur?this.blur/2:0,3)+'" result="blurOut"></feGaussianBlur>\n\t<feColorMatrix result="matrixOut" in="blurOut" type="matrix" values="1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 0.30 0" ></feColorMatrix >\n\t<feOffset dx="'+this.offsetX+'" dy="'+this.offsetY+'"></feOffset>\n\t<feMerge>\n\t\t<feMergeNode></feMergeNode>\n\t\t<feMergeNode in="SourceGraphic"></feMergeNode>\n\t</feMerge>\n</filter>\n'},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY};var t={},i=e.Shadow.prototype;return this.color!==i.color&&(t.color=this.color),this.blur!==i.blur&&(t.blur=this.blur),this.offsetX!==i.offsetX&&(t.offsetX=this.offsetX),this.offsetY!==i.offsetY&&(t.offsetY=this.offsetY),t}}),e.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:px)?(?:\s?|$))?(-?\d+(?:px)?(?:\s?|$))?(\d+(?:px)?)?(?:\s?|$)(?:$|\s)/}(exports),function(){if(fabric.StaticCanvas)return void fabric.warn("fabric.StaticCanvas is already defined.");var t=fabric.util.object.extend,e=fabric.util.getElementOffset,i=fabric.util.removeFromArray,r=Error("Could not initialize `canvas` element");fabric.StaticCanvas=fabric.util.createClass({initialize:function(t,e){e||(e={}),this._initStatic(t,e),fabric.StaticCanvas.activeInstance=this},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!0,renderOnAddRemove:!0,clipTo:null,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,preserveObjectStacking:!1,viewportTransform:[1,0,0,1,0,0],onBeforeScaleRotate:function(){},_initStatic:function(t,e){this._objects=[],this._createLowerCanvas(t),this._initOptions(e),this._setImageSmoothing(),e.overlayImage&&this.setOverlayImage(e.overlayImage,this.renderAll.bind(this)),e.backgroundImage&&this.setBackgroundImage(e.backgroundImage,this.renderAll.bind(this)),e.backgroundColor&&this.setBackgroundColor(e.backgroundColor,this.renderAll.bind(this)),e.overlayColor&&this.setOverlayColor(e.overlayColor,this.renderAll.bind(this)),this.calcOffset()},calcOffset:function(){return this._offset=e(this.lowerCanvasEl),this},setOverlayImage:function(t,e,i){return this.__setBgOverlayImage("overlayImage",t,e,i)},setBackgroundImage:function(t,e,i){return this.__setBgOverlayImage("backgroundImage",t,e,i)},setOverlayColor:function(t,e){return this.__setBgOverlayColor("overlayColor",t,e)},setBackgroundColor:function(t,e){return this.__setBgOverlayColor("backgroundColor",t,e)},_setImageSmoothing:function(){var t=this.getContext();t.imageSmoothingEnabled=this.imageSmoothingEnabled,t.webkitImageSmoothingEnabled=this.imageSmoothingEnabled,t.mozImageSmoothingEnabled=this.imageSmoothingEnabled,t.msImageSmoothingEnabled=this.imageSmoothingEnabled,t.oImageSmoothingEnabled=this.imageSmoothingEnabled},__setBgOverlayImage:function(t,e,i,r){return"string"==typeof e?fabric.util.loadImage(e,function(e){this[t]=new fabric.Image(e,r),i&&i()},this,r&&r.crossOrigin):(r&&e.setOptions(r),this[t]=e,i&&i()),this},__setBgOverlayColor:function(t,e,i){if(e&&e.source){var r=this;fabric.util.loadImage(e.source,function(n){r[t]=new fabric.Pattern({source:n,repeat:e.repeat,offsetX:e.offsetX,offsetY:e.offsetY}),i&&i()})}else this[t]=e,i&&i();return this},_createCanvasElement:function(){var t=fabric.document.createElement("canvas");if(t.style||(t.style={}),!t)throw r;return this._initCanvasElement(t),t},_initCanvasElement:function(t){if(fabric.util.createCanvasElement(t),void 0===t.getContext)throw r},_initOptions:function(t){for(var e in t)this[e]=t[e];this.width=this.width||parseInt(this.lowerCanvasEl.width,10)||0,this.height=this.height||parseInt(this.lowerCanvasEl.height,10)||0,this.lowerCanvasEl.style&&(this.lowerCanvasEl.width=this.width,this.lowerCanvasEl.height=this.height,this.lowerCanvasEl.style.width=this.width+"px",this.lowerCanvasEl.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(t){this.lowerCanvasEl=fabric.util.getById(t)||this._createCanvasElement(),this._initCanvasElement(this.lowerCanvasEl),fabric.util.addClass(this.lowerCanvasEl,"lower-canvas"),this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(t,e){return this.setDimensions({width:t},e)},setHeight:function(t,e){return this.setDimensions({height:t},e)},setDimensions:function(t,e){var i;e=e||{};for(var r in t)i=t[r],e.cssOnly||(this._setBackstoreDimension(r,t[r]),i+="px"),e.backstoreOnly||this._setCssDimension(r,i);return e.cssOnly||this.renderAll(),this.calcOffset(),this},_setBackstoreDimension:function(t,e){return this.lowerCanvasEl[t]=e,this.upperCanvasEl&&(this.upperCanvasEl[t]=e),this.cacheCanvasEl&&(this.cacheCanvasEl[t]=e),this[t]=e,this},_setCssDimension:function(t,e){return this.lowerCanvasEl.style[t]=e,this.upperCanvasEl&&(this.upperCanvasEl.style[t]=e),this.wrapperEl&&(this.wrapperEl.style[t]=e),this},getZoom:function(){return Math.sqrt(this.viewportTransform[0]*this.viewportTransform[3])},setViewportTransform:function(t){var e=this.getActiveGroup();this.viewportTransform=t,this.renderAll();for(var i=0,r=this._objects.length;r>i;i++)this._objects[i].setCoords();return e&&e.setCoords(),this},zoomToPoint:function(t,e){var i=t;t=fabric.util.transformPoint(t,fabric.util.invertTransform(this.viewportTransform)),this.viewportTransform[0]=e,this.viewportTransform[3]=e;var r=fabric.util.transformPoint(t,this.viewportTransform);this.viewportTransform[4]+=i.x-r.x,this.viewportTransform[5]+=i.y-r.y,this.renderAll();for(var n=0,o=this._objects.length;o>n;n++)this._objects[n].setCoords();return this},setZoom:function(t){return this.zoomToPoint(new fabric.Point(0,0),t),this},absolutePan:function(t){this.viewportTransform[4]=-t.x,this.viewportTransform[5]=-t.y,this.renderAll();for(var e=0,i=this._objects.length;i>e;e++)this._objects[e].setCoords();return this},relativePan:function(t){return this.absolutePan(new fabric.Point(-t.x-this.viewportTransform[4],-t.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},getActiveObject:function(){return null},getActiveGroup:function(){return null},_draw:function(t,e){if(e){t.save();var i=this.viewportTransform;t.transform(i[0],i[1],i[2],i[3],i[4],i[5]),this._shouldRenderObject(e)&&e.render(t),t.restore(),this.controlsAboveOverlay||e._renderControls(t)}},_shouldRenderObject:function(t){return!!t&&(t!==this.getActiveGroup()||!this.preserveObjectStacking)},_onObjectAdded:function(t){this.stateful&&t.setupState(),t.canvas=this,t.setCoords(),this.fire("object:added",{target:t}),t.fire("added")},_onObjectRemoved:function(t){this.getActiveObject()===t&&(this.fire("before:selection:cleared",{target:t}),this._discardActiveObject(),this.fire("selection:cleared")),this.fire("object:removed",{target:t}),t.fire("removed")},clearContext:function(t){return t.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this._objects.length=0,this.discardActiveGroup&&this.discardActiveGroup(),this.discardActiveObject&&this.discardActiveObject(),this.clearContext(this.contextContainer),this.contextTop&&this.clearContext(this.contextTop),this.fire("canvas:cleared"),this.renderAll(),this},renderAll:function(t){var e=this[!0===t&&this.interactive?"contextTop":"contextContainer"],i=this.getActiveGroup();return this.contextTop&&this.selection&&!this._groupSelector&&this.clearContext(this.contextTop),t||this.clearContext(e),this.fire("before:render"),this.clipTo&&fabric.util.clipContext(this,e),this._renderBackground(e),this._renderObjects(e,i),this._renderActiveGroup(e,i),this.clipTo&&e.restore(),this._renderOverlay(e),this.controlsAboveOverlay&&this.interactive&&this.drawControls(e),this.fire("after:render"),this},_renderObjects:function(t,e){var i,r;if(!e||this.preserveObjectStacking)for(i=0,r=this._objects.length;r>i;++i)this._draw(t,this._objects[i]);else for(i=0,r=this._objects.length;r>i;++i)this._objects[i]&&!e.contains(this._objects[i])&&this._draw(t,this._objects[i])},_renderActiveGroup:function(t,e){if(e){var i=[];this.forEachObject(function(t){e.contains(t)&&i.push(t)}),e._set("objects",i),this._draw(t,e)}},_renderBackground:function(t){this.backgroundColor&&(t.fillStyle=this.backgroundColor.toLive?this.backgroundColor.toLive(t):this.backgroundColor,t.fillRect(this.backgroundColor.offsetX||0,this.backgroundColor.offsetY||0,this.width,this.height)),this.backgroundImage&&this._draw(t,this.backgroundImage)},_renderOverlay:function(t){this.overlayColor&&(t.fillStyle=this.overlayColor.toLive?this.overlayColor.toLive(t):this.overlayColor,t.fillRect(this.overlayColor.offsetX||0,this.overlayColor.offsetY||0,this.width,this.height)),this.overlayImage&&this._draw(t,this.overlayImage)},renderTop:function(){var t=this.contextTop||this.contextContainer;this.clearContext(t),this.selection&&this._groupSelector&&this._drawSelection();var e=this.getActiveGroup();return e&&e.render(t),this._renderOverlay(t),this.fire("after:render"),this},getCenter:function(){return{top:this.getHeight()/2,left:this.getWidth()/2}},centerObjectH:function(t){return this._centerObject(t,new fabric.Point(this.getCenter().left,t.getCenterPoint().y)),this.renderAll(),this},centerObjectV:function(t){return this._centerObject(t,new fabric.Point(t.getCenterPoint().x,this.getCenter().top)),this.renderAll(),this},centerObject:function(t){var e=this.getCenter();return this._centerObject(t,new fabric.Point(e.left,e.top)),this.renderAll(),this},_centerObject:function(t,e){return t.setPositionByOrigin(e,"center","center"),this},toDatalessJSON:function(t){return this.toDatalessObject(t)},toObject:function(t){return this._toObjectMethod("toObject",t)},toDatalessObject:function(t){return this._toObjectMethod("toDatalessObject",t)},_toObjectMethod:function(e,i){var r={objects:this._toObjects(e,i)};return t(r,this.__serializeBgOverlay()),fabric.util.populateWithProperties(this,r,i),r},_toObjects:function(t,e){return this.getObjects().map(function(i){return this._toObject(i,t,e)},this)},_toObject:function(t,e,i){var r;this.includeDefaultValues||(r=t.includeDefaultValues,t.includeDefaultValues=!1);var n=this._realizeGroupTransformOnObject(t),o=t[e](i);return this.includeDefaultValues||(t.includeDefaultValues=r),this._unwindGroupTransformOnObject(t,n),o},_realizeGroupTransformOnObject:function(t){var e=["angle","flipX","flipY","height","left","scaleX","scaleY","top","width"];if(t.group&&t.group===this.getActiveGroup()){var i={};return e.forEach(function(e){i[e]=t[e]}),this.getActiveGroup().realizeTransform(t),i}return null},_unwindGroupTransformOnObject:function(t,e){e&&t.set(e)},__serializeBgOverlay:function(){var t={background:this.backgroundColor&&this.backgroundColor.toObject?this.backgroundColor.toObject():this.backgroundColor};return this.overlayColor&&(t.overlay=this.overlayColor.toObject?this.overlayColor.toObject():this.overlayColor),this.backgroundImage&&(t.backgroundImage=this.backgroundImage.toObject()),this.overlayImage&&(t.overlayImage=this.overlayImage.toObject()),t},svgViewportTransformation:!0,toSVG:function(t,e){t||(t={});var i=[];return this._setSVGPreamble(i,t),this._setSVGHeader(i,t),this._setSVGBgOverlayColor(i,"backgroundColor"),this._setSVGBgOverlayImage(i,"backgroundImage"),this._setSVGObjects(i,e),this._setSVGBgOverlayColor(i,"overlayColor"),this._setSVGBgOverlayImage(i,"overlayImage"),i.push("</svg>"),i.join("")},_setSVGPreamble:function(t,e){e.suppressPreamble||t.push('<?xml version="1.0" encoding="',e.encoding||"UTF-8",'" standalone="no" ?>','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ','"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')},_setSVGHeader:function(t,e){var i,r,n;e.viewBox?(i=e.viewBox.width,r=e.viewBox.height):(i=this.width,r=this.height,this.svgViewportTransformation||(n=this.viewportTransform,i/=n[0],r/=n[3])),t.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',i,'" ','height="',r,'" ',this.backgroundColor&&!this.backgroundColor.toLive?'style="background-color: '+this.backgroundColor+'" ':null,e.viewBox?'viewBox="'+e.viewBox.x+" "+e.viewBox.y+" "+e.viewBox.width+" "+e.viewBox.height+'" ':null,'xml:space="preserve">',"<desc>Created with Fabric.js ",fabric.version,"</desc>","<defs>",fabric.createSVGFontFacesMarkup(this.getObjects()),fabric.createSVGRefElementsMarkup(this),"</defs>")},_setSVGObjects:function(t,e){for(var i=0,r=this.getObjects(),n=r.length;n>i;i++){var o=r[i],s=this._realizeGroupTransformOnObject(o);t.push(o.toSVG(e)),this._unwindGroupTransformOnObject(o,s)}},_setSVGBgOverlayImage:function(t,e){this[e]&&this[e].toSVG&&t.push(this[e].toSVG())},_setSVGBgOverlayColor:function(t,e){this[e]&&this[e].source?t.push('<rect x="',this[e].offsetX,'" y="',this[e].offsetY,'" ','width="',"repeat-y"===this[e].repeat||"no-repeat"===this[e].repeat?this[e].source.width:this.width,'" height="',"repeat-x"===this[e].repeat||"no-repeat"===this[e].repeat?this[e].source.height:this.height,'" fill="url(#'+e+'Pattern)"',"></rect>"):this[e]&&"overlayColor"===e&&t.push('<rect x="0" y="0" ','width="',this.width,'" height="',this.height,'" fill="',this[e],'"',"></rect>")},sendToBack:function(t){return i(this._objects,t),this._objects.unshift(t),this.renderAll&&this.renderAll()},bringToFront:function(t){return i(this._objects,t),this._objects.push(t),this.renderAll&&this.renderAll()},sendBackwards:function(t,e){var r=this._objects.indexOf(t);if(0!==r){var n=this._findNewLowerIndex(t,r,e);i(this._objects,t),this._objects.splice(n,0,t),this.renderAll&&this.renderAll()}return this},_findNewLowerIndex:function(t,e,i){var r;if(i){r=e;for(var n=e-1;n>=0;--n){if(t.intersectsWithObject(this._objects[n])||t.isContainedWithinObject(this._objects[n])||this._objects[n].isContainedWithinObject(t)){r=n;break}}}else r=e-1;return r},bringForward:function(t,e){var r=this._objects.indexOf(t);if(r!==this._objects.length-1){var n=this._findNewUpperIndex(t,r,e);i(this._objects,t),this._objects.splice(n,0,t),this.renderAll&&this.renderAll()}return this},_findNewUpperIndex:function(t,e,i){var r;if(i){r=e;for(var n=e+1;this._objects.length>n;++n){if(t.intersectsWithObject(this._objects[n])||t.isContainedWithinObject(this._objects[n])||this._objects[n].isContainedWithinObject(t)){r=n;break}}}else r=e+1;return r},moveTo:function(t,e){return i(this._objects,t),this._objects.splice(e,0,t),this.renderAll&&this.renderAll()},dispose:function(){return this.clear(),this.interactive&&this.removeListeners(),this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this.getObjects().length+" }>"}}),t(fabric.StaticCanvas.prototype,fabric.Observable),t(fabric.StaticCanvas.prototype,fabric.Collection),t(fabric.StaticCanvas.prototype,fabric.DataURLExporter),t(fabric.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(t){var e=fabric.util.createCanvasElement();if(!e||!e.getContext)return null;var i=e.getContext("2d");if(!i)return null;switch(t){case"getImageData":return void 0!==i.getImageData;case"setLineDash":return void 0!==i.setLineDash;case"toDataURL":return void 0!==e.toDataURL;case"toDataURLWithQuality":try{return e.toDataURL("image/jpeg",0),!0}catch(t){}return!1;default:return null}}}),fabric.StaticCanvas.prototype.toJSON=fabric.StaticCanvas.prototype.toObject}(),fabric.BaseBrush=fabric.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeDashArray:null,setShadow:function(t){return this.shadow=new fabric.Shadow(t),this},_setBrushStyles:function(){var t=this.canvas.contextTop;t.strokeStyle=this.color,t.lineWidth=this.width,t.lineCap=this.strokeLineCap,t.lineJoin=this.strokeLineJoin,this.strokeDashArray&&fabric.StaticCanvas.supports("setLineDash")&&t.setLineDash(this.strokeDashArray)},_setShadow:function(){if(this.shadow){var t=this.canvas.contextTop;t.shadowColor=this.shadow.color,t.shadowBlur=this.shadow.blur,t.shadowOffsetX=this.shadow.offsetX,t.shadowOffsetY=this.shadow.offsetY}},_resetShadow:function(){var t=this.canvas.contextTop;t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0}}),function(){fabric.PencilBrush=fabric.util.createClass(fabric.BaseBrush,{initialize:function(t){this.canvas=t,this._points=[]},onMouseDown:function(t){this._prepareForDrawing(t),this._captureDrawingPath(t),this._render()},onMouseMove:function(t){this._captureDrawingPath(t),this.canvas.clearContext(this.canvas.contextTop),this._render()},onMouseUp:function(){this._finalizeAndAddPath()},_prepareForDrawing:function(t){var e=new fabric.Point(t.x,t.y);this._reset(),this._addPoint(e),this.canvas.contextTop.moveTo(e.x,e.y)},_addPoint:function(t){this._points.push(t)},_reset:function(){this._points.length=0,this._setBrushStyles(),this._setShadow()},_captureDrawingPath:function(t){this._addPoint(new fabric.Point(t.x,t.y))},_render:function(){var t=this.canvas.contextTop,e=this.canvas.viewportTransform,i=this._points[0],r=this._points[1];t.save(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5]),t.beginPath(),2===this._points.length&&i.x===r.x&&i.y===r.y&&(i.x-=.5,r.x+=.5),t.moveTo(i.x,i.y);for(var n=1,o=this._points.length;o>n;n++){var s=i.midPointFrom(r);t.quadraticCurveTo(i.x,i.y,s.x,s.y),i=this._points[n],r=this._points[n+1]}t.lineTo(i.x,i.y),t.stroke(),t.restore()},convertPointsToSVGPath:function(t){var e=[],i=new fabric.Point(t[0].x,t[0].y),r=new fabric.Point(t[1].x,t[1].y);e.push("M ",t[0].x," ",t[0].y," ");for(var n=1,o=t.length;o>n;n++){var s=i.midPointFrom(r);e.push("Q ",i.x," ",i.y," ",s.x," ",s.y," "),i=new fabric.Point(t[n].x,t[n].y),t.length>n+1&&(r=new fabric.Point(t[n+1].x,t[n+1].y))}return e.push("L ",i.x," ",i.y," "),e},createPath:function(t){var e=new fabric.Path(t,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray,originX:"center",originY:"center"});return this.shadow&&(this.shadow.affectStroke=!0,e.setShadow(this.shadow)),e},_finalizeAndAddPath:function(){this.canvas.contextTop.closePath();var t=this.convertPointsToSVGPath(this._points).join("");if("M 0 0 Q 0 0 0 0 L 0 0"===t)return void this.canvas.renderAll();var e=this.createPath(t);this.canvas.add(e),e.setCoords(),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderAll(),this.canvas.fire("path:created",{path:e})}})}(),fabric.CircleBrush=fabric.util.createClass(fabric.BaseBrush,{width:10,initialize:function(t){this.canvas=t,this.points=[]},drawDot:function(t){var e=this.addPoint(t),i=this.canvas.contextTop,r=this.canvas.viewportTransform;i.save(),i.transform(r[0],r[1],r[2],r[3],r[4],r[5]),i.fillStyle=e.fill,i.beginPath(),i.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),i.closePath(),i.fill(),i.restore()},onMouseDown:function(t){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(t)},onMouseMove:function(t){this.drawDot(t)},onMouseUp:function(){var t=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var e=[],i=0,r=this.points.length;r>i;i++){var n=this.points[i],o=new fabric.Circle({radius:n.radius,left:n.x,top:n.y,originX:"center",originY:"center",fill:n.fill});this.shadow&&o.setShadow(this.shadow),e.push(o)}var s=new fabric.Group(e,{originX:"center",originY:"center"});s.canvas=this.canvas,this.canvas.add(s),this.canvas.fire("path:created",{path:s}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=t,this.canvas.renderAll()},addPoint:function(t){var e=new fabric.Point(t.x,t.y),i=fabric.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,r=new fabric.Color(this.color).setAlpha(fabric.util.getRandomInt(0,100)/100).toRgba();return e.radius=i,e.fill=r,this.points.push(e),e}}),fabric.SprayBrush=fabric.util.createClass(fabric.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(t){this.canvas=t,this.sprayChunks=[]},onMouseDown:function(t){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(t),this.render()},onMouseMove:function(t){this.addSprayChunk(t),this.render()},onMouseUp:function(){var t=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var e=[],i=0,r=this.sprayChunks.length;r>i;i++)for(var n=this.sprayChunks[i],o=0,s=n.length;s>o;o++){var a=new fabric.Rect({width:n[o].width,height:n[o].width,left:n[o].x+1,top:n[o].y+1,originX:"center",originY:"center",fill:this.color});this.shadow&&a.setShadow(this.shadow),e.push(a)}this.optimizeOverlapping&&(e=this._getOptimizedRects(e));var l=new fabric.Group(e,{originX:"center",originY:"center"});l.canvas=this.canvas,this.canvas.add(l),this.canvas.fire("path:created",{path:l}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=t,this.canvas.renderAll()},_getOptimizedRects:function(t){for(var e,i={},r=0,n=t.length;n>r;r++)e=t[r].left+""+t[r].top,i[e]||(i[e]=t[r]);var o=[];for(e in i)o.push(i[e]);return o},render:function(){var t=this.canvas.contextTop;t.fillStyle=this.color;var e=this.canvas.viewportTransform;t.save(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5]);for(var i=0,r=this.sprayChunkPoints.length;r>i;i++){var n=this.sprayChunkPoints[i];void 0!==n.opacity&&(t.globalAlpha=n.opacity),t.fillRect(n.x,n.y,n.width,n.width)}t.restore()},addSprayChunk:function(t){this.sprayChunkPoints=[];for(var e,i,r,n=this.width/2,o=0;this.density>o;o++){e=fabric.util.getRandomInt(t.x-n,t.x+n),i=fabric.util.getRandomInt(t.y-n,t.y+n),r=this.dotWidthVariance?fabric.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):this.dotWidth;var s=new fabric.Point(e,i);s.width=r,this.randomOpacity&&(s.opacity=fabric.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(s)}this.sprayChunks.push(this.sprayChunkPoints)}}),fabric.PatternBrush=fabric.util.createClass(fabric.PencilBrush,{getPatternSrc:function(){var t=fabric.document.createElement("canvas"),e=t.getContext("2d");return t.width=t.height=25,e.fillStyle=this.color,e.beginPath(),e.arc(10,10,10,0,2*Math.PI,!1),e.closePath(),e.fill(),t},getPatternSrcFunction:function(){return(this.getPatternSrc+"").replace("this.color",'"'+this.color+'"')},getPattern:function(){return this.canvas.contextTop.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(){this.callSuper("_setBrushStyles"),this.canvas.contextTop.strokeStyle=this.getPattern()},createPath:function(t){var e=this.callSuper("createPath",t);return e.stroke=new fabric.Pattern({source:this.source||this.getPatternSrcFunction()}),e}}),function(){var t=fabric.util.getPointer,e=fabric.util.degreesToRadians,i=fabric.util.radiansToDegrees,r=Math.atan2,n=Math.abs;fabric.Canvas=fabric.util.createClass(fabric.StaticCanvas,{initialize:function(t,e){e||(e={}),this._initStatic(t,e),this._initInteractive(),this._createCacheCanvas(),fabric.Canvas.activeInstance=this},uniScaleTransform:!1,centeredScaling:!1,centeredRotation:!1,interactive:!0,selection:!0,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",rotationCursor:"crosshair",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this.freeDrawingBrush=fabric.PencilBrush&&new fabric.PencilBrush(this),this.calcOffset()},_resetCurrentTransform:function(t){var e=this._currentTransform;e.target.set({scaleX:e.original.scaleX,scaleY:e.original.scaleY,left:e.original.left,top:e.original.top}),this._shouldCenterTransform(t,e.target)?"rotate"===e.action?this._setOriginToCenter(e.target):("center"!==e.originX&&(e.mouseXSign="right"===e.originX?-1:1),"center"!==e.originY&&(e.mouseYSign="bottom"===e.originY?-1:1),e.originX="center",e.originY="center"):(e.originX=e.original.originX,e.originY=e.original.originY)},containsPoint:function(t,e){var i=this.getPointer(t,!0);return e.containsPoint(this._normalizePointer(e,i))||e._findTargetCorner(i)},_normalizePointer:function(t,e){var i,r=this.getActiveGroup(),n=e.x,o=e.y,s=r&&"group"!==t.type&&r.contains(t);return s&&(i=new fabric.Point(r.left,r.top),i=fabric.util.transformPoint(i,this.viewportTransform,!0),n-=i.x,o-=i.y),{x:n,y:o}},isTargetTransparent:function(t,e,i){var r=t.hasBorders,n=t.transparentCorners;t.hasBorders=t.transparentCorners=!1,this._draw(this.contextCache,t),t.hasBorders=r,t.transparentCorners=n;var o=fabric.util.isTransparent(this.contextCache,e,i,this.targetFindTolerance);return this.clearContext(this.contextCache),o},_shouldClearSelection:function(t,e){var i=this.getActiveGroup(),r=this.getActiveObject();return!e||e&&i&&!i.contains(e)&&i!==e&&!t.shiftKey||e&&!e.evented||e&&!e.selectable&&r&&r!==e},_shouldCenterTransform:function(t,e){if(e){var i,r=this._currentTransform;return"scale"===r.action||"scaleX"===r.action||"scaleY"===r.action?i=this.centeredScaling||e.centeredScaling:"rotate"===r.action&&(i=this.centeredRotation||e.centeredRotation),i?!t.altKey:t.altKey}},_getOriginFromCorner:function(t,e){var i={x:t.originX,y:t.originY};return"ml"===e||"tl"===e||"bl"===e?i.x="right":"mr"!==e&&"tr"!==e&&"br"!==e||(i.x="left"),"tl"===e||"mt"===e||"tr"===e?i.y="bottom":"bl"!==e&&"mb"!==e&&"br"!==e||(i.y="top"),i},_getActionFromCorner:function(t,e){var i="drag";return e&&(i="ml"===e||"mr"===e?"scaleX":"mt"===e||"mb"===e?"scaleY":"mtr"===e?"rotate":"scale"),i},_setupCurrentTransform:function(t,i){if(i){var r=this.getPointer(t),n=i._findTargetCorner(this.getPointer(t,!0)),o=this._getActionFromCorner(i,n),s=this._getOriginFromCorner(i,n);this._currentTransform={target:i,action:o,scaleX:i.scaleX,scaleY:i.scaleY,offsetX:r.x-i.left,offsetY:r.y-i.top,originX:s.x,originY:s.y,ex:r.x,ey:r.y,left:i.left,top:i.top,theta:e(i.angle),width:i.width*i.scaleX,mouseXSign:1,mouseYSign:1},this._currentTransform.original={left:i.left,top:i.top,scaleX:i.scaleX,scaleY:i.scaleY,originX:s.x,originY:s.y},this._resetCurrentTransform(t)}},_translateObject:function(t,e){var i=this._currentTransform.target;i.get("lockMovementX")||i.set("left",t-this._currentTransform.offsetX),i.get("lockMovementY")||i.set("top",e-this._currentTransform.offsetY)},_scaleObject:function(t,e,i){var r=this._currentTransform,n=r.target,o=n.get("lockScalingX"),s=n.get("lockScalingY"),a=n.get("lockScalingFlip");if(!o||!s){var l=n.translateToOriginPoint(n.getCenterPoint(),r.originX,r.originY),h=n.toLocalPoint(new fabric.Point(t,e),r.originX,r.originY);this._setLocalMouse(h,r),this._setObjectScale(h,r,o,s,i,a),n.setPositionByOrigin(l,r.originX,r.originY)}},_setObjectScale:function(t,e,i,r,n,o){var s=e.target,a=!1,l=!1,h=s.stroke?s.strokeWidth:0;e.newScaleX=t.x/(s.width+h/2),e.newScaleY=t.y/(s.height+h/2),o&&0>=e.newScaleX&&s.scaleX>e.newScaleX&&(a=!0),o&&0>=e.newScaleY&&s.scaleY>e.newScaleY&&(l=!0),"equally"!==n||i||r?n?"x"!==n||s.get("lockUniScaling")?"y"!==n||s.get("lockUniScaling")||l||r||s.set("scaleY",e.newScaleY):a||i||s.set("scaleX",e.newScaleX):(a||i||s.set("scaleX",e.newScaleX),l||r||s.set("scaleY",e.newScaleY)):a||l||this._scaleObjectEqually(t,s,e),a||l||this._flipObject(e,n)},_scaleObjectEqually:function(t,e,i){var r=t.y+t.x,n=e.stroke?e.strokeWidth:0,o=(e.height+n/2)*i.original.scaleY+(e.width+n/2)*i.original.scaleX;i.newScaleX=i.original.scaleX*r/o,i.newScaleY=i.original.scaleY*r/o,e.set("scaleX",i.newScaleX),e.set("scaleY",i.newScaleY)},_flipObject:function(t,e){0>t.newScaleX&&"y"!==e&&("left"===t.originX?t.originX="right":"right"===t.originX&&(t.originX="left")),0>t.newScaleY&&"x"!==e&&("top"===t.originY?t.originY="bottom":"bottom"===t.originY&&(t.originY="top"))},_setLocalMouse:function(t,e){var i=e.target;"right"===e.originX?t.x*=-1:"center"===e.originX&&0>(t.x*=2*e.mouseXSign)&&(e.mouseXSign=-e.mouseXSign),"bottom"===e.originY?t.y*=-1:"center"===e.originY&&0>(t.y*=2*e.mouseYSign)&&(e.mouseYSign=-e.mouseYSign),n(t.x)>i.padding?0>t.x?t.x+=i.padding:t.x-=i.padding:t.x=0,n(t.y)>i.padding?0>t.y?t.y+=i.padding:t.y-=i.padding:t.y=0},_rotateObject:function(t,e){var n=this._currentTransform;if(!n.target.get("lockRotation")){var o=r(n.ey-n.top,n.ex-n.left),s=r(e-n.top,t-n.left),a=i(s-o+n.theta);0>a&&(a=360+a),n.target.angle=a%360}},setCursor:function(t){this.upperCanvasEl.style.cursor=t},_resetObjectTransform:function(t){t.scaleX=1,t.scaleY=1,t.setAngle(0)},_drawSelection:function(){var t=this.contextTop,e=this._groupSelector,i=e.left,r=e.top,o=n(i),s=n(r);if(t.fillStyle=this.selectionColor,t.fillRect(e.ex-(i>0?0:-i),e.ey-(r>0?0:-r),o,s),t.lineWidth=this.selectionLineWidth,t.strokeStyle=this.selectionBorderColor,this.selectionDashArray.length>1){var a=e.ex+.5-(i>0?0:o),l=e.ey+.5-(r>0?0:s);t.beginPath(),fabric.util.drawDashedLine(t,a,l,a+o,l,this.selectionDashArray),fabric.util.drawDashedLine(t,a,l+s-1,a+o,l+s-1,this.selectionDashArray),fabric.util.drawDashedLine(t,a,l,a,l+s,this.selectionDashArray),fabric.util.drawDashedLine(t,a+o-1,l,a+o-1,l+s,this.selectionDashArray),t.closePath(),t.stroke()}else t.strokeRect(e.ex+.5-(i>0?0:o),e.ey+.5-(r>0?0:s),o,s)},_isLastRenderedObject:function(t){return this.controlsAboveOverlay&&this.lastRenderedObjectWithControlsAboveOverlay&&this.lastRenderedObjectWithControlsAboveOverlay.visible&&this.containsPoint(t,this.lastRenderedObjectWithControlsAboveOverlay)&&this.lastRenderedObjectWithControlsAboveOverlay._findTargetCorner(this.getPointer(t,!0))},findTarget:function(t,e){if(!this.skipTargetFind){if(this._isLastRenderedObject(t))return this.lastRenderedObjectWithControlsAboveOverlay;var i=this.getActiveGroup();if(i&&!e&&this.containsPoint(t,i))return i;var r=this._searchPossibleTargets(t);return this._fireOverOutEvents(r),r}},_fireOverOutEvents:function(t){t?this._hoveredTarget!==t&&(this.fire("mouse:over",{target:t}),t.fire("mouseover"),this._hoveredTarget&&(this.fire("mouse:out",{target:this._hoveredTarget}),this._hoveredTarget.fire("mouseout")),this._hoveredTarget=t):this._hoveredTarget&&(this.fire("mouse:out",{target:this._hoveredTarget}),this._hoveredTarget.fire("mouseout"),this._hoveredTarget=null)},_checkTarget:function(t,e,i){if(e&&e.visible&&e.evented&&this.containsPoint(t,e)){if(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing)return!0;if(!this.isTargetTransparent(e,i.x,i.y))return!0}},_searchPossibleTargets:function(t){for(var e,i=this.getPointer(t,!0),r=this._objects.length;r--;)if(!this._objects[r].group&&this._checkTarget(t,this._objects[r],i)){this.relatedTarget=this._objects[r],e=this._objects[r];break}return e},getPointer:function(e,i,r){r||(r=this.upperCanvasEl);var n,o=t(e,r),s=r.getBoundingClientRect(),a=s.width||0,l=s.height||0;return a&&l||("top"in s&&"bottom"in s&&(l=Math.abs(s.top-s.bottom)),"right"in s&&"left"in s&&(a=Math.abs(s.right-s.left))),this.calcOffset(),o.x=o.x-this._offset.left,o.y=o.y-this._offset.top,i||(o=fabric.util.transformPoint(o,fabric.util.invertTransform(this.viewportTransform))),n=0===a||0===l?{width:1,height:1}:{width:r.width/a,height:r.height/l},{x:o.x*n.width,y:o.y*n.height}},_createUpperCanvas:function(){var t=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,"");this.upperCanvasEl=this._createCanvasElement(),fabric.util.addClass(this.upperCanvasEl,"upper-canvas "+t),this.wrapperEl.appendChild(this.upperCanvasEl),this._copyCanvasStyle(this.lowerCanvasEl,this.upperCanvasEl),this._applyCanvasStyle(this.upperCanvasEl),this.contextTop=this.upperCanvasEl.getContext("2d")},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=fabric.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),fabric.util.setStyle(this.wrapperEl,{width:this.getWidth()+"px",height:this.getHeight()+"px",position:"relative"}),fabric.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(t){var e=this.getWidth()||t.width,i=this.getHeight()||t.height;fabric.util.setStyle(t,{position:"absolute",width:e+"px",height:i+"px",left:0,top:0}),t.width=e,t.height=i,fabric.util.makeElementUnselectable(t)},_copyCanvasStyle:function(t,e){e.style.cssText=t.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},_setActiveObject:function(t){this._activeObject&&this._activeObject.set("active",!1),this._activeObject=t,t.set("active",!0)},setActiveObject:function(t,e){return this._setActiveObject(t),this.renderAll(),this.fire("object:selected",{target:t,e:e}),t.fire("selected",{e:e}),this},getActiveObject:function(){return this._activeObject},_discardActiveObject:function(){this._activeObject&&this._activeObject.set("active",!1),this._activeObject=null},discardActiveObject:function(t){return this._discardActiveObject(),this.renderAll(),this.fire("selection:cleared",{e:t}),this},_setActiveGroup:function(t){this._activeGroup=t,t&&t.set("active",!0)},setActiveGroup:function(t,e){return this._setActiveGroup(t),t&&(this.fire("object:selected",{target:t,e:e}),t.fire("selected",{e:e})),this},getActiveGroup:function(){return this._activeGroup},_discardActiveGroup:function(){var t=this.getActiveGroup();t&&t.destroy(),this.setActiveGroup(null)},discardActiveGroup:function(t){return this._discardActiveGroup(),this.fire("selection:cleared",{e:t}),this},deactivateAll:function(){for(var t=this.getObjects(),e=0,i=t.length;i>e;e++)t[e].set("active",!1);return this._discardActiveGroup(),this._discardActiveObject(),this},deactivateAllWithDispatch:function(t){var e=this.getActiveGroup()||this.getActiveObject();return e&&this.fire("before:selection:cleared",{target:e,e:t}),this.deactivateAll(),e&&this.fire("selection:cleared",{e:t}),this},drawControls:function(t){var e=this.getActiveGroup();e?this._drawGroupControls(t,e):this._drawObjectsControls(t)},_drawGroupControls:function(t,e){e._renderControls(t)},_drawObjectsControls:function(t){for(var e=0,i=this._objects.length;i>e;++e)this._objects[e]&&this._objects[e].active&&(this._objects[e]._renderControls(t),this.lastRenderedObjectWithControlsAboveOverlay=this._objects[e])}});for(var o in fabric.StaticCanvas)"prototype"!==o&&(fabric.Canvas[o]=fabric.StaticCanvas[o]);fabric.isTouchSupported&&(fabric.Canvas.prototype._setCursorFromEvent=function(){}),fabric.Element=fabric.Canvas}(),function(){var t={mt:0,tr:1,mr:2,br:3,mb:4,bl:5,ml:6,tl:7},e=fabric.util.addListener,i=fabric.util.removeListener;fabric.util.object.extend(fabric.Canvas.prototype,{cursorMap:["n-resize","ne-resize","e-resize","se-resize","s-resize","sw-resize","w-resize","nw-resize"],_initEventListeners:function(){this._bindEvents(),e(fabric.window,"resize",this._onResize),e(this.upperCanvasEl,"mousedown",this._onMouseDown),e(this.upperCanvasEl,"mousemove",this._onMouseMove),e(this.upperCanvasEl,"mousewheel",this._onMouseWheel),e(this.upperCanvasEl,"touchstart",this._onMouseDown),e(this.upperCanvasEl,"touchmove",this._onMouseMove),"undefined"!=typeof eventjs&&"add"in eventjs&&(eventjs.add(this.upperCanvasEl,"gesture",this._onGesture),eventjs.add(this.upperCanvasEl,"drag",this._onDrag),eventjs.add(this.upperCanvasEl,"orientation",this._onOrientationChange),eventjs.add(this.upperCanvasEl,"shake",this._onShake),eventjs.add(this.upperCanvasEl,"longpress",this._onLongPress))},_bindEvents:function(){this._onMouseDown=this._onMouseDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this)},removeListeners:function(){i(fabric.window,"resize",this._onResize),i(this.upperCanvasEl,"mousedown",this._onMouseDown),i(this.upperCanvasEl,"mousemove",this._onMouseMove),i(this.upperCanvasEl,"mousewheel",this._onMouseWheel),i(this.upperCanvasEl,"touchstart",this._onMouseDown),i(this.upperCanvasEl,"touchmove",this._onMouseMove),"undefined"!=typeof eventjs&&"remove"in eventjs&&(eventjs.remove(this.upperCanvasEl,"gesture",this._onGesture),eventjs.remove(this.upperCanvasEl,"drag",this._onDrag),eventjs.remove(this.upperCanvasEl,"orientation",this._onOrientationChange),eventjs.remove(this.upperCanvasEl,"shake",this._onShake),eventjs.remove(this.upperCanvasEl,"longpress",this._onLongPress))},_onGesture:function(t,e){this.__onTransformGesture&&this.__onTransformGesture(t,e)},_onDrag:function(t,e){this.__onDrag&&this.__onDrag(t,e)},_onMouseWheel:function(t,e){this.__onMouseWheel&&this.__onMouseWheel(t,e)},_onOrientationChange:function(t,e){this.__onOrientationChange&&this.__onOrientationChange(t,e)},_onShake:function(t,e){this.__onShake&&this.__onShake(t,e)},_onLongPress:function(t,e){this.__onLongPress&&this.__onLongPress(t,e)},_onMouseDown:function(t){this.__onMouseDown(t),e(fabric.document,"touchend",this._onMouseUp),e(fabric.document,"touchmove",this._onMouseMove),i(this.upperCanvasEl,"mousemove",this._onMouseMove),i(this.upperCanvasEl,"touchmove",this._onMouseMove),"touchstart"===t.type?i(this.upperCanvasEl,"mousedown",this._onMouseDown):(e(fabric.document,"mouseup",this._onMouseUp),e(fabric.document,"mousemove",this._onMouseMove))},_onMouseUp:function(t){if(this.__onMouseUp(t),i(fabric.document,"mouseup",this._onMouseUp),i(fabric.document,"touchend",this._onMouseUp),i(fabric.document,"mousemove",this._onMouseMove),i(fabric.document,"touchmove",this._onMouseMove),e(this.upperCanvasEl,"mousemove",this._onMouseMove),e(this.upperCanvasEl,"touchmove",this._onMouseMove),"touchend"===t.type){var r=this;setTimeout(function(){e(r.upperCanvasEl,"mousedown",r._onMouseDown)},400)}},_onMouseMove:function(t){!this.allowTouchScrolling&&t.preventDefault&&t.preventDefault(),this.__onMouseMove(t)},_onResize:function(){this.calcOffset()},_shouldRender:function(t,e){var i=this.getActiveGroup()||this.getActiveObject();return!!(t&&(t.isMoving||t!==i)||!t&&i||!t&&!i&&!this._groupSelector||e&&this._previousPointer&&this.selection&&(e.x!==this._previousPointer.x||e.y!==this._previousPointer.y))},__onMouseUp:function(t){var e;if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(t);this._currentTransform?(this._finalizeCurrentTransform(),e=this._currentTransform.target):e=this.findTarget(t,!0);var i=this._shouldRender(e,this.getPointer(t));this._maybeGroupObjects(t),e&&(e.isMoving=!1),i&&this.renderAll(),this._handleCursorAndEvent(t,e)},_handleCursorAndEvent:function(t,e){this._setCursorFromEvent(t,e);var i=this;setTimeout(function(){i._setCursorFromEvent(t,e)},50),this.fire("mouse:up",{target:e,e:t}),e&&e.fire("mouseup",{e:t})},_finalizeCurrentTransform:function(){var t=this._currentTransform,e=t.target;e._scaling&&(e._scaling=!1),e.setCoords(),this.stateful&&e.hasStateChanged()&&(this.fire("object:modified",{target:e}),e.fire("modified")),this._restoreOriginXY(e)},_restoreOriginXY:function(t){if(this._previousOriginX&&this._previousOriginY){var e=t.translateToOriginPoint(t.getCenterPoint(),this._previousOriginX,this._previousOriginY);t.originX=this._previousOriginX,t.originY=this._previousOriginY,t.left=e.x,t.top=e.y,this._previousOriginX=null,this._previousOriginY=null}},_onMouseDownInDrawingMode:function(t){this._isCurrentlyDrawing=!0,this.discardActiveObject(t).renderAll(),this.clipTo&&fabric.util.clipContext(this,this.contextTop);var e=fabric.util.invertTransform(this.viewportTransform);this.freeDrawingBrush.onMouseDown(fabric.util.transformPoint(this.getPointer(t,!0),e)),this.fire("mouse:down",{e:t});var i=this.findTarget(t);void 0!==i&&i.fire("mousedown",{e:t,target:i})},_onMouseMoveInDrawingMode:function(t){if(this._isCurrentlyDrawing){var e=fabric.util.invertTransform(this.viewportTransform);this.freeDrawingBrush.onMouseMove(fabric.util.transformPoint(this.getPointer(t,!0),e))}this.setCursor(this.freeDrawingCursor),this.fire("mouse:move",{e:t});var i=this.findTarget(t);void 0!==i&&i.fire("mousemove",{e:t,target:i})},_onMouseUpInDrawingMode:function(t){this._isCurrentlyDrawing=!1,this.clipTo&&this.contextTop.restore(),this.freeDrawingBrush.onMouseUp(),this.fire("mouse:up",{e:t});var e=this.findTarget(t);void 0!==e&&e.fire("mouseup",{e:t,target:e})},__onMouseDown:function(t){if(("which"in t?1===t.which:1===t.button)||fabric.isTouchSupported){if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(t);if(!this._currentTransform){var e=this.findTarget(t),i=this.getPointer(t,!0);this._previousPointer=i;var r=this._shouldRender(e,i),n=this._shouldGroup(t,e);this._shouldClearSelection(t,e)?this._clearSelection(t,e,i):n&&(this._handleGrouping(t,e),e=this.getActiveGroup()),e&&e.selectable&&!n&&(this._beforeTransform(t,e),this._setupCurrentTransform(t,e)),r&&this.renderAll(),this.fire("mouse:down",{target:e,e:t}),e&&e.fire("mousedown",{e:t})}}},_beforeTransform:function(t,e){this.stateful&&e.saveState(),e._findTargetCorner(this.getPointer(t))&&this.onBeforeScaleRotate(e),e!==this.getActiveGroup()&&e!==this.getActiveObject()&&(this.deactivateAll(),this.setActiveObject(e,t))},_clearSelection:function(t,e,i){this.deactivateAllWithDispatch(t),e&&e.selectable?this.setActiveObject(e,t):this.selection&&(this._groupSelector={ex:i.x,ey:i.y,top:0,left:0})},_setOriginToCenter:function(t){this._previousOriginX=this._currentTransform.target.originX,this._previousOriginY=this._currentTransform.target.originY;var e=t.getCenterPoint();t.originX="center",t.originY="center",t.left=e.x,t.top=e.y,this._currentTransform.left=t.left,this._currentTransform.top=t.top},_setCenterToOrigin:function(t){var e=t.translateToOriginPoint(t.getCenterPoint(),this._previousOriginX,this._previousOriginY);t.originX=this._previousOriginX,t.originY=this._previousOriginY,t.left=e.x,t.top=e.y,this._previousOriginX=null,this._previousOriginY=null},__onMouseMove:function(t){var e,i;if(this.isDrawingMode)return void this._onMouseMoveInDrawingMode(t);if(void 0===t.touches||1>=t.touches.length){var r=this._groupSelector;r?(i=this.getPointer(t,!0),r.left=i.x-r.ex,r.top=i.y-r.ey,this.renderTop()):this._currentTransform?this._transformObject(t):(e=this.findTarget(t),!e||e&&!e.selectable?this.setCursor(this.defaultCursor):this._setCursorFromEvent(t,e)),this.fire("mouse:move",{target:e,e:t}),e&&e.fire("mousemove",{e:t})}},_transformObject:function(t){var e=this.getPointer(t),i=this._currentTransform;i.reset=!1,i.target.isMoving=!0,this._beforeScaleTransform(t,i),this._performTransformAction(t,i,e),this.renderAll()},_performTransformAction:function(t,e,i){var r=i.x,n=i.y,o=e.target,s=e.action;"rotate"===s?(this._rotateObject(r,n),this._fire("rotating",o,t)):"scale"===s?(this._onScale(t,e,r,n),this._fire("scaling",o,t)):"scaleX"===s?(this._scaleObject(r,n,"x"),this._fire("scaling",o,t)):"scaleY"===s?(this._scaleObject(r,n,"y"),this._fire("scaling",o,t)):(this._translateObject(r,n),this._fire("moving",o,t),this.setCursor(this.moveCursor))},_fire:function(t,e,i){this.fire("object:"+t,{target:e,e:i}),e.fire(t,{e:i})},_beforeScaleTransform:function(t,e){if("scale"===e.action||"scaleX"===e.action||"scaleY"===e.action){var i=this._shouldCenterTransform(t,e.target);(i&&("center"!==e.originX||"center"!==e.originY)||!i&&"center"===e.originX&&"center"===e.originY)&&(this._resetCurrentTransform(t),e.reset=!0)}},_onScale:function(t,e,i,r){!t.shiftKey&&!this.uniScaleTransform||e.target.get("lockUniScaling")?(e.reset||"scale"!==e.currentAction||this._resetCurrentTransform(t,e.target),e.currentAction="scaleEqually",this._scaleObject(i,r,"equally")):(e.currentAction="scale",this._scaleObject(i,r))},_setCursorFromEvent:function(t,e){if(!e||!e.selectable)return this.setCursor(this.defaultCursor),!1;var i=this.getActiveGroup(),r=e._findTargetCorner&&(!i||!i.contains(e))&&e._findTargetCorner(this.getPointer(t,!0));return r?this._setCornerCursor(r,e):this.setCursor(e.hoverCursor||this.hoverCursor),!0},_setCornerCursor:function(e,i){if(e in t)this.setCursor(this._getRotatedCornerCursor(e,i));else{if("mtr"!==e||!i.hasRotatingPoint)return this.setCursor(this.defaultCursor),!1;this.setCursor(this.rotationCursor)}},_getRotatedCornerCursor:function(e,i){var r=Math.round(i.getAngle()%360/45);return 0>r&&(r+=8),r+=t[e],r%=8,this.cursorMap[r]}})}(),function(){var t=Math.min,e=Math.max;fabric.util.object.extend(fabric.Canvas.prototype,{_shouldGroup:function(t,e){var i=this.getActiveObject();return t.shiftKey&&(this.getActiveGroup()||i&&i!==e)&&this.selection},_handleGrouping:function(t,e){(e!==this.getActiveGroup()||(e=this.findTarget(t,!0))&&!e.isType("group"))&&(this.getActiveGroup()?this._updateActiveGroup(e,t):this._createActiveGroup(e,t),this._activeGroup&&this._activeGroup.saveCoords())},_updateActiveGroup:function(t,e){var i=this.getActiveGroup();if(i.contains(t)){if(i.removeWithUpdate(t),this._resetObjectTransform(i),t.set("active",!1),1===i.size())return this.discardActiveGroup(e),void this.setActiveObject(i.item(0))}else i.addWithUpdate(t),this._resetObjectTransform(i);this.fire("selection:created",{target:i,e:e}),i.set("active",!0)},_createActiveGroup:function(t,e){if(this._activeObject&&t!==this._activeObject){var i=this._createGroup(t);i.addWithUpdate(),this.setActiveGroup(i),this._activeObject=null,this.fire("selection:created",{target:i,e:e})}t.set("active",!0)},_createGroup:function(t){var e=this.getObjects(),i=e.indexOf(this._activeObject)<e.indexOf(t);return new fabric.Group(i?[this._activeObject,t]:[t,this._activeObject],{canvas:this})},_groupSelectedObjects:function(t){var e=this._collectObjects();1===e.length?this.setActiveObject(e[0],t):e.length>1&&(e=new fabric.Group(e.reverse(),{canvas:this}),e.addWithUpdate(),this.setActiveGroup(e,t),e.saveCoords(),this.fire("selection:created",{target:e}),this.renderAll())},_collectObjects:function(){for(var i,r=[],n=this._groupSelector.ex,o=this._groupSelector.ey,s=n+this._groupSelector.left,a=o+this._groupSelector.top,l=new fabric.Point(t(n,s),t(o,a)),h=new fabric.Point(e(n,s),e(o,a)),c=n===s&&o===a,u=this._objects.length;u--&&!((i=this._objects[u])&&i.selectable&&i.visible&&(i.intersectsWithRect(l,h)||i.isContainedWithinRect(l,h)||i.containsPoint(l)||i.containsPoint(h))&&(i.set("active",!0),r.push(i),c)););return r},_maybeGroupObjects:function(t){this.selection&&this._groupSelector&&this._groupSelectedObjects(t);var e=this.getActiveGroup();e&&(e.setObjectsCoords().setCoords(),e.isMoving=!1,this.setCursor(this.defaultCursor)),this._groupSelector=null,this._currentTransform=null}})}(),fabric.util.object.extend(fabric.StaticCanvas.prototype,{toDataURL:function(t){t||(t={});var e=t.format||"png",i=t.quality||1,r=t.multiplier||1,n={left:t.left,top:t.top,width:t.width,height:t.height};return 1!==r?this.__toDataURLWithMultiplier(e,i,n,r):this.__toDataURL(e,i,n)},__toDataURL:function(t,e,i){this.renderAll(!0);var r=this.upperCanvasEl||this.lowerCanvasEl,n=this.__getCroppedCanvas(r,i);"jpg"===t&&(t="jpeg");var o=fabric.StaticCanvas.supports("toDataURLWithQuality")?(n||r).toDataURL("image/"+t,e):(n||r).toDataURL("image/"+t);return this.contextTop&&this.clearContext(this.contextTop),this.renderAll(),n&&(n=null),o},__getCroppedCanvas:function(t,e){var i,r;return("left"in e||"top"in e||"width"in e||"height"in e)&&(i=fabric.util.createCanvasElement(),r=i.getContext("2d"),i.width=e.width||this.width,i.height=e.height||this.height,r.drawImage(t,-e.left||0,-e.top||0)),i},__toDataURLWithMultiplier:function(t,e,i,r){var n=this.getWidth(),o=this.getHeight(),s=n*r,a=o*r,l=this.getActiveObject(),h=this.getActiveGroup(),c=this.contextTop||this.contextContainer;r>1&&this.setWidth(s).setHeight(a),c.scale(r,r),i.left&&(i.left*=r),i.top&&(i.top*=r),i.width?i.width*=r:1>r&&(i.width=s),i.height?i.height*=r:1>r&&(i.height=a),h?this._tempRemoveBordersControlsFromGroup(h):l&&this.deactivateAll&&this.deactivateAll(),this.renderAll(!0);var u=this.__toDataURL(t,e,i);return this.width=n,this.height=o,c.scale(1/r,1/r),this.setWidth(n).setHeight(o),h?this._restoreBordersControlsOnGroup(h):l&&this.setActiveObject&&this.setActiveObject(l),this.contextTop&&this.clearContext(this.contextTop),this.renderAll(),u},toDataURLWithMultiplier:function(t,e,i){return this.toDataURL({format:t,multiplier:e,quality:i})},_tempRemoveBordersControlsFromGroup:function(t){t.origHasControls=t.hasControls,t.origBorderColor=t.borderColor,t.hasControls=!0,t.borderColor="rgba(0,0,0,0)",t.forEachObject(function(t){t.origBorderColor=t.borderColor,t.borderColor="rgba(0,0,0,0)"})},_restoreBordersControlsOnGroup:function(t){t.hideControls=t.origHideControls,t.borderColor=t.origBorderColor,t.forEachObject(function(t){t.borderColor=t.origBorderColor,delete t.origBorderColor})}}),fabric.util.object.extend(fabric.StaticCanvas.prototype,{loadFromDatalessJSON:function(t,e,i){return this.loadFromJSON(t,e,i)},loadFromJSON:function(t,e,i){if(t){var r="string"==typeof t?JSON.parse(t):t;this.clear();var n=this;return this._enlivenObjects(r.objects,function(){n._setBgOverlay(r,e)},i),this}},_setBgOverlay:function(t,e){var i=this,r={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!(t.backgroundImage||t.overlayImage||t.background||t.overlay))return void(e&&e());var n=function(){r.backgroundImage&&r.overlayImage&&r.backgroundColor&&r.overlayColor&&(i.renderAll(),e&&e())};this.__setBgOverlay("backgroundImage",t.backgroundImage,r,n),this.__setBgOverlay("overlayImage",t.overlayImage,r,n),this.__setBgOverlay("backgroundColor",t.background,r,n),this.__setBgOverlay("overlayColor",t.overlay,r,n),n()},__setBgOverlay:function(t,e,i,r){var n=this;if(!e)return void(i[t]=!0);"backgroundImage"===t||"overlayImage"===t?fabric.Image.fromObject(e,function(e){n[t]=e,i[t]=!0,r&&r()}):this["set"+fabric.util.string.capitalize(t,!0)](e,function(){i[t]=!0,r&&r()})},_enlivenObjects:function(t,e,i){var r=this;if(!t||0===t.length)return void(e&&e());var n=this.renderOnAddRemove;this.renderOnAddRemove=!1,fabric.util.enlivenObjects(t,function(t){t.forEach(function(t,e){r.insertAt(t,e,!0)}),r.renderOnAddRemove=n,e&&e()},null,i)},_toDataURL:function(t,e){this.clone(function(i){e(i.toDataURL(t))})},_toDataURLWithMultiplier:function(t,e,i){this.clone(function(r){i(r.toDataURLWithMultiplier(t,e))})},clone:function(t,e){var i=JSON.stringify(this.toJSON(e));this.cloneWithoutData(function(e){e.loadFromJSON(i,function(){t&&t(e)})})},cloneWithoutData:function(t){var e=fabric.document.createElement("canvas");e.width=this.getWidth(),e.height=this.getHeight();var i=new fabric.Canvas(e);i.clipTo=this.clipTo,this.backgroundImage?(i.setBackgroundImage(this.backgroundImage.src,function(){i.renderAll(),t&&t(i)}),i.backgroundImageOpacity=this.backgroundImageOpacity,i.backgroundImageStretch=this.backgroundImageStretch):t&&t(i)}}),function(t){var e=t.fabric||(t.fabric={}),i=e.util.object.extend,r=e.util.toFixed,n=e.util.string.capitalize,o=e.util.degreesToRadians,s=e.StaticCanvas.supports("setLineDash");e.Object||(e.Object=e.util.createClass({type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,cornerSize:12,transparentCorners:!0,hoverCursor:null,padding:0,borderColor:"rgba(102,153,255,0.75)",cornerColor:"rgba(102,153,255,0.5)",centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:10,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,transformMatrix:null,minScaleLimit:.01,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,hasRotatingPoint:!0,rotatingPointOffset:40,perPixelTargetFind:!1,includeDefaultValues:!0,clipTo:null,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockUniScaling:!1,lockScalingFlip:!1,stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeLineJoin strokeMiterLimit angle opacity fill fillRule globalCompositeOperation shadow clipTo visible backgroundColor".split(" "),initialize:function(t){t&&this.setOptions(t)},_initGradient:function(t){!t.fill||!t.fill.colorStops||t.fill instanceof e.Gradient||this.set("fill",new e.Gradient(t.fill))},_initPattern:function(t){!t.fill||!t.fill.source||t.fill instanceof e.Pattern||this.set("fill",new e.Pattern(t.fill)),!t.stroke||!t.stroke.source||t.stroke instanceof e.Pattern||this.set("stroke",new e.Pattern(t.stroke))},_initClipping:function(t){if(t.clipTo&&"string"==typeof t.clipTo){var i=e.util.getFunctionBody(t.clipTo);void 0!==i&&(this.clipTo=Function("ctx",i))}},setOptions:function(t){for(var e in t)this.set(e,t[e]);this._initGradient(t),this._initPattern(t),this._initClipping(t)},transform:function(t,e){var i=e?this._getLeftTopCoords():this.getCenterPoint();t.translate(i.x,i.y),t.rotate(o(this.angle)),t.scale(this.scaleX*(this.flipX?-1:1),this.scaleY*(this.flipY?-1:1))},toObject:function(t){var i=e.Object.NUM_FRACTION_DIGITS,n={type:this.type,originX:this.originX,originY:this.originY,left:r(this.left,i),top:r(this.top,i),width:r(this.width,i),height:r(this.height,i),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:r(this.strokeWidth,i),strokeDashArray:this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:r(this.strokeMiterLimit,i),scaleX:r(this.scaleX,i),scaleY:r(this.scaleY,i),angle:r(this.getAngle(),i),flipX:this.flipX,flipY:this.flipY,opacity:r(this.opacity,i),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,clipTo:this.clipTo&&this.clipTo+"",backgroundColor:this.backgroundColor,fillRule:this.fillRule,globalCompositeOperation:this.globalCompositeOperation};return this.includeDefaultValues||(n=this._removeDefaultValues(n)),e.util.populateWithProperties(this,n,t),n},toDatalessObject:function(t){return this.toObject(t)},_removeDefaultValues:function(t){var i=e.util.getKlass(t.type).prototype;return i.stateProperties.forEach(function(e){t[e]===i[e]&&delete t[e]}),t},toString:function(){return"#<fabric."+n(this.type)+">"},get:function(t){return this[t]},_setObject:function(t){for(var e in t)this._set(e,t[e])},set:function(t,e){return"object"===(void 0===t?"undefined":_typeof(t))?this._setObject(t):"function"==typeof e&&"clipTo"!==t?this._set(t,e(this.get(t))):this._set(t,e),this},_set:function(t,i){return("scaleX"===t||"scaleY"===t)&&(i=this._constrainScale(i)),"scaleX"===t&&0>i?(this.flipX=!this.flipX,i*=-1):"scaleY"===t&&0>i?(this.flipY=!this.flipY,i*=-1):"width"===t||"height"===t?this.minScaleLimit=r(Math.min(.1,1/Math.max(this.width,this.height)),2):"shadow"!==t||!i||i instanceof e.Shadow||(i=new e.Shadow(i)),this[t]=i,this},toggle:function(t){var e=this.get(t);return"boolean"==typeof e&&this.set(t,!e),this},setSourcePath:function(t){return this.sourcePath=t,this},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:[1,0,0,1,0,0]},render:function(t,i){0===this.width&&0===this.height||!this.visible||(t.save(),this._setupCompositeOperation(t),i||this.transform(t),this._setStrokeStyles(t),this._setFillStyles(t),this.transformMatrix&&t.transform.apply(t,this.transformMatrix),this._setOpacity(t),this._setShadow(t),this.clipTo&&e.util.clipContext(this,t),this._render(t,i),this.clipTo&&t.restore(),this._removeShadow(t),this._restoreCompositeOperation(t),t.restore())},_setOpacity:function(t){this.group&&this.group._setOpacity(t),t.globalAlpha*=this.opacity},_setStrokeStyles:function(t){this.stroke&&(t.lineWidth=this.strokeWidth,t.lineCap=this.strokeLineCap,t.lineJoin=this.strokeLineJoin,t.miterLimit=this.strokeMiterLimit,t.strokeStyle=this.stroke.toLive?this.stroke.toLive(t,this):this.stroke)},_setFillStyles:function(t){this.fill&&(t.fillStyle=this.fill.toLive?this.fill.toLive(t,this):this.fill)},_renderControls:function(t,i){if(this.active&&!i){var r=this.getViewportTransform();t.save();var n;this.group&&(n=e.util.transformPoint(this.group.getCenterPoint(),r),t.translate(n.x,n.y),t.rotate(o(this.group.angle))),n=e.util.transformPoint(this.getCenterPoint(),r,null!=this.group),this.group&&(n.x*=this.group.scaleX,n.y*=this.group.scaleY),t.translate(n.x,n.y),t.rotate(o(this.angle)),this.drawBorders(t),this.drawControls(t),t.restore()}},_setShadow:function(t){if(this.shadow){var e=this.canvas&&this.canvas.viewportTransform[0]||1,i=this.canvas&&this.canvas.viewportTransform[3]||1;t.shadowColor=this.shadow.color,t.shadowBlur=this.shadow.blur*(e+i)*(this.scaleX+this.scaleY)/4,t.shadowOffsetX=this.shadow.offsetX*e*this.scaleX,t.shadowOffsetY=this.shadow.offsetY*i*this.scaleY}},_removeShadow:function(t){this.shadow&&(t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0)},_renderFill:function(t){if(this.fill){if(t.save(),this.fill.gradientTransform){t.transform.apply(t,this.fill.gradientTransform)}this.fill.toLive&&t.translate(-this.width/2+this.fill.offsetX||0,-this.height/2+this.fill.offsetY||0),"evenodd"===this.fillRule?t.fill("evenodd"):t.fill(),t.restore(),this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t)}},_renderStroke:function(t){if(this.stroke&&0!==this.strokeWidth){if(t.save(),this.strokeDashArray)1&this.strokeDashArray.length&&this.strokeDashArray.push.apply(this.strokeDashArray,this.strokeDashArray),s?(t.setLineDash(this.strokeDashArray),this._stroke&&this._stroke(t)):this._renderDashedStroke&&this._renderDashedStroke(t),t.stroke();else{if(this.stroke.gradientTransform){t.transform.apply(t,this.stroke.gradientTransform)}this._stroke?this._stroke(t):t.stroke()}this._removeShadow(t),t.restore()}},clone:function(t,i){return this.constructor.fromObject?this.constructor.fromObject(this.toObject(i),t):new e.Object(this.toObject(i))},cloneAsImage:function(t){var i=this.toDataURL();return e.util.loadImage(i,function(i){t&&t(new e.Image(i))}),this},toDataURL:function(t){t||(t={});var i=e.util.createCanvasElement(),r=this.getBoundingRect();i.width=r.width,i.height=r.height,e.util.wrapElement(i,"div");var n=new e.StaticCanvas(i);"jpg"===t.format&&(t.format="jpeg"),"jpeg"===t.format&&(n.backgroundColor="#fff");var o={active:this.get("active"),left:this.getLeft(),top:this.getTop()};this.set("active",!1),this.setPositionByOrigin(new e.Point(i.width/2,i.height/2),"center","center");var s=this.canvas;n.add(this);var a=n.toDataURL(t);return this.set(o).setCoords(),this.canvas=s,n.dispose(),n=null,a},isType:function(t){return this.type===t},complexity:function(){return 0},toJSON:function(t){return this.toObject(t)},setGradient:function(t,i){i||(i={});var r={colorStops:[]};r.type=i.type||(i.r1||i.r2?"radial":"linear"),r.coords={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2},(i.r1||i.r2)&&(r.coords.r1=i.r1,r.coords.r2=i.r2);for(var n in i.colorStops){var o=new e.Color(i.colorStops[n]);r.colorStops.push({offset:n,color:o.toRgb(),opacity:o.getAlpha()})}return this.set(t,e.Gradient.forObject(this,r))},setPatternFill:function(t){return this.set("fill",new e.Pattern(t))},setShadow:function(t){return this.set("shadow",t?new e.Shadow(t):null)},setColor:function(t){return this.set("fill",t),this},setAngle:function(t){var e=("center"!==this.originX||"center"!==this.originY)&&this.centeredRotation;return e&&this._setOriginToCenter(),this.set("angle",t),e&&this._resetOrigin(),this},centerH:function(){return this.canvas.centerObjectH(this),this},centerV:function(){return this.canvas.centerObjectV(this),this},center:function(){return this.canvas.centerObject(this),this},remove:function(){return this.canvas.remove(this),this},getLocalPointer:function(t,e){e=e||this.canvas.getPointer(t);var i=this.translateToOriginPoint(this.getCenterPoint(),"left","top");return{x:e.x-i.x,y:e.y-i.y}},_setupCompositeOperation:function(t){this.globalCompositeOperation&&(this._prevGlobalCompositeOperation=t.globalCompositeOperation,t.globalCompositeOperation=this.globalCompositeOperation)},_restoreCompositeOperation:function(t){this.globalCompositeOperation&&this._prevGlobalCompositeOperation&&(t.globalCompositeOperation=this._prevGlobalCompositeOperation)}}),e.util.createAccessors(e.Object),e.Object.prototype.rotate=e.Object.prototype.setAngle,i(e.Object.prototype,e.Observable),e.Object.NUM_FRACTION_DIGITS=2,e.Object.__uid=0)}(exports),function(){var t=fabric.util.degreesToRadians;fabric.util.object.extend(fabric.Object.prototype,{translateToCenterPoint:function(e,i,r){var n=e.x,o=e.y,s=this.stroke?this.strokeWidth:0;return"left"===i?n=e.x+(this.getWidth()+s*this.scaleX)/2:"right"===i&&(n=e.x-(this.getWidth()+s*this.scaleX)/2),"top"===r?o=e.y+(this.getHeight()+s*this.scaleY)/2:"bottom"===r&&(o=e.y-(this.getHeight()+s*this.scaleY)/2),fabric.util.rotatePoint(new fabric.Point(n,o),e,t(this.angle))},translateToOriginPoint:function(e,i,r){var n=e.x,o=e.y,s=this.stroke?this.strokeWidth:0;return"left"===i?n=e.x-(this.getWidth()+s*this.scaleX)/2:"right"===i&&(n=e.x+(this.getWidth()+s*this.scaleX)/2),"top"===r?o=e.y-(this.getHeight()+s*this.scaleY)/2:"bottom"===r&&(o=e.y+(this.getHeight()+s*this.scaleY)/2),fabric.util.rotatePoint(new fabric.Point(n,o),e,t(this.angle))},getCenterPoint:function(){return this.translateToCenterPoint(new fabric.Point(this.left,this.top),this.originX,this.originY)},getPointByOrigin:function(t,e){return this.translateToOriginPoint(this.getCenterPoint(),t,e)},toLocalPoint:function(e,i,r){var n,o,s=this.getCenterPoint(),a=this.stroke?this.strokeWidth:0;return i&&r?(n="left"===i?s.x-(this.getWidth()+a*this.scaleX)/2:"right"===i?s.x+(this.getWidth()+a*this.scaleX)/2:s.x,o="top"===r?s.y-(this.getHeight()+a*this.scaleY)/2:"bottom"===r?s.y+(this.getHeight()+a*this.scaleY)/2:s.y):(n=this.left,o=this.top),fabric.util.rotatePoint(new fabric.Point(e.x,e.y),s,-t(this.angle)).subtractEquals(new fabric.Point(n,o))},setPositionByOrigin:function(t,e,i){var r=this.translateToCenterPoint(t,e,i),n=this.translateToOriginPoint(r,this.originX,this.originY);this.set("left",n.x),this.set("top",n.y)},adjustPosition:function(e){var i=t(this.angle),r=this.getWidth()/2,n=Math.cos(i)*r,o=Math.sin(i)*r,s=this.getWidth(),a=Math.cos(i)*s,l=Math.sin(i)*s;"center"===this.originX&&"left"===e||"right"===this.originX&&"center"===e?(this.left-=n,this.top-=o):"left"===this.originX&&"center"===e||"center"===this.originX&&"right"===e?(this.left+=n,this.top+=o):"left"===this.originX&&"right"===e?(this.left+=a,this.top+=l):"right"===this.originX&&"left"===e&&(this.left-=a,this.top-=l),this.setCoords(),this.originX=e},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var t=this.getCenterPoint();this.originX="center",this.originY="center",this.left=t.x,this.top=t.y},_resetOrigin:function(){var t=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=t.x,this.top=t.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","center")}})}(),function(){var t=fabric.util.degreesToRadians;fabric.util.object.extend(fabric.Object.prototype,{oCoords:null,intersectsWithRect:function(t,e){var i=this.oCoords,r=new fabric.Point(i.tl.x,i.tl.y),n=new fabric.Point(i.tr.x,i.tr.y),o=new fabric.Point(i.bl.x,i.bl.y),s=new fabric.Point(i.br.x,i.br.y);return"Intersection"===fabric.Intersection.intersectPolygonRectangle([r,n,s,o],t,e).status},intersectsWithObject:function(t){function e(t){return{tl:new fabric.Point(t.tl.x,t.tl.y),tr:new fabric.Point(t.tr.x,t.tr.y),bl:new fabric.Point(t.bl.x,t.bl.y),br:new fabric.Point(t.br.x,t.br.y)}}var i=e(this.oCoords),r=e(t.oCoords);return"Intersection"===fabric.Intersection.intersectPolygonPolygon([i.tl,i.tr,i.br,i.bl],[r.tl,r.tr,r.br,r.bl]).status},isContainedWithinObject:function(t){var e=t.getBoundingRect();return this.isContainedWithinRect(new fabric.Point(e.left,e.top),new fabric.Point(e.left+e.width,e.top+e.height))},isContainedWithinRect:function(t,e){var i=this.getBoundingRect();return!(t.x>i.left||i.left+i.width>e.x||t.y>i.top||i.top+i.height>e.y)},containsPoint:function(t){var e=this._getImageLines(this.oCoords),i=this._findCrossPoints(t,e);return 0!==i&&i%2==1},_getImageLines:function(t){return{topline:{o:t.tl,d:t.tr},rightline:{o:t.tr,d:t.br},bottomline:{o:t.br,d:t.bl},leftline:{o:t.bl,d:t.tl}}},_findCrossPoints:function(t,e){var i,r,n,o,s,a,l=0;for(var h in e)if(a=e[h],!(t.y>a.o.y&&t.y>a.d.y||a.o.y>=t.y&&a.d.y>=t.y||(a.o.x!==a.d.x||t.x>a.o.x?(i=0,r=(a.d.y-a.o.y)/(a.d.x-a.o.x),n=t.y-i*t.x,o=a.o.y-r*a.o.x,s=-(n-o)/(i-r),n+i*s):(s=a.o.x,t.y),t.x>s||(l+=1),2!==l)))break;return l},getBoundingRectWidth:function(){return this.getBoundingRect().width},getBoundingRectHeight:function(){return this.getBoundingRect().height},getBoundingRect:function(){this.oCoords||this.setCoords();var t=[this.oCoords.tl.x,this.oCoords.tr.x,this.oCoords.br.x,this.oCoords.bl.x],e=fabric.util.array.min(t),i=fabric.util.array.max(t),r=Math.abs(e-i),n=[this.oCoords.tl.y,this.oCoords.tr.y,this.oCoords.br.y,this.oCoords.bl.y],o=fabric.util.array.min(n),s=fabric.util.array.max(n);return{left:e,top:o,width:r,height:Math.abs(o-s)}},getWidth:function(){return this.width*this.scaleX},getHeight:function(){return this.height*this.scaleY},_constrainScale:function(t){return Math.abs(t)<this.minScaleLimit?0>t?-this.minScaleLimit:this.minScaleLimit:t},scale:function(t){return t=this._constrainScale(t),0>t&&(this.flipX=!this.flipX,this.flipY=!this.flipY,t*=-1),this.scaleX=t,this.scaleY=t,this.setCoords(),this},scaleToWidth:function(t){return this.scale(t/this.width/(this.getBoundingRectWidth()/this.getWidth()))},scaleToHeight:function(t){return this.scale(t/this.height/(this.getBoundingRectHeight()/this.getHeight()))},setCoords:function(){var e=t(this.angle),i=this.getViewportTransform(),r=function(t){return fabric.util.transformPoint(t,i)},n=this._calculateCurrentDimensions(!1),o=n.x,s=n.y;0>o&&(o=Math.abs(o));var a=Math.sqrt(Math.pow(o/2,2)+Math.pow(s/2,2)),l=Math.atan(isFinite(s/o)?s/o:0),h=Math.cos(l+e)*a,c=Math.sin(l+e)*a,u=Math.sin(e),f=Math.cos(e),d=this.getCenterPoint(),p=new fabric.Point(o,s),g=new fabric.Point(d.x-h,d.y-c),v=new fabric.Point(g.x+p.x*f,g.y+p.x*u),m=r(new fabric.Point(g.x-p.y*u,g.y+p.y*f)),y=r(new fabric.Point(v.x-p.y*u,v.y+p.y*f)),b=r(g),_=r(v),x=new fabric.Point((b.x+m.x)/2,(b.y+m.y)/2),w=new fabric.Point((_.x+b.x)/2,(_.y+b.y)/2);return this.oCoords={tl:b,tr:_,br:y,bl:m,ml:x,mt:w,mr:new fabric.Point((y.x+_.x)/2,(y.y+_.y)/2),mb:new fabric.Point((y.x+m.x)/2,(y.y+m.y)/2),mtr:new fabric.Point(w.x+u*this.rotatingPointOffset,w.y-f*this.rotatingPointOffset)},this._setCornerCoords&&this._setCornerCoords(),this}})}(),fabric.util.object.extend(fabric.Object.prototype,{sendToBack:function(){return this.group?fabric.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?fabric.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas.bringToFront(this),this},sendBackwards:function(t){return this.group?fabric.StaticCanvas.prototype.sendBackwards.call(this.group,this,t):this.canvas.sendBackwards(this,t),this},bringForward:function(t){return this.group?fabric.StaticCanvas.prototype.bringForward.call(this.group,this,t):this.canvas.bringForward(this,t),this},moveTo:function(t){return this.group?fabric.StaticCanvas.prototype.moveTo.call(this.group,this,t):this.canvas.moveTo(this,t),this}}),fabric.util.object.extend(fabric.Object.prototype,{getSvgStyles:function(){var t=this.fill?this.fill.toLive?"url(#SVGID_"+this.fill.id+")":this.fill:"none",e=this.fillRule,i=this.stroke?this.stroke.toLive?"url(#SVGID_"+this.stroke.id+")":this.stroke:"none",r=this.strokeWidth?this.strokeWidth:"0",n=this.strokeDashArray?this.strokeDashArray.join(" "):"",o=this.strokeLineCap?this.strokeLineCap:"butt",s=this.strokeLineJoin?this.strokeLineJoin:"miter",a=this.strokeMiterLimit?this.strokeMiterLimit:"4",l=void 0!==this.opacity?this.opacity:"1",h=this.visible?"":" visibility: hidden;";return"stroke: "+i+"; stroke-width: "+r+"; stroke-dasharray: "+n+"; stroke-linecap: "+o+"; stroke-linejoin: "+s+"; stroke-miterlimit: "+a+"; fill: "+t+"; fill-rule: "+e+"; opacity: "+l+";"+(this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":"")+h},getSvgTransform:function(){if(this.group&&"path-group"===this.group.type)return"";var t=fabric.util.toFixed,e=this.getAngle(),i=!this.canvas||this.canvas.svgViewportTransformation?this.getViewportTransform():[1,0,0,1,0,0],r=fabric.util.transformPoint(this.getCenterPoint(),i),n=fabric.Object.NUM_FRACTION_DIGITS,o="path-group"===this.type?"":"translate("+t(r.x,n)+" "+t(r.y,n)+")",s=0!==e?" rotate("+t(e,n)+")":"",a=1===this.scaleX&&1===this.scaleY&&1===i[0]&&1===i[3]?"":" scale("+t(this.scaleX*i[0],n)+" "+t(this.scaleY*i[3],n)+")",l="path-group"===this.type?this.width*i[0]:0,h=this.flipX?" matrix(-1 0 0 1 "+l+" 0) ":"",c="path-group"===this.type?this.height*i[3]:0;return""+o+s+a+h+(this.flipY?" matrix(1 0 0 -1 0 "+c+")":"")},getSvgTransformMatrix:function(){return this.transformMatrix?" matrix("+this.transformMatrix.join(" ")+") ":""},_createBaseSVGMarkup:function(){var t=[];return this.fill&&this.fill.toLive&&t.push(this.fill.toSVG(this,!1)),this.stroke&&this.stroke.toLive&&t.push(this.stroke.toSVG(this,!1)),this.shadow&&t.push(this.shadow.toSVG(this)),t}}),fabric.util.object.extend(fabric.Object.prototype,{hasStateChanged:function(){return this.stateProperties.some(function(t){return this.get(t)!==this.originalState[t]},this)},saveState:function(t){return this.stateProperties.forEach(function(t){this.originalState[t]=this.get(t)},this),t&&t.stateProperties&&t.stateProperties.forEach(function(t){this.originalState[t]=this.get(t)},this),this},setupState:function(){return this.originalState={},this.saveState(),this}}),function(){var t=fabric.util.degreesToRadians,e=function(){return"undefined"!=typeof G_vmlCanvasManager};fabric.util.object.extend(fabric.Object.prototype,{_controlsVisibility:null,_findTargetCorner:function(t){if(!this.hasControls||!this.active)return!1;var e,i,r=t.x,n=t.y;for(var o in this.oCoords)if(this.isControlVisible(o)&&("mtr"!==o||this.hasRotatingPoint)&&(!this.get("lockUniScaling")||"mt"!==o&&"mr"!==o&&"mb"!==o&&"ml"!==o)&&(i=this._getImageLines(this.oCoords[o].corner),0!==(e=this._findCrossPoints({x:r,y:n},i))&&e%2==1))return this.__corner=o,o;return!1},_setCornerCoords:function(){var e,i,r=this.oCoords,n=t(45-this.angle),o=Math.sqrt(2*Math.pow(this.cornerSize,2))/2,s=o*Math.cos(n),a=o*Math.sin(n);for(var l in r)e=r[l].x,i=r[l].y,r[l].corner={tl:{x:e-a,y:i-s},tr:{x:e+s,y:i-a},bl:{x:e-s,y:i+a},br:{x:e+a,y:i+s}}},_calculateCurrentDimensions:function(t){var e=this.getViewportTransform(),i=this.strokeWidth,r=this.width,n=this.height,o="round"===this.strokeLineCap||"square"===this.strokeLineCap,s="line"===this.type&&0===this.width,a="line"===this.type&&0===this.height,l=s||a,h=o&&a||!l,c=o&&s||!l;return s?r=i:a&&(n=i),h&&(r+=0>r?-i:i),c&&(n+=0>n?-i:i),r=r*this.scaleX+2*this.padding,n=n*this.scaleY+2*this.padding,t?fabric.util.transformPoint(new fabric.Point(r,n),e,!0):{x:r,y:n}},drawBorders:function(t){if(!this.hasBorders)return this;t.save(),t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,t.strokeStyle=this.borderColor,t.lineWidth=1/this.borderScaleFactor;var e=this._calculateCurrentDimensions(!0),i=e.x,r=e.y;if(this.group&&(i*=this.group.scaleX,r*=this.group.scaleY),t.strokeRect(~~(-i/2)-.5,~~(-r/2)-.5,1+~~i,1+~~r),this.hasRotatingPoint&&this.isControlVisible("mtr")&&!this.get("lockRotation")&&this.hasControls){var n=-r/2;t.beginPath(),t.moveTo(0,n),t.lineTo(0,n-this.rotatingPointOffset),t.closePath(),t.stroke()}return t.restore(),this},drawControls:function(t){if(!this.hasControls)return this;var e=this._calculateCurrentDimensions(!0),i=e.x,r=e.y,n=-i/2,o=-r/2,s=this.cornerSize/2,a=this.transparentCorners?"strokeRect":"fillRect";return t.save(),t.lineWidth=1,t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,t.strokeStyle=t.fillStyle=this.cornerColor,this._drawControl("tl",t,a,n-s,o-s),this._drawControl("tr",t,a,n+i-s,o-s),this._drawControl("bl",t,a,n-s,o+r-s),this._drawControl("br",t,a,n+i-s,o+r-s),this.get("lockUniScaling")||(this._drawControl("mt",t,a,n+i/2-s,o-s),this._drawControl("mb",t,a,n+i/2-s,o+r-s),this._drawControl("mr",t,a,n+i-s,o+r/2-s),this._drawControl("ml",t,a,n-s,o+r/2-s)),this.hasRotatingPoint&&this._drawControl("mtr",t,a,n+i/2-s,o-this.rotatingPointOffset-s),t.restore(),this},_drawControl:function(t,i,r,n,o){if(this.isControlVisible(t)){var s=this.cornerSize;e()||this.transparentCorners||i.clearRect(n,o,s,s),i[r](n,o,s,s)}},isControlVisible:function(t){return this._getControlsVisibility()[t]},setControlVisible:function(t,e){return this._getControlsVisibility()[t]=e,this},setControlsVisibility:function(t){t||(t={});for(var e in t)this.setControlVisible(e,t[e]);return this},_getControlsVisibility:function(){return this._controlsVisibility||(this._controlsVisibility={tl:!0,tr:!0,br:!0,bl:!0,ml:!0,mt:!0,mr:!0,mb:!0,mtr:!0}),this._controlsVisibility}})}(),function(t){function e(t,e){var i=t.origin,r=t.axis1,n=t.axis2,o=t.dimension,s=e.nearest,a=e.center,l=e.farthest;return function(){switch(this.get(i)){case s:return Math.min(this.get(r),this.get(n));case a:return Math.min(this.get(r),this.get(n))+.5*this.get(o);case l:return Math.max(this.get(r),this.get(n))}}}var i=t.fabric||(t.fabric={}),r=i.util.object.extend,n={x1:1,x2:1,y1:1,y2:1},o=i.StaticCanvas.supports("setLineDash");if(i.Line)return void i.warn("fabric.Line is already defined");i.Line=i.util.createClass(i.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,initialize:function(t,e){e=e||{},t||(t=[0,0,0,0]),this.callSuper("initialize",e),this.set("x1",t[0]),this.set("y1",t[1]),this.set("x2",t[2]),this.set("y2",t[3]),this._setWidthHeight(e)},_setWidthHeight:function(t){t||(t={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in t?t.left:this._getLeftToOriginX(),this.top="top"in t?t.top:this._getTopToOriginY()},_set:function(t,e){return this.callSuper("_set",t,e),void 0!==n[t]&&this._setWidthHeight(),this},_getLeftToOriginX:e({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:e({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(t,e){if(t.beginPath(),e){var i=this.getCenterPoint();t.translate(i.x-this.strokeWidth/2,i.y-this.strokeWidth/2)}if(!this.strokeDashArray||this.strokeDashArray&&o){var r=this.calcLinePoints();t.moveTo(r.x1,r.y1),t.lineTo(r.x2,r.y2)}t.lineWidth=this.strokeWidth;var n=t.strokeStyle;t.strokeStyle=this.stroke||t.fillStyle,this.stroke&&this._renderStroke(t),t.strokeStyle=n},_renderDashedStroke:function(t){var e=this.calcLinePoints();t.beginPath(),i.util.drawDashedLine(t,e.x1,e.y1,e.x2,e.y2,this.strokeDashArray),t.closePath()},toObject:function(t){return r(this.callSuper("toObject",t),this.calcLinePoints())},calcLinePoints:function(){var t=this.x1>this.x2?1:-1,e=this.y1>this.y2?1:-1;return{x1:t*this.width*.5,x2:t*this.width*-.5,y1:e*this.height*.5,y2:e*this.height*-.5}},toSVG:function(t){var e=this._createBaseSVGMarkup(),i={x1:this.x1,x2:this.x2,y1:this.y1,y2:this.y2};return this.group&&"path-group"===this.group.type||(i=this.calcLinePoints()),e.push("<line ",'x1="',i.x1,'" y1="',i.y1,'" x2="',i.x2,'" y2="',i.y2,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'"/>\n'),t?t(e.join("")):e.join("")},complexity:function(){return 1}}),i.Line.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),i.Line.fromElement=function(t,e){var n=i.parseAttributes(t,i.Line.ATTRIBUTE_NAMES);return new i.Line([n.x1||0,n.y1||0,n.x2||0,n.y2||0],r(n,e))},i.Line.fromObject=function(t){return new i.Line([t.x1,t.y1,t.x2,t.y2],t)}}(exports),function(t){function e(t){return"radius"in t&&t.radius>=0}var i=t.fabric||(t.fabric={}),r=Math.PI,n=i.util.object.extend;if(i.Circle)return void i.warn("fabric.Circle is already defined.");i.Circle=i.util.createClass(i.Object,{type:"circle",radius:0,startAngle:0,endAngle:2*r,initialize:function(t){t=t||{},this.callSuper("initialize",t),this.set("radius",t.radius||0),this.startAngle=t.startAngle||this.startAngle,this.endAngle=t.endAngle||this.endAngle},_set:function(t,e){return this.callSuper("_set",t,e),"radius"===t&&this.setRadius(e),this},toObject:function(t){return n(this.callSuper("toObject",t),{radius:this.get("radius"),startAngle:this.startAngle,endAngle:this.endAngle})},toSVG:function(t){var e=this._createBaseSVGMarkup(),i=0,n=0,o=(this.endAngle-this.startAngle)%(2*r);if(0===o)this.group&&"path-group"===this.group.type&&(i=this.left+this.radius,n=this.top+this.radius),e.push("<circle ",'cx="'+i+'" cy="'+n+'" ','r="',this.radius,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform()," ",this.getSvgTransformMatrix(),'"/>\n');else{var s=Math.cos(this.startAngle)*this.radius,a=Math.sin(this.startAngle)*this.radius,l=Math.cos(this.endAngle)*this.radius,h=Math.sin(this.endAngle)*this.radius;e.push('<path d="M '+s+" "+a," A "+this.radius+" "+this.radius," 0 ",+(o>r?"1":"0")+" 1"," "+l+" "+h,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform()," ",this.getSvgTransformMatrix(),'"/>\n')}return t?t(e.join("")):e.join("")},_render:function(t,e){t.beginPath(),t.arc(e?this.left+this.radius:0,e?this.top+this.radius:0,this.radius,this.startAngle,this.endAngle,!1),this._renderFill(t),this._renderStroke(t)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(t){this.radius=t,this.set("width",2*t).set("height",2*t)},complexity:function(){return 1}}),i.Circle.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),i.Circle.fromElement=function(t,r){r||(r={});var o=i.parseAttributes(t,i.Circle.ATTRIBUTE_NAMES);if(!e(o))throw Error("value of `r` attribute is required and can not be negative");o.left=o.left||0,o.top=o.top||0;var s=new i.Circle(n(o,r));return s.left-=s.radius,s.top-=s.radius,s},i.Circle.fromObject=function(t){return new i.Circle(t)}}(exports),function(t){var e=t.fabric||(t.fabric={});if(e.Triangle)return void e.warn("fabric.Triangle is already defined");e.Triangle=e.util.createClass(e.Object,{type:"triangle",initialize:function(t){t=t||{},this.callSuper("initialize",t),this.set("width",t.width||100).set("height",t.height||100)},_render:function(t){var e=this.width/2,i=this.height/2;t.beginPath(),t.moveTo(-e,i),t.lineTo(0,-i),t.lineTo(e,i),t.closePath(),this._renderFill(t),this._renderStroke(t)},_renderDashedStroke:function(t){var i=this.width/2,r=this.height/2;t.beginPath(),e.util.drawDashedLine(t,-i,r,0,-r,this.strokeDashArray),e.util.drawDashedLine(t,0,-r,i,r,this.strokeDashArray),e.util.drawDashedLine(t,i,r,-i,r,this.strokeDashArray),t.closePath()},toSVG:function(t){var e=this._createBaseSVGMarkup(),i=this.width/2,r=this.height/2;return e.push("<polygon ",'points="',[-i+" "+r,"0 "+-r,i+" "+r].join(","),'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),'"/>'),t?t(e.join("")):e.join("")},complexity:function(){return 1}}),e.Triangle.fromObject=function(t){return new e.Triangle(t)}}(exports),function(t){var e=t.fabric||(t.fabric={}),i=2*Math.PI,r=e.util.object.extend;if(e.Ellipse)return void e.warn("fabric.Ellipse is already defined.");e.Ellipse=e.util.createClass(e.Object,{type:"ellipse",rx:0,ry:0,initialize:function(t){t=t||{},this.callSuper("initialize",t),this.set("rx",t.rx||0),this.set("ry",t.ry||0)},_set:function(t,e){switch(this.callSuper("_set",t,e),t){case"rx":this.rx=e,this.set("width",2*e);break;case"ry":this.ry=e,this.set("height",2*e)}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(t){return r(this.callSuper("toObject",t),{rx:this.get("rx"),ry:this.get("ry")})},toSVG:function(t){var e=this._createBaseSVGMarkup(),i=0,r=0;return this.group&&"path-group"===this.group.type&&(i=this.left+this.rx,r=this.top+this.ry),e.push("<ellipse ",'cx="',i,'" cy="',r,'" ','rx="',this.rx,'" ry="',this.ry,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'"/>\n'),t?t(e.join("")):e.join("")},_render:function(t,e){t.beginPath(),t.save(),t.transform(1,0,0,this.ry/this.rx,0,0),t.arc(e?this.left+this.rx:0,e?(this.top+this.ry)*this.rx/this.ry:0,this.rx,0,i,!1),t.restore(),this._renderFill(t),this._renderStroke(t)},complexity:function(){return 1}}),e.Ellipse.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),e.Ellipse.fromElement=function(t,i){i||(i={});var n=e.parseAttributes(t,e.Ellipse.ATTRIBUTE_NAMES);n.left=n.left||0,n.top=n.top||0;var o=new e.Ellipse(r(n,i));return o.top-=o.ry,o.left-=o.rx,o},e.Ellipse.fromObject=function(t){return new e.Ellipse(t)}}(exports),function(t){var e=t.fabric||(t.fabric={}),i=e.util.object.extend;if(e.Rect)return void console.warn("fabric.Rect is already defined");var r=e.Object.prototype.stateProperties.concat();r.push("rx","ry","x","y"),e.Rect=e.util.createClass(e.Object,{stateProperties:r,type:"rect",rx:0,ry:0,strokeDashArray:null,initialize:function(t){t=t||{},this.callSuper("initialize",t),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(t,e){if(1===this.width&&1===this.height)return void t.fillRect(0,0,1,1);var i=this.rx?Math.min(this.rx,this.width/2):0,r=this.ry?Math.min(this.ry,this.height/2):0,n=this.width,o=this.height,s=e?this.left:-this.width/2,a=e?this.top:-this.height/2,l=0!==i||0!==r,h=.4477152502;t.beginPath(),t.moveTo(s+i,a),t.lineTo(s+n-i,a),l&&t.bezierCurveTo(s+n-h*i,a,s+n,a+h*r,s+n,a+r),t.lineTo(s+n,a+o-r),l&&t.bezierCurveTo(s+n,a+o-h*r,s+n-h*i,a+o,s+n-i,a+o),t.lineTo(s+i,a+o),l&&t.bezierCurveTo(s+h*i,a+o,s,a+o-h*r,s,a+o-r),t.lineTo(s,a+r),l&&t.bezierCurveTo(s,a+h*r,s+h*i,a,s+i,a),t.closePath(),this._renderFill(t),this._renderStroke(t)},_renderDashedStroke:function(t){var i=-this.width/2,r=-this.height/2,n=this.width,o=this.height;t.beginPath(),e.util.drawDashedLine(t,i,r,i+n,r,this.strokeDashArray),e.util.drawDashedLine(t,i+n,r,i+n,r+o,this.strokeDashArray),e.util.drawDashedLine(t,i+n,r+o,i,r+o,this.strokeDashArray),e.util.drawDashedLine(t,i,r+o,i,r,this.strokeDashArray),t.closePath()},toObject:function(t){var e=i(this.callSuper("toObject",t),{rx:this.get("rx")||0,ry:this.get("ry")||0});return this.includeDefaultValues||this._removeDefaultValues(e),e},toSVG:function(t){var e=this._createBaseSVGMarkup(),i=this.left,r=this.top;return this.group&&"path-group"===this.group.type||(i=-this.width/2,r=-this.height/2),e.push("<rect ",'x="',i,'" y="',r,'" rx="',this.get("rx"),'" ry="',this.get("ry"),'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'"/>\n'),t?t(e.join("")):e.join("")},complexity:function(){return 1}}),e.Rect.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),e.Rect.fromElement=function(t,r){if(!t)return null;r=r||{};var n=e.parseAttributes(t,e.Rect.ATTRIBUTE_NAMES);n.left=n.left||0,n.top=n.top||0;var o=new e.Rect(i(r?e.util.object.clone(r):{},n));return o.visible=o.width>0&&o.height>0,o},e.Rect.fromObject=function(t){return new e.Rect(t)}}(exports),function(t){var e=t.fabric||(t.fabric={});if(e.Polyline)return void e.warn("fabric.Polyline is already defined");e.Polyline=e.util.createClass(e.Object,{type:"polyline",points:null,minX:0,minY:0,initialize:function(t,i){return e.Polygon.prototype.initialize.call(this,t,i)},_calcDimensions:function(){return e.Polygon.prototype._calcDimensions.call(this)},_applyPointOffset:function(){return e.Polygon.prototype._applyPointOffset.call(this)},toObject:function(t){return e.Polygon.prototype.toObject.call(this,t)},toSVG:function(t){return e.Polygon.prototype.toSVG.call(this,t)},_render:function(t){e.Polygon.prototype.commonRender.call(this,t)&&(this._renderFill(t),this._renderStroke(t))},_renderDashedStroke:function(t){var i,r;t.beginPath();for(var n=0,o=this.points.length;o>n;n++)i=this.points[n],r=this.points[n+1]||i,e.util.drawDashedLine(t,i.x,i.y,r.x,r.y,this.strokeDashArray)},complexity:function(){return this.get("points").length}}),e.Polyline.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(),e.Polyline.fromElement=function(t,i){if(!t)return null;i||(i={});var r=e.parsePointsAttribute(t.getAttribute("points")),n=e.parseAttributes(t,e.Polyline.ATTRIBUTE_NAMES);return new e.Polyline(r,e.util.object.extend(n,i))},e.Polyline.fromObject=function(t){return new e.Polyline(t.points,t,!0)}}(exports),function(t){var e=t.fabric||(t.fabric={}),i=e.util.object.extend,r=e.util.array.min,n=e.util.array.max,o=e.util.toFixed;if(e.Polygon)return void e.warn("fabric.Polygon is already defined");e.Polygon=e.util.createClass(e.Object,{type:"polygon",points:null,minX:0,minY:0,initialize:function(t,e){e=e||{},this.points=t||[],this.callSuper("initialize",e),this._calcDimensions(),"top"in e||(this.top=this.minY),"left"in e||(this.left=this.minX)},_calcDimensions:function(){var t=this.points,e=r(t,"x"),i=r(t,"y"),o=n(t,"x"),s=n(t,"y");this.width=o-e||0,this.height=s-i||0,this.minX=e||0,this.minY=i||0},_applyPointOffset:function(){this.points.forEach(function(t){t.x-=this.minX+this.width/2,t.y-=this.minY+this.height/2},this)},toObject:function(t){return i(this.callSuper("toObject",t),{points:this.points.concat()})},toSVG:function(t){for(var e=[],i=this._createBaseSVGMarkup(),r=0,n=this.points.length;n>r;r++)e.push(o(this.points[r].x,2),",",o(this.points[r].y,2)," ");return i.push("<",this.type," ",'points="',e.join(""),'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform()," ",this.getSvgTransformMatrix(),'"/>\n'),t?t(i.join("")):i.join("")},_render:function(t){this.commonRender(t)&&(this._renderFill(t),(this.stroke||this.strokeDashArray)&&(t.closePath(),this._renderStroke(t)))},commonRender:function(t){var e,i=this.points.length;if(!i||isNaN(this.points[i-1].y))return!1;t.beginPath(),this._applyPointOffset&&(this.group&&"path-group"===this.group.type||this._applyPointOffset(),this._applyPointOffset=null),t.moveTo(this.points[0].x,this.points[0].y);for(var r=0;i>r;r++)e=this.points[r],t.lineTo(e.x,e.y);return!0},_renderDashedStroke:function(t){e.Polyline.prototype._renderDashedStroke.call(this,t),t.closePath()},complexity:function(){return this.points.length}}),e.Polygon.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(),e.Polygon.fromElement=function(t,r){if(!t)return null;r||(r={});var n=e.parsePointsAttribute(t.getAttribute("points")),o=e.parseAttributes(t,e.Polygon.ATTRIBUTE_NAMES);return new e.Polygon(n,i(o,r))},e.Polygon.fromObject=function(t){return new e.Polygon(t.points,t,!0)}}(exports),function(t){var e=t.fabric||(t.fabric={}),i=e.util.array.min,r=e.util.array.max,n=e.util.object.extend,o=Object.prototype.toString,s=e.util.drawArc,a={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},l={m:"l",M:"L"};if(e.Path)return void e.warn("fabric.Path is already defined");e.Path=e.util.createClass(e.Object,{type:"path",path:null,minX:0,minY:0,initialize:function(t,e){if(e=e||{},this.setOptions(e),!t)throw Error("`path` argument is required");var i="[object Array]"===o.call(t);(this.path=i?t:t.match&&t.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi))&&(i||(this.path=this._parsePath()),this._setPositionDimensions(),e.sourcePath&&this.setSourcePath(e.sourcePath))},_setPositionDimensions:function(){var t=this._parseDimensions();this.minX=t.left,this.minY=t.top,this.width=t.width,this.height=t.height,t.left+="center"===this.originX?this.width/2:"right"===this.originX?this.width:0,t.top+="center"===this.originY?this.height/2:"bottom"===this.originY?this.height:0,this.top=this.top||t.top,this.left=this.left||t.left,this.pathOffset=this.pathOffset||{x:this.minX+this.width/2,y:this.minY+this.height/2}},_render:function(t){var e,i,r,n=null,o=0,a=0,l=0,h=0,c=0,u=0,f=-this.pathOffset.x,d=-this.pathOffset.y;this.group&&"path-group"===this.group.type&&(f=0,d=0),t.beginPath();for(var p=0,g=this.path.length;g>p;++p){switch(e=this.path[p],e[0]){case"l":l+=e[1],h+=e[2],t.lineTo(l+f,h+d);break;case"L":l=e[1],h=e[2],t.lineTo(l+f,h+d);break;case"h":l+=e[1],t.lineTo(l+f,h+d);break;case"H":l=e[1],t.lineTo(l+f,h+d);break;case"v":h+=e[1],t.lineTo(l+f,h+d);break;case"V":h=e[1],t.lineTo(l+f,h+d);break;case"m":l+=e[1],h+=e[2],o=l,a=h,t.moveTo(l+f,h+d);break;case"M":l=e[1],h=e[2],o=l,a=h,t.moveTo(l+f,h+d);break;case"c":i=l+e[5],r=h+e[6],c=l+e[3],u=h+e[4],t.bezierCurveTo(l+e[1]+f,h+e[2]+d,c+f,u+d,i+f,r+d),l=i,h=r;break;case"C":l=e[5],h=e[6],c=e[3],u=e[4],t.bezierCurveTo(e[1]+f,e[2]+d,c+f,u+d,l+f,h+d);break;case"s":i=l+e[3],r=h+e[4],null===n[0].match(/[CcSs]/)?(c=l,u=h):(c=2*l-c,u=2*h-u),t.bezierCurveTo(c+f,u+d,l+e[1]+f,h+e[2]+d,i+f,r+d),c=l+e[1],u=h+e[2],l=i,h=r;break;case"S":i=e[3],r=e[4],null===n[0].match(/[CcSs]/)?(c=l,u=h):(c=2*l-c,u=2*h-u),t.bezierCurveTo(c+f,u+d,e[1]+f,e[2]+d,i+f,r+d),l=i,h=r,c=e[1],u=e[2];break;case"q":i=l+e[3],r=h+e[4],c=l+e[1],u=h+e[2],t.quadraticCurveTo(c+f,u+d,i+f,r+d),l=i,h=r;break;case"Q":i=e[3],r=e[4],t.quadraticCurveTo(e[1]+f,e[2]+d,i+f,r+d),l=i,h=r,c=e[1],u=e[2];break;case"t":i=l+e[1],r=h+e[2],null===n[0].match(/[QqTt]/)?(c=l,u=h):(c=2*l-c,u=2*h-u),t.quadraticCurveTo(c+f,u+d,i+f,r+d),l=i,h=r;break;case"T":i=e[1],r=e[2],null===n[0].match(/[QqTt]/)?(c=l,u=h):(c=2*l-c,u=2*h-u),t.quadraticCurveTo(c+f,u+d,i+f,r+d),l=i,h=r;break;case"a":s(t,l+f,h+d,[e[1],e[2],e[3],e[4],e[5],e[6]+l+f,e[7]+h+d]),l+=e[6],h+=e[7];break;case"A":s(t,l+f,h+d,[e[1],e[2],e[3],e[4],e[5],e[6]+f,e[7]+d]),l=e[6],h=e[7];break;case"z":case"Z":l=o,h=a,t.closePath()}n=e}this._renderFill(t),this._renderStroke(t)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(t){var e=n(this.callSuper("toObject",t),{path:this.path.map(function(t){return t.slice()}),pathOffset:this.pathOffset});return this.sourcePath&&(e.sourcePath=this.sourcePath),this.transformMatrix&&(e.transformMatrix=this.transformMatrix),e},toDatalessObject:function(t){var e=this.toObject(t);return this.sourcePath&&(e.path=this.sourcePath),delete e.sourcePath,e},toSVG:function(t){for(var e=[],i=this._createBaseSVGMarkup(),r="",n=0,o=this.path.length;o>n;n++)e.push(this.path[n].join(" "));var s=e.join(" ");return this.group&&"path-group"===this.group.type||(r=" translate("+-this.pathOffset.x+", "+-this.pathOffset.y+") "),i.push("<path ",'d="',s,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),r,this.getSvgTransformMatrix(),'" stroke-linecap="round" ',"/>\n"),t?t(i.join("")):i.join("")},complexity:function(){return this.path.length},_parsePath:function(){for(var t,e,i,r,n,o=[],s=[],h=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi,c=0,u=this.path.length;u>c;c++){for(t=this.path[c],r=t.slice(1).trim(),s.length=0;i=h.exec(r);)s.push(i[0]);n=[t.charAt(0)];for(var f=0,d=s.length;d>f;f++)e=parseFloat(s[f]),isNaN(e)||n.push(e);var p=n[0],g=a[p.toLowerCase()],v=l[p]||p;if(n.length-1>g)for(var m=1,y=n.length;y>m;m+=g)o.push([p].concat(n.slice(m,m+g))),p=v;else o.push(n)}return o},_parseDimensions:function(){for(var t,n,o,s,a=[],l=[],h=null,c=0,u=0,f=0,d=0,p=0,g=0,v=0,m=this.path.length;m>v;++v){switch(t=this.path[v],t[0]){case"l":f+=t[1],d+=t[2],s=[];break;case"L":f=t[1],d=t[2],s=[];break;case"h":f+=t[1],s=[];break;case"H":f=t[1],s=[];break;case"v":d+=t[1],s=[];break;case"V":d=t[1],s=[];break;case"m":f+=t[1],d+=t[2],c=f,u=d,s=[];break;case"M":f=t[1],d=t[2],c=f,u=d,s=[];break;case"c":n=f+t[5],o=d+t[6],p=f+t[3],g=d+t[4],s=e.util.getBoundsOfCurve(f,d,f+t[1],d+t[2],p,g,n,o),f=n,d=o;break;case"C":f=t[5],d=t[6],p=t[3],g=t[4],s=e.util.getBoundsOfCurve(f,d,t[1],t[2],p,g,f,d);break;case"s":n=f+t[3],o=d+t[4],null===h[0].match(/[CcSs]/)?(p=f,g=d):(p=2*f-p,g=2*d-g),s=e.util.getBoundsOfCurve(f,d,p,g,f+t[1],d+t[2],n,o),p=f+t[1],g=d+t[2],f=n,d=o;break;case"S":n=t[3],o=t[4],null===h[0].match(/[CcSs]/)?(p=f,g=d):(p=2*f-p,g=2*d-g),s=e.util.getBoundsOfCurve(f,d,p,g,t[1],t[2],n,o),f=n,d=o,p=t[1],g=t[2];break;case"q":n=f+t[3],o=d+t[4],p=f+t[1],g=d+t[2],s=e.util.getBoundsOfCurve(f,d,p,g,p,g,n,o),f=n,d=o;break;case"Q":p=t[1],g=t[2],s=e.util.getBoundsOfCurve(f,d,p,g,p,g,t[3],t[4]),f=t[3],d=t[4];break;case"t":n=f+t[1],o=d+t[2],null===h[0].match(/[QqTt]/)?(p=f,g=d):(p=2*f-p,g=2*d-g),s=e.util.getBoundsOfCurve(f,d,p,g,p,g,n,o),f=n,d=o;break;case"T":n=t[1],o=t[2],null===h[0].match(/[QqTt]/)?(p=f,g=d):(p=2*f-p,g=2*d-g),s=e.util.getBoundsOfCurve(f,d,p,g,p,g,n,o),f=n,d=o;break;case"a":s=e.util.getBoundsOfArc(f,d,t[1],t[2],t[3],t[4],t[5],t[6]+f,t[7]+d),f+=t[6],d+=t[7];break;case"A":s=e.util.getBoundsOfArc(f,d,t[1],t[2],t[3],t[4],t[5],t[6],t[7]),f=t[6],d=t[7];break;case"z":case"Z":f=c,d=u}h=t,s.forEach(function(t){a.push(t.x),l.push(t.y)}),a.push(f),l.push(d)}var y=i(a),b=i(l);return{left:y,top:b,width:r(a)-y,height:r(l)-b}}}),e.Path.fromObject=function(t,i){"string"==typeof t.path?e.loadSVGFromURL(t.path,function(r){var n=r[0],o=t.path;delete t.path,e.util.object.extend(n,t),n.setSourcePath(o),i(n)}):i(new e.Path(t.path,t))},e.Path.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(["d"]),e.Path.fromElement=function(t,i,r){var o=e.parseAttributes(t,e.Path.ATTRIBUTE_NAMES);i&&i(new e.Path(o.d,n(o,r)))},e.Path.async=!0}(exports),function(t){var e=t.fabric||(t.fabric={}),i=e.util.object.extend,r=e.util.array.invoke,n=e.Object.prototype.toObject;if(e.PathGroup)return void e.warn("fabric.PathGroup is already defined");e.PathGroup=e.util.createClass(e.Path,{type:"path-group",fill:"",initialize:function(t,e){e=e||{},this.paths=t||[];for(var i=this.paths.length;i--;)this.paths[i].group=this;e.toBeParsed&&(this.parseDimensionsFromPaths(e),delete e.toBeParsed),this.setOptions(e),this.setCoords(),e.sourcePath&&this.setSourcePath(e.sourcePath)},parseDimensionsFromPaths:function(t){for(var i,r,n,o,s,a=[],l=[],h=this.transformMatrix,c=this.paths.length;c--;){n=this.paths[c],o=n.height+n.strokeWidth,s=n.width+n.strokeWidth,i=[{x:n.left,y:n.top},{x:n.left+s,y:n.top},{x:n.left,y:n.top+o},{x:n.left+s,y:n.top+o}];for(var u=0;i.length>u;u++)r=i[u],h&&(r=e.util.transformPoint(r,h,!1)),a.push(r.x),l.push(r.y)}t.width=Math.max.apply(null,a),t.height=Math.max.apply(null,l)},render:function(t){if(this.visible){t.save(),this.transformMatrix&&t.transform.apply(t,this.transformMatrix),this.transform(t),this._setShadow(t),this.clipTo&&e.util.clipContext(this,t),t.translate(-this.width/2,-this.height/2);for(var i=0,r=this.paths.length;r>i;++i)this.paths[i].render(t,!0);this.clipTo&&t.restore(),this._removeShadow(t),t.restore()}},_set:function(t,e){if("fill"===t&&e&&this.isSameColor())for(var i=this.paths.length;i--;)this.paths[i]._set(t,e);return this.callSuper("_set",t,e)},toObject:function(t){var e=i(n.call(this,t),{paths:r(this.getObjects(),"toObject",t)});return this.sourcePath&&(e.sourcePath=this.sourcePath),e},toDatalessObject:function(t){var e=this.toObject(t);return this.sourcePath&&(e.paths=this.sourcePath),e},toSVG:function(t){for(var e=this.getObjects(),i=this.getPointByOrigin("left","top"),r="translate("+i.x+" "+i.y+")",n=["<g ",'style="',this.getSvgStyles(),'" ','transform="',this.getSvgTransformMatrix(),r,this.getSvgTransform(),'" ',">\n"],o=0,s=e.length;s>o;o++)n.push(e[o].toSVG(t));return n.push("</g>\n"),t?t(n.join("")):n.join("")},toString:function(){return"#<fabric.PathGroup ("+this.complexity()+"): { top: "+this.top+", left: "+this.left+" }>"},isSameColor:function(){var t=(this.getObjects()[0].get("fill")||"").toLowerCase();return this.getObjects().every(function(e){return(e.get("fill")||"").toLowerCase()===t})},complexity:function(){return this.paths.reduce(function(t,e){return t+(e&&e.complexity?e.complexity():0)},0)},getObjects:function(){return this.paths}}),e.PathGroup.fromObject=function(t,i){"string"==typeof t.paths?e.loadSVGFromURL(t.paths,function(r){var n=t.paths;delete t.paths;var o=e.util.groupSVGElements(r,t,n);i(o)}):e.util.enlivenObjects(t.paths,function(r){delete t.paths,i(new e.PathGroup(r,t))})},e.PathGroup.async=!0}(exports),function(t){var e=t.fabric||(t.fabric={}),i=e.util.object.extend,r=e.util.array.min,n=e.util.array.max,o=e.util.array.invoke;if(!e.Group){var s={lockMovementX:!0,lockMovementY:!0,lockRotation:!0,lockScalingX:!0,lockScalingY:!0,lockUniScaling:!0};e.Group=e.util.createClass(e.Object,e.Collection,{type:"group",initialize:function(t,e){e=e||{},this._objects=t||[];for(var i=this._objects.length;i--;)this._objects[i].group=this;this.originalState={},this.callSuper("initialize"),e.originX&&(this.originX=e.originX),e.originY&&(this.originY=e.originY),this._calcBounds(),this._updateObjectsCoords(),this.callSuper("initialize",e),this.setCoords(),this.saveCoords()},_updateObjectsCoords:function(){this.forEachObject(this._updateObjectCoords,this)},_updateObjectCoords:function(t){var e=t.getLeft(),i=t.getTop(),r=this.getCenterPoint();t.set({originalLeft:e,originalTop:i,left:e-r.x,top:i-r.y}),t.setCoords(),t.__origHasControls=t.hasControls,t.hasControls=!1},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(t){return this._restoreObjectsState(),t&&(this._objects.push(t),t.group=this),this.forEachObject(this._setObjectActive,this),this._calcBounds(),this._updateObjectsCoords(),this},_setObjectActive:function(t){t.set("active",!0),t.group=this},removeWithUpdate:function(t){return this._moveFlippedObject(t),this._restoreObjectsState(),this.forEachObject(this._setObjectActive,this),this.remove(t),this._calcBounds(),this._updateObjectsCoords(),this},_onObjectAdded:function(t){t.group=this},_onObjectRemoved:function(t){delete t.group,t.set("active",!1)},delegatedProperties:{fill:!0,opacity:!0,fontFamily:!0,fontWeight:!0,fontSize:!0,fontStyle:!0,lineHeight:!0,textDecoration:!0,textAlign:!0,backgroundColor:!0},_set:function(t,e){if(t in this.delegatedProperties)for(var i=this._objects.length;i--;)this._objects[i].set(t,e);this.callSuper("_set",t,e)},toObject:function(t){return i(this.callSuper("toObject",t),{objects:o(this._objects,"toObject",t)})},render:function(t){if(this.visible){t.save(),this.clipTo&&e.util.clipContext(this,t),this.transform(t);for(var i=0,r=this._objects.length;r>i;i++)this._renderObject(this._objects[i],t);this.clipTo&&t.restore(),t.restore()}},_renderControls:function(t,e){this.callSuper("_renderControls",t,e);for(var i=0,r=this._objects.length;r>i;i++)this._objects[i]._renderControls(t)},_renderObject:function(t,e){var i=t.hasRotatingPoint;t.visible&&(t.hasRotatingPoint=!1,t.render(e),t.hasRotatingPoint=i)},_restoreObjectsState:function(){return this._objects.forEach(this._restoreObjectState,this),this},realizeTransform:function(t){return this._moveFlippedObject(t),this._setObjectPosition(t),t},_moveFlippedObject:function(t){var e=t.get("originX"),i=t.get("originY"),r=t.getCenterPoint();t.set({originX:"center",originY:"center",left:r.x,top:r.y}),this._toggleFlipping(t);var n=t.getPointByOrigin(e,i);return t.set({originX:e,originY:i,left:n.x,top:n.y}),this},_toggleFlipping:function(t){this.flipX&&(t.toggle("flipX"),t.set("left",-t.get("left")),t.setAngle(-t.getAngle())),this.flipY&&(t.toggle("flipY"),t.set("top",-t.get("top")),t.setAngle(-t.getAngle()))},_restoreObjectState:function(t){return this._setObjectPosition(t),t.setCoords(),t.hasControls=t.__origHasControls,delete t.__origHasControls,t.set("active",!1),t.setCoords(),delete t.group,this},_setObjectPosition:function(t){var e=this.getCenterPoint(),i=this._getRotatedLeftTop(t);t.set({angle:t.getAngle()+this.getAngle(),left:e.x+i.left,top:e.y+i.top,scaleX:t.get("scaleX")*this.get("scaleX"),scaleY:t.get("scaleY")*this.get("scaleY")})},_getRotatedLeftTop:function(t){var e=this.getAngle()*(Math.PI/180);return{left:-Math.sin(e)*t.getTop()*this.get("scaleY")+Math.cos(e)*t.getLeft()*this.get("scaleX"),top:Math.cos(e)*t.getTop()*this.get("scaleY")+Math.sin(e)*t.getLeft()*this.get("scaleX")}},destroy:function(){return this._objects.forEach(this._moveFlippedObject,this),this._restoreObjectsState()},saveCoords:function(){return this._originalLeft=this.get("left"),this._originalTop=this.get("top"),this},hasMoved:function(){return this._originalLeft!==this.get("left")||this._originalTop!==this.get("top")},setObjectsCoords:function(){return this.forEachObject(function(t){t.setCoords()}),this},_calcBounds:function(t){for(var e,i,r=[],n=[],o=["tr","br","bl","tl"],s=0,a=this._objects.length;a>s;++s){e=this._objects[s],e.setCoords();for(var l=0;4>l;l++)i=o[l],r.push(e.oCoords[i].x),n.push(e.oCoords[i].y)}this.set(this._getBounds(r,n,t))},_getBounds:function(t,i,o){var s=e.util.invertTransform(this.getViewportTransform()),a=e.util.transformPoint(new e.Point(r(t),r(i)),s),l=e.util.transformPoint(new e.Point(n(t),n(i)),s),h={width:l.x-a.x||0,height:l.y-a.y||0};return o||(h.left=a.x||0,h.top=a.y||0,"center"===this.originX&&(h.left+=h.width/2),"right"===this.originX&&(h.left+=h.width),"center"===this.originY&&(h.top+=h.height/2),"bottom"===this.originY&&(h.top+=h.height)),h},toSVG:function(t){for(var e=["<g ",'transform="',this.getSvgTransform(),'">\n'],i=0,r=this._objects.length;r>i;i++)e.push(this._objects[i].toSVG(t));return e.push("</g>\n"),t?t(e.join("")):e.join("")},get:function(t){if(t in s){if(this[t])return this[t];for(var e=0,i=this._objects.length;i>e;e++)if(this._objects[e][t])return!0;return!1}return t in this.delegatedProperties?this._objects[0]&&this._objects[0].get(t):this[t]}}),e.Group.fromObject=function(t,i){e.util.enlivenObjects(t.objects,function(r){delete t.objects,i&&i(new e.Group(r,t))})},e.Group.async=!0}}(exports),function(t){var e=fabric.util.object.extend;if(t.fabric||(t.fabric={}),t.fabric.Image)return void fabric.warn("fabric.Image is already defined.");fabric.Image=fabric.util.createClass(fabric.Object,{type:"image",crossOrigin:"",alignX:"none",alignY:"none",meetOrSlice:"meet",_lastScaleX:1,_lastScaleY:1,initialize:function(t,e){e||(e={}),this.filters=[],this.resizeFilters=[],this.callSuper("initialize",e),this._initElement(t,e),this._initConfig(e),e.filters&&(this.filters=e.filters,this.applyFilters())},getElement:function(){return this._element},setElement:function(t,e,i){return this._element=t,this._originalElement=t,this._initConfig(i),0!==this.filters.length?this.applyFilters(e):e&&e(),this},setCrossOrigin:function(t){return this.crossOrigin=t,this._element.crossOrigin=t,this},getOriginalSize:function(){var t=this.getElement();return{width:t.width,height:t.height}},_stroke:function(t){t.save(),this._setStrokeStyles(t),t.beginPath(),t.strokeRect(-this.width/2,-this.height/2,this.width,this.height),t.closePath(),t.restore()},_renderDashedStroke:function(t){var e=-this.width/2,i=-this.height/2,r=this.width,n=this.height;t.save(),this._setStrokeStyles(t),t.beginPath(),fabric.util.drawDashedLine(t,e,i,e+r,i,this.strokeDashArray),fabric.util.drawDashedLine(t,e+r,i,e+r,i+n,this.strokeDashArray),fabric.util.drawDashedLine(t,e+r,i+n,e,i+n,this.strokeDashArray),fabric.util.drawDashedLine(t,e,i+n,e,i,this.strokeDashArray),t.closePath(),t.restore()},toObject:function(t){return e(this.callSuper("toObject",t),{src:this._originalElement.src||this._originalElement._src,filters:this.filters.map(function(t){return t&&t.toObject()}),crossOrigin:this.crossOrigin,alignX:this.alignX,alignY:this.alignY,meetOrSlice:this.meetOrSlice})},toSVG:function(t){var e=[],i=-this.width/2,r=-this.height/2,n="none";if(this.group&&"path-group"===this.group.type&&(i=this.left,r=this.top),"none"!==this.alignX&&"none"!==this.alignY&&(n="x"+this.alignX+"Y"+this.alignY+" "+this.meetOrSlice),e.push('<g transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'">\n','<image xlink:href="',this.getSvgSrc(),'" x="',i,'" y="',r,'" style="',this.getSvgStyles(),'" width="',this.width,'" height="',this.height,'" preserveAspectRatio="',n,'"',"></image>\n"),this.stroke||this.strokeDashArray){var o=this.fill;this.fill=null,e.push("<rect ",'x="',i,'" y="',r,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'"/>\n'),this.fill=o}return e.push("</g>\n"),t?t(e.join("")):e.join("")},getSrc:function(){if(this.getElement())return this.getElement().src||this.getElement()._src},setSrc:function(t,e,i){fabric.util.loadImage(t,function(t){return this.setElement(t,e,i)},this,i&&i.crossOrigin)},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},clone:function(t,e){this.constructor.fromObject(this.toObject(e),t)},applyFilters:function(t,e,i,r){if(e=e||this.filters,i=i||this._originalElement){var n=i,o=fabric.util.createCanvasElement(),s=fabric.util.createImage(),a=this;return o.width=n.width,(o.height=n.height,o.getContext("2d").drawImage(n,0,0,n.width,n.height),0===e.length)?(this._element=i,t&&t(),o):(e.forEach(function(t){t&&t.applyTo(o,t.scaleX||a.scaleX,t.scaleY||a.scaleY),!r&&t&&"Resize"===t.type&&(a.width*=t.scaleX,a.height*=t.scaleY)}),s.width=o.width,s.height=o.height,fabric.isLikelyNode?(s.src=o.toBuffer(void 0,fabric.Image.pngCompression),a._element=s,!r&&(a._filteredEl=s),t&&t()):(s.onload=function(){a._element=s,!r&&(a._filteredEl=s),t&&t(),s.onload=o=n=null},s.src=o.toDataURL("image/png")),o)}},_render:function(t,e){var i,r,n,o=this._findMargins();i=e?this.left:-this.width/2,r=e?this.top:-this.height/2,"slice"===this.meetOrSlice&&(t.beginPath(),t.rect(i,r,this.width,this.height),t.clip()),!1===this.isMoving&&this.resizeFilters.length&&this._needsResize()?(this._lastScaleX=this.scaleX,this._lastScaleY=this.scaleY,n=this.applyFilters(null,this.resizeFilters,this._filteredEl||this._originalElement,!0)):n=this._element,n&&t.drawImage(n,i+o.marginX,r+o.marginY,o.width,o.height),this._renderStroke(t)},_needsResize:function(){return this.scaleX!==this._lastScaleX||this.scaleY!==this._lastScaleY},_findMargins:function(){var t,e,i=this.width,r=this.height,n=0,o=0;return"none"===this.alignX&&"none"===this.alignY||(t=[this.width/this._element.width,this.height/this._element.height],e="meet"===this.meetOrSlice?Math.min.apply(null,t):Math.max.apply(null,t),i=this._element.width*e,r=this._element.height*e,"Mid"===this.alignX&&(n=(this.width-i)/2),"Max"===this.alignX&&(n=this.width-i),"Mid"===this.alignY&&(o=(this.height-r)/2),"Max"===this.alignY&&(o=this.height-r)),{width:i,height:r,marginX:n,marginY:o}},_resetWidthHeight:function(){var t=this.getElement();this.set("width",t.width),this.set("height",t.height)},_initElement:function(t){this.setElement(fabric.util.getById(t)),fabric.util.addClass(this.getElement(),fabric.Image.CSS_CANVAS)},_initConfig:function(t){t||(t={}),this.setOptions(t),this._setWidthHeight(t),this._element&&this.crossOrigin&&(this._element.crossOrigin=this.crossOrigin)},_initFilters:function(t,e){t.filters&&t.filters.length?fabric.util.enlivenObjects(t.filters,function(t){e&&e(t)},"fabric.Image.filters"):e&&e()},_setWidthHeight:function(t){this.width="width"in t?t.width:this.getElement()?this.getElement().width||0:0,this.height="height"in t?t.height:this.getElement()?this.getElement().height||0:0},complexity:function(){return 1}}),fabric.Image.CSS_CANVAS="canvas-img",fabric.Image.prototype.getSvgSrc=fabric.Image.prototype.getSrc,fabric.Image.fromObject=function(t,e){fabric.util.loadImage(t.src,function(i){fabric.Image.prototype._initFilters.call(t,t,function(r){t.filters=r||[];var n=new fabric.Image(i,t);e&&e(n)})},null,t.crossOrigin)},fabric.Image.fromURL=function(t,e,i){fabric.util.loadImage(t,function(t){e&&e(new fabric.Image(t,i))},null,i&&i.crossOrigin)},fabric.Image.ATTRIBUTE_NAMES=fabric.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href".split(" ")),fabric.Image.fromElement=function(t,i,r){var n,o,s,a=fabric.parseAttributes(t,fabric.Image.ATTRIBUTE_NAMES),l="xMidYMid",h="meet";a.preserveAspectRatio&&(s=a.preserveAspectRatio.split(" ")),s&&s.length&&(h=s.pop(),"meet"!==h&&"slice"!==h?(l=h,h="meet"):s.length&&(l=s.pop())),n="none"!==l?l.slice(1,4):"none",o="none"!==l?l.slice(5,8):"none",a.alignX=n,a.alignY=o,a.meetOrSlice=h,fabric.Image.fromURL(a["xlink:href"],i,e(r?fabric.util.object.clone(r):{},a))},fabric.Image.async=!0,fabric.Image.pngCompression=1}(exports),fabric.Image.filters=fabric.Image.filters||{},fabric.Image.filters.BaseFilter=fabric.util.createClass({type:"BaseFilter",initialize:function(t){t&&this.setOptions(t)},setOptions:function(t){for(var e in t)this[e]=t[e]},toObject:function(){return{type:this.type}},toJSON:function(){return this.toObject()}}),function(t){var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Image.filters.Brightness=e.util.createClass(e.Image.filters.BaseFilter,{type:"Brightness",initialize:function(t){t=t||{},this.brightness=t.brightness||0},applyTo:function(t){for(var e=t.getContext("2d"),i=e.getImageData(0,0,t.width,t.height),r=i.data,n=this.brightness,o=0,s=r.length;s>o;o+=4)r[o]+=n,r[o+1]+=n,r[o+2]+=n;e.putImageData(i,0,0)},toObject:function(){return i(this.callSuper("toObject"),{brightness:this.brightness})}}),e.Image.filters.Brightness.fromObject=function(t){return new e.Image.filters.Brightness(t)}}(exports),function(t){var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Image.filters.Convolute=e.util.createClass(e.Image.filters.BaseFilter,{type:"Convolute",initialize:function(t){t=t||{},this.opaque=t.opaque,this.matrix=t.matrix||[0,0,0,0,1,0,0,0,0],this.tmpCtx=e.util.createCanvasElement().getContext("2d")},_createImageData:function(t,e){return this.tmpCtx.createImageData(t,e)},applyTo:function(t){for(var e=this.matrix,i=t.getContext("2d"),r=i.getImageData(0,0,t.width,t.height),n=Math.round(Math.sqrt(e.length)),o=Math.floor(n/2),s=r.data,a=r.width,l=r.height,h=a,c=l,u=this._createImageData(h,c),f=u.data,d=this.opaque?1:0,p=0;c>p;p++)for(var g=0;h>g;g++){for(var v=p,m=g,y=4*(p*h+g),b=0,_=0,x=0,w=0,L=0;n>L;L++)for(var C=0;n>C;C++){var k=v+L-o,T=m+C-o;if(!(0>k||k>l||0>T||T>a)){var O=4*(k*a+T),E=e[L*n+C];b+=s[O]*E,_+=s[O+1]*E,x+=s[O+2]*E,w+=s[O+3]*E}}f[y]=b,f[y+1]=_,f[y+2]=x,f[y+3]=w+d*(255-w)}i.putImageData(u,0,0)},toObject:function(){return i(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),e.Image.filters.Convolute.fromObject=function(t){return new e.Image.filters.Convolute(t)}}(exports),function(t){var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Image.filters.GradientTransparency=e.util.createClass(e.Image.filters.BaseFilter,{type:"GradientTransparency",initialize:function(t){t=t||{},this.threshold=t.threshold||100},applyTo:function(t){for(var e=t.getContext("2d"),i=e.getImageData(0,0,t.width,t.height),r=i.data,n=this.threshold,o=r.length,s=0,a=r.length;a>s;s+=4)r[s+3]=n+255*(o-s)/o;e.putImageData(i,0,0)},toObject:function(){return i(this.callSuper("toObject"),{threshold:this.threshold})}}),e.Image.filters.GradientTransparency.fromObject=function(t){return new e.Image.filters.GradientTransparency(t)}}(exports),function(t){var e=t.fabric||(t.fabric={});e.Image.filters.Grayscale=e.util.createClass(e.Image.filters.BaseFilter,{type:"Grayscale",applyTo:function(t){for(var e,i=t.getContext("2d"),r=i.getImageData(0,0,t.width,t.height),n=r.data,o=r.width*r.height*4,s=0;o>s;)e=(n[s]+n[s+1]+n[s+2])/3,n[s]=e,n[s+1]=e,n[s+2]=e,s+=4;i.putImageData(r,0,0)}}),e.Image.filters.Grayscale.fromObject=function(){return new e.Image.filters.Grayscale}}(exports),function(t){var e=t.fabric||(t.fabric={});e.Image.filters.Invert=e.util.createClass(e.Image.filters.BaseFilter,{type:"Invert",applyTo:function(t){var e,i=t.getContext("2d"),r=i.getImageData(0,0,t.width,t.height),n=r.data,o=n.length;for(e=0;o>e;e+=4)n[e]=255-n[e],n[e+1]=255-n[e+1],n[e+2]=255-n[e+2];i.putImageData(r,0,0)}}),e.Image.filters.Invert.fromObject=function(){return new e.Image.filters.Invert}}(exports),function(t){var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Image.filters.Mask=e.util.createClass(e.Image.filters.BaseFilter,{type:"Mask",initialize:function(t){t=t||{},this.mask=t.mask,this.channel=[0,1,2,3].indexOf(t.channel)>-1?t.channel:0},applyTo:function(t){if(this.mask){var i,r=t.getContext("2d"),n=r.getImageData(0,0,t.width,t.height),o=n.data,s=this.mask.getElement(),a=e.util.createCanvasElement(),l=this.channel,h=n.width*n.height*4;a.width=s.width,a.height=s.height,a.getContext("2d").drawImage(s,0,0,s.width,s.height);var c=a.getContext("2d").getImageData(0,0,s.width,s.height),u=c.data;for(i=0;h>i;i+=4)o[i+3]=u[i+l];r.putImageData(n,0,0)}},toObject:function(){return i(this.callSuper("toObject"),{mask:this.mask.toObject(),channel:this.channel})}}),e.Image.filters.Mask.fromObject=function(t,i){e.util.loadImage(t.mask.src,function(r){t.mask=new e.Image(r,t.mask),i&&i(new e.Image.filters.Mask(t))})},e.Image.filters.Mask.async=!0}(exports),function(t){var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Image.filters.Noise=e.util.createClass(e.Image.filters.BaseFilter,{type:"Noise",initialize:function(t){t=t||{},this.noise=t.noise||0},applyTo:function(t){for(var e,i=t.getContext("2d"),r=i.getImageData(0,0,t.width,t.height),n=r.data,o=this.noise,s=0,a=n.length;a>s;s+=4)e=(.5-Math.random())*o,n[s]+=e,n[s+1]+=e,n[s+2]+=e;i.putImageData(r,0,0)},toObject:function(){return i(this.callSuper("toObject"),{noise:this.noise})}}),e.Image.filters.Noise.fromObject=function(t){return new e.Image.filters.Noise(t)}}(exports),function(t){var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Image.filters.Pixelate=e.util.createClass(e.Image.filters.BaseFilter,{type:"Pixelate",initialize:function(t){t=t||{},this.blocksize=t.blocksize||4},applyTo:function(t){var e,i,r,n,o,s,a,l=t.getContext("2d"),h=l.getImageData(0,0,t.width,t.height),c=h.data,u=h.height,f=h.width;for(i=0;u>i;i+=this.blocksize)for(r=0;f>r;r+=this.blocksize){e=4*i*f+4*r,n=c[e],o=c[e+1],s=c[e+2],a=c[e+3];for(var d=i,p=i+this.blocksize;p>d;d++)for(var g=r,v=r+this.blocksize;v>g;g++)e=4*d*f+4*g,c[e]=n,c[e+1]=o,c[e+2]=s,c[e+3]=a}l.putImageData(h,0,0)},toObject:function(){return i(this.callSuper("toObject"),{blocksize:this.blocksize})}}),e.Image.filters.Pixelate.fromObject=function(t){return new e.Image.filters.Pixelate(t)}}(exports),function(t){var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Image.filters.RemoveWhite=e.util.createClass(e.Image.filters.BaseFilter,{type:"RemoveWhite",initialize:function(t){t=t||{},this.threshold=t.threshold||30,this.distance=t.distance||20},applyTo:function(t){for(var e,i,r,n=t.getContext("2d"),o=n.getImageData(0,0,t.width,t.height),s=o.data,a=this.threshold,l=this.distance,h=255-a,c=Math.abs,u=0,f=s.length;f>u;u+=4)e=s[u],i=s[u+1],r=s[u+2],e>h&&i>h&&r>h&&c(e-i)<l&&c(e-r)<l&&c(i-r)<l&&(s[u+3]=1);n.putImageData(o,0,0)},toObject:function(){return i(this.callSuper("toObject"),{threshold:this.threshold,distance:this.distance})}}),e.Image.filters.RemoveWhite.fromObject=function(t){return new e.Image.filters.RemoveWhite(t)}}(exports),function(t){var e=t.fabric||(t.fabric={});e.Image.filters.Sepia=e.util.createClass(e.Image.filters.BaseFilter,{type:"Sepia",applyTo:function(t){var e,i,r=t.getContext("2d"),n=r.getImageData(0,0,t.width,t.height),o=n.data,s=o.length;for(e=0;s>e;e+=4)i=.3*o[e]+.59*o[e+1]+.11*o[e+2],o[e]=i+100,o[e+1]=i+50,o[e+2]=i+255;r.putImageData(n,0,0)}}),e.Image.filters.Sepia.fromObject=function(){return new e.Image.filters.Sepia}}(exports),function(t){var e=t.fabric||(t.fabric={});e.Image.filters.Sepia2=e.util.createClass(e.Image.filters.BaseFilter,{type:"Sepia2",applyTo:function(t){var e,i,r,n,o=t.getContext("2d"),s=o.getImageData(0,0,t.width,t.height),a=s.data,l=a.length;for(e=0;l>e;e+=4)i=a[e],r=a[e+1],n=a[e+2],a[e]=(.393*i+.769*r+.189*n)/1.351,a[e+1]=(.349*i+.686*r+.168*n)/1.203,a[e+2]=(.272*i+.534*r+.131*n)/2.14;o.putImageData(s,0,0)}}),e.Image.filters.Sepia2.fromObject=function(){return new e.Image.filters.Sepia2}}(exports),function(t){var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Image.filters.Tint=e.util.createClass(e.Image.filters.BaseFilter,{type:"Tint",initialize:function(t){t=t||{},this.color=t.color||"#000000",this.opacity=void 0!==t.opacity?t.opacity:new e.Color(this.color).getAlpha()},applyTo:function(t){var i,r,n,o,s,a,l,h,c,u=t.getContext("2d"),f=u.getImageData(0,0,t.width,t.height),d=f.data,p=d.length;for(c=new e.Color(this.color).getSource(),r=c[0]*this.opacity,n=c[1]*this.opacity,o=c[2]*this.opacity,h=1-this.opacity,i=0;p>i;i+=4)s=d[i],a=d[i+1],l=d[i+2],d[i]=r+s*h,d[i+1]=n+a*h,d[i+2]=o+l*h;u.putImageData(f,0,0)},toObject:function(){return i(this.callSuper("toObject"),{color:this.color,opacity:this.opacity})}}),e.Image.filters.Tint.fromObject=function(t){return new e.Image.filters.Tint(t)}}(exports),function(t){var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Image.filters.Multiply=e.util.createClass(e.Image.filters.BaseFilter,{type:"Multiply",initialize:function(t){t=t||{},this.color=t.color||"#000000"},applyTo:function(t){var i,r,n=t.getContext("2d"),o=n.getImageData(0,0,t.width,t.height),s=o.data,a=s.length;for(r=new e.Color(this.color).getSource(),i=0;a>i;i+=4)s[i]*=r[0]/255,s[i+1]*=r[1]/255,s[i+2]*=r[2]/255;n.putImageData(o,0,0)},toObject:function(){return i(this.callSuper("toObject"),{color:this.color})}}),e.Image.filters.Multiply.fromObject=function(t){return new e.Image.filters.Multiply(t)}}(exports),function(t){var e=t.fabric;e.Image.filters.Blend=e.util.createClass({type:"Blend",initialize:function(t){t=t||{},this.color=t.color||"#000",this.image=t.image||!1,this.mode=t.mode||"multiply",this.alpha=t.alpha||1},applyTo:function(t){var i,r,n,o,s,a,l,h,c,u,f=t.getContext("2d"),d=f.getImageData(0,0,t.width,t.height),p=d.data,g=!1;if(this.image){g=!0;var v=e.util.createCanvasElement();v.width=this.image.width,v.height=this.image.height;var m=new e.StaticCanvas(v);m.add(this.image);u=m.getContext("2d").getImageData(0,0,m.width,m.height).data}else u=new e.Color(this.color).getSource(),i=u[0]*this.alpha,r=u[1]*this.alpha,n=u[2]*this.alpha;for(var y=0,b=p.length;b>y;y+=4)switch(o=p[y],s=p[y+1],a=p[y+2],g&&(i=u[y]*this.alpha,r=u[y+1]*this.alpha,n=u[y+2]*this.alpha),this.mode){case"multiply":p[y]=o*i/255,p[y+1]=s*r/255,p[y+2]=a*n/255;break;case"screen":p[y]=1-(1-o)*(1-i),p[y+1]=1-(1-s)*(1-r),p[y+2]=1-(1-a)*(1-n);break;case"add":p[y]=Math.min(255,o+i),p[y+1]=Math.min(255,s+r),p[y+2]=Math.min(255,a+n);break;case"diff":case"difference":p[y]=Math.abs(o-i),p[y+1]=Math.abs(s-r),p[y+2]=Math.abs(a-n);break;case"subtract":l=o-i,h=s-r,c=a-n,p[y]=0>l?0:l,p[y+1]=0>h?0:h,p[y+2]=0>c?0:c;break;case"darken":p[y]=Math.min(o,i),p[y+1]=Math.min(s,r),p[y+2]=Math.min(a,n);break;case"lighten":p[y]=Math.max(o,i),p[y+1]=Math.max(s,r),p[y+2]=Math.max(a,n)}f.putImageData(d,0,0)},toObject:function(){return{color:this.color,image:this.image,mode:this.mode,alpha:this.alpha}}}),e.Image.filters.Blend.fromObject=function(t){return new e.Image.filters.Blend(t)}}(exports),function(t){var e=t.fabric||(t.fabric={}),i=Math.pow,r=Math.floor,n=Math.sqrt,o=Math.abs,s=Math.max,a=Math.round,l=Math.sin,h=Math.ceil;e.Image.filters.Resize=e.util.createClass(e.Image.filters.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:0,scaleY:0,lanczosLobes:3,applyTo:function(t,e,i){this.rcpScaleX=1/e,this.rcpScaleY=1/i;var r,n=t.width,o=t.height,s=a(n*e),l=a(o*i);"sliceHack"===this.resizeType&&(r=this.sliceByTwo(t,n,o,s,l)),"hermite"===this.resizeType&&(r=this.hermiteFastResize(t,n,o,s,l)),"bilinear"===this.resizeType&&(r=this.bilinearFiltering(t,n,o,s,l)),"lanczos"===this.resizeType&&(r=this.lanczosResize(t,n,o,s,l)),t.width=s,t.height=l,t.getContext("2d").putImageData(r,0,0)},sliceByTwo:function(t,i,n,o,a){var l,h=t.getContext("2d"),c=.5,u=.5,f=1,d=1,p=!1,g=!1,v=i,m=n,y=e.util.createCanvasElement(),b=y.getContext("2d");for(o=r(o),a=r(a),y.width=s(o,i),y.height=s(a,n),o>i&&(c=2,f=-1),a>n&&(u=2,d=-1),l=h.getImageData(0,0,i,n),t.width=s(o,i),t.height=s(a,n),h.putImageData(l,0,0);!p||!g;)i=v,n=m,o*f<r(v*c*f)?v=r(v*c):(v=o,p=!0),a*d<r(m*u*d)?m=r(m*u):(m=a,g=!0),l=h.getImageData(0,0,i,n),b.putImageData(l,0,0),h.clearRect(0,0,v,m),h.drawImage(y,0,0,i,n,0,0,v,m);return h.getImageData(0,0,o,a)},lanczosResize:function(t,e,s,a,c){function u(t){var l,h,f,d,O,E,S,M,P,D,A;for(k.x=(t+.5)*y,T.x=r(k.x),l=0;c>l;l++){for(k.y=(l+.5)*b,T.y=r(k.y),O=0,E=0,S=0,M=0,P=0,h=T.x-w;T.x+w>=h;h++)if(h>=0&&e>h){D=r(1e3*o(h-k.x)),C[D]||(C[D]={});for(var j=T.y-L;T.y+L>=j;j++)j>=0&&s>j&&(A=r(1e3*o(j-k.y)),C[D][A]||(C[D][A]=m(n(i(D*_,2)+i(A*x,2))/1e3)),(f=C[D][A])>0&&(d=4*(j*e+h),O+=f,E+=f*g[d],S+=f*g[d+1],M+=f*g[d+2],P+=f*g[d+3]))}d=4*(l*a+t),v[d]=E/O,v[d+1]=S/O,v[d+2]=M/O,v[d+3]=P/O}return++t<a?u(t):p}var f=t.getContext("2d"),d=f.getImageData(0,0,e,s),p=f.getImageData(0,0,a,c),g=d.data,v=p.data,m=function(t){return function(e){if(e>t)return 0;if(e*=Math.PI,1e-16>o(e))return 1;var i=e/t;return l(e)*l(i)/e/i}}(this.lanczosLobes),y=this.rcpScaleX,b=this.rcpScaleY,_=2/this.rcpScaleX,x=2/this.rcpScaleY,w=h(y*this.lanczosLobes/2),L=h(b*this.lanczosLobes/2),C={},k={},T={};return u(0)},bilinearFiltering:function(t,e,i,n,o){var s,a,l,h,c,u,f,d,p,g,v,m,y,b=0,_=this.rcpScaleX,x=this.rcpScaleY,w=t.getContext("2d"),L=4*(e-1),C=w.getImageData(0,0,e,i),k=C.data,T=w.getImageData(0,0,n,o),O=T.data;for(f=0;o>f;f++)for(d=0;n>d;d++)for(c=r(_*d),u=r(x*f),p=_*d-c,g=x*f-u,y=4*(u*e+c),v=0;4>v;v++)s=k[y+v],a=k[y+4+v],l=k[y+L+v],h=k[y+L+4+v],m=s*(1-p)*(1-g)+a*p*(1-g)+l*g*(1-p)+h*p*g,O[b++]=m;return T},hermiteFastResize:function(t,e,i,s,a){for(var l=this.rcpScaleX,c=this.rcpScaleY,u=h(l/2),f=h(c/2),d=t.getContext("2d"),p=d.getImageData(0,0,e,i),g=p.data,v=d.getImageData(0,0,s,a),m=v.data,y=0;a>y;y++)for(var b=0;s>b;b++){for(var _=4*(b+y*s),x=0,w=0,L=0,C=0,k=0,T=0,O=0,E=(y+.5)*c,S=r(y*c);(y+1)*c>S;S++)for(var M=o(E-(S+.5))/f,P=(b+.5)*l,D=M*M,A=r(b*l);(b+1)*l>A;A++){var j=o(P-(A+.5))/u,I=n(D+j*j);1<I&&I<-1||(x=2*I*I*I-3*I*I+1)>0&&(j=4*(A+S*e),O+=x*g[j+3],L+=x,255>g[j+3]&&(x=x*g[j+3]/250),C+=x*g[j],k+=x*g[j+1],T+=x*g[j+2],w+=x)}m[_]=C/w,m[_+1]=k/w,m[_+2]=T/w,m[_+3]=O/L}return v},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaley:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),e.Image.filters.Resize.fromObject=function(){return new e.Image.filters.Resize}}(exports),function(t){var e=t.fabric||(t.fabric={}),i=e.util.object.extend,r=e.util.object.clone,n=e.util.toFixed,o=e.StaticCanvas.supports("setLineDash");if(e.Text)return void e.warn("fabric.Text is already defined");var s=e.Object.prototype.stateProperties.concat();s.push("fontFamily","fontWeight","fontSize","text","textDecoration","textAlign","fontStyle","lineHeight","textBackgroundColor"),e.Text=e.util.createClass(e.Object,{_dimensionAffectingProps:{fontSize:!0,fontWeight:!0,fontFamily:!0,fontStyle:!0,lineHeight:!0,stroke:!0,strokeWidth:!0,text:!0,textAlign:!0},_reNewline:/\r?\n/,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",textDecoration:"",textAlign:"left",fontStyle:"",lineHeight:1.16,textBackgroundColor:"",stateProperties:s,stroke:null,shadow:null,_fontSizeFraction:.25,_fontSizeMult:1.13,initialize:function(t,e){e=e||{},this.text=t,this.__skipDimension=!0,this.setOptions(e),this.__skipDimension=!1,this._initDimensions()},_initDimensions:function(t){if(!this.__skipDimension){t||(t=e.util.createCanvasElement().getContext("2d"),this._setTextStyles(t)),this._textLines=this.text.split(this._reNewline),this._clearCache();var i=this.textAlign;this.textAlign="left",this.width=this._getTextWidth(t),this.textAlign=i,this.height=this._getTextHeight(t)}},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_render:function(t){this.clipTo&&e.util.clipContext(this,t),this._renderTextBackground(t),this._renderText(t),this._renderTextDecoration(t),this.clipTo&&t.restore()},_renderText:function(t){t.save(),this._translateForTextAlign(t),this._setOpacity(t),this._setShadow(t),this._setupCompositeOperation(t),this._renderTextFill(t),this._renderTextStroke(t),this._restoreCompositeOperation(t),this._removeShadow(t),t.restore()},_translateForTextAlign:function(t){"left"!==this.textAlign&&"justify"!==this.textAlign&&t.translate("center"===this.textAlign?this.width/2:this.width,0)},_setTextStyles:function(t){t.textBaseline="alphabetic",this.skipTextAlign||(t.textAlign=this.textAlign),t.font=this._getFontDeclaration()},_getTextHeight:function(){return this._textLines.length*this._getHeightOfLine()},_getTextWidth:function(t){for(var e=this._getLineWidth(t,0),i=1,r=this._textLines.length;r>i;i++){var n=this._getLineWidth(t,i);n>e&&(e=n)}return e},_renderChars:function(t,e,i,r,n){e[t](i,r,n)},_renderTextLine:function(t,e,i,r,n,o){if(n-=this.fontSize*this._fontSizeFraction,"justify"!==this.textAlign)return void this._renderChars(t,e,i,r,n,o);var s=this._getLineWidth(e,o),a=this.width;if(a<s)this._renderChars(t,e,i,r,n,o);else for(var l=i.split(/\s+/),h=this._getWidthOfWords(e,i,o),c=a-h,u=l.length-1,f=c/u,d=0,p=0,g=l.length;g>p;p++)this._renderChars(t,e,l[p],r+d,n,o),d+=e.measureText(l[p]).width+f},_getWidthOfWords:function(t,e){return t.measureText(e.replace(/\s+/g,"")).width},_getLeftOffset:function(){return-this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextFill:function(t){if(this.fill||this._skipFillStrokeCheck){for(var e=0,i=0,r=this._textLines.length;r>i;i++){var n=this._getHeightOfLine(t,i),o=n/this.lineHeight;this._renderTextLine("fillText",t,this._textLines[i],this._getLeftOffset(),this._getTopOffset()+e+o,i),e+=n}this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t)}},_renderTextStroke:function(t){if(this.stroke&&0!==this.strokeWidth||this._skipFillStrokeCheck){var e=0;t.save(),this.strokeDashArray&&(1&this.strokeDashArray.length&&this.strokeDashArray.push.apply(this.strokeDashArray,this.strokeDashArray),o&&t.setLineDash(this.strokeDashArray)),t.beginPath();for(var i=0,r=this._textLines.length;r>i;i++){var n=this._getHeightOfLine(t,i),s=n/this.lineHeight;this._renderTextLine("strokeText",t,this._textLines[i],this._getLeftOffset(),this._getTopOffset()+e+s,i),e+=n}t.closePath(),t.restore()}},_getHeightOfLine:function(){return this.fontSize*this._fontSizeMult*this.lineHeight},_renderTextBackground:function(t){this._renderTextBoxBackground(t),this._renderTextLinesBackground(t)},_renderTextBoxBackground:function(t){this.backgroundColor&&(t.save(),t.fillStyle=this.backgroundColor,t.fillRect(this._getLeftOffset(),this._getTopOffset(),this.width,this.height),t.restore())},_renderTextLinesBackground:function(t){var e=0,i=this._getHeightOfLine();if(this.textBackgroundColor){t.save(),t.fillStyle=this.textBackgroundColor;for(var r=0,n=this._textLines.length;n>r;r++){if(""!==this._textLines[r]){var o=this._getLineWidth(t,r),s=this._getLineLeftOffset(o);t.fillRect(this._getLeftOffset()+s,this._getTopOffset()+e,o,this.fontSize*this._fontSizeMult)}e+=i}t.restore()}},_getLineLeftOffset:function(t){return"center"===this.textAlign?(this.width-t)/2:"right"===this.textAlign?this.width-t:0},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__lineOffsets=[]},_shouldClearCache:function(){var t=!1;for(var e in this._dimensionAffectingProps)this["__"+e]!==this[e]&&(this["__"+e]=this[e],t=!0);return t},_getLineWidth:function(t,e){return this.__lineWidths[e]?this.__lineWidths[e]:this.__lineWidths[e]=t.measureText(this._textLines[e]).width},_renderTextDecoration:function(t){if(this.textDecoration){var e=this.height/2,i=this,r=[];this.textDecoration.indexOf("underline")>-1&&r.push(.85),this.textDecoration.indexOf("line-through")>-1&&r.push(.43),this.textDecoration.indexOf("overline")>-1&&r.push(-.12),r.length>0&&function(r){var n,o,s,a,l=0;for(n=0,o=i._textLines.length;o>n;n++){var h=i._getLineWidth(t,n),c=i._getLineLeftOffset(h),u=i._getHeightOfLine(t,n);for(s=0,a=r.length;a>s;s++)t.fillRect(i._getLeftOffset()+c,l+(i._fontSizeMult-1+r[s])*i.fontSize-e,h,i.fontSize/15);l+=u}}(r)}},_getFontDeclaration:function(){return[e.isLikelyNode?this.fontWeight:this.fontStyle,e.isLikelyNode?this.fontStyle:this.fontWeight,this.fontSize+"px",e.isLikelyNode?'"'+this.fontFamily+'"':this.fontFamily].join(" ")},render:function(t,e){this.visible&&(t.save(),this._setTextStyles(t),this._shouldClearCache()&&this._initDimensions(t),e||this.transform(t),this._setStrokeStyles(t),this._setFillStyles(t),this.transformMatrix&&t.transform.apply(t,this.transformMatrix),this.group&&"path-group"===this.group.type&&t.translate(this.left,this.top),this._render(t),t.restore())},toObject:function(t){var e=i(this.callSuper("toObject",t),{text:this.text,fontSize:this.fontSize,fontWeight:this.fontWeight,fontFamily:this.fontFamily,fontStyle:this.fontStyle,lineHeight:this.lineHeight,textDecoration:this.textDecoration,textAlign:this.textAlign,textBackgroundColor:this.textBackgroundColor});return this.includeDefaultValues||this._removeDefaultValues(e),e},toSVG:function(t){var e=this._createBaseSVGMarkup(),i=this._getSVGLeftTopOffsets(this.ctx);return this._wrapSVGTextAndBg(e,this._getSVGTextAndBg(i.textTop,i.textLeft)),t?t(e.join("")):e.join("")},_getSVGLeftTopOffsets:function(t){var e=this._getHeightOfLine(t,0);return{textLeft:-this.width/2+(this.group&&"path-group"===this.group.type?this.left:0),textTop:0+(this.group&&"path-group"===this.group.type?-this.top:0),lineTop:e}},_wrapSVGTextAndBg:function(t,e){t.push('\t<g transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'">\n',e.textBgRects.join(""),"\t\t<text ",this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",this.textDecoration?'text-decoration="'+this.textDecoration+'" ':"",'style="',this.getSvgStyles(),'" >',e.textSpans.join(""),"</text>\n","\t</g>\n")},_getSVGTextAndBg:function(t,e){var i=[],r=[],n=0;this._setSVGBg(r);for(var o=0,s=this._textLines.length;s>o;o++)this.textBackgroundColor&&this._setSVGTextLineBg(r,o,e,t,n),this._setSVGTextLineText(o,i,n,e,t,r),n+=this._getHeightOfLine(this.ctx,o);return{textSpans:i,textBgRects:r}},_setSVGTextLineText:function(t,i,r,o,s){var a=this.fontSize*(this._fontSizeMult-this._fontSizeFraction)-s+r-this.height/2;i.push('<tspan x="',n(o+this._getLineLeftOffset(this.__lineWidths[t]),4),'" ','y="',n(a,4),'" ',this._getFillAttributes(this.fill),">",e.util.string.escapeXml(this._textLines[t]),"</tspan>")},_setSVGTextLineBg:function(t,e,i,r,o){t.push("\t\t<rect ",this._getFillAttributes(this.textBackgroundColor),' x="',n(i+this._getLineLeftOffset(this.__lineWidths[e]),4),'" y="',n(o-this.height/2,4),'" width="',n(this.__lineWidths[e],4),'" height="',n(this._getHeightOfLine(this.ctx,e)/this.lineHeight,4),'"></rect>\n')},_setSVGBg:function(t){this.backgroundColor&&t.push("\t\t<rect ",this._getFillAttributes(this.backgroundColor),' x="',n(-this.width/2,4),'" y="',n(-this.height/2,4),'" width="',n(this.width,4),'" height="',n(this.height,4),'"></rect>\n')},_getFillAttributes:function(t){var i=t&&"string"==typeof t?new e.Color(t):"";return i&&i.getSource()&&1!==i.getAlpha()?'opacity="'+i.getAlpha()+'" fill="'+i.setAlpha(1).toRgb()+'"':'fill="'+t+'"'},_set:function(t,e){this.callSuper("_set",t,e),t in this._dimensionAffectingProps&&(this._initDimensions(),this.setCoords())},complexity:function(){return 1}}),e.Text.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size text-decoration text-anchor".split(" ")),e.Text.DEFAULT_SVG_FONT_SIZE=16,e.Text.fromElement=function(t,i){if(!t)return null;var r=e.parseAttributes(t,e.Text.ATTRIBUTE_NAMES);i=e.util.object.extend(i?e.util.object.clone(i):{},r),i.top=i.top||0,i.left=i.left||0,"dx"in r&&(i.left+=r.dx),"dy"in r&&(i.top+=r.dy),"fontSize"in i||(i.fontSize=e.Text.DEFAULT_SVG_FONT_SIZE),i.originX||(i.originX="left");var n=t.textContent.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," "),o=new e.Text(n,i),s=0;return"left"===o.originX&&(s=o.getWidth()/2),"right"===o.originX&&(s=-o.getWidth()/2),o.set({left:o.getLeft()+s,top:o.getTop()-o.getHeight()/2+o.fontSize*(.18+o._fontSizeFraction)}),o},e.Text.fromObject=function(t){return new e.Text(t.text,r(t))},e.util.createAccessors(e.Text)}(exports)},function(t,e){t.exports=__WEBPACK_EXTERNAL_MODULE_2__},function(t,e){t.exports=__WEBPACK_EXTERNAL_MODULE_3__},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=Object.assign||function(t){for(var e=1;arguments.length>e;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},o=i(1),s=i(13),a=r(s),l=i(3),h=r(l),c={canvasMaxNum:10};e.default=a.default.extend({initialize:function(t){t=n({},c,t),a.default.prototype.initialize.call(this,t)},_onMapResize:function(){a.default.prototype._onMapResize.call(this,this._map),this.fabrics.forEach(function(t){var e=t.contextContainer.canvas;t.setDimensions({width:e.width,height:e.height})})},onAdd:function(t){a.default.prototype.onAdd.call(this,t),this.initFabrics()},onRemove:function(){this.disposeFabrics(this.lockedFabrics),this.disposeFabrics(this.fabrics),a.default.prototype.onRemove.call(this)},_lockAllCanvas:function(){a.default.prototype._lockAllCanvas.call(this),this.lockedFabrics=this.fabrics,this.lastFabricCanvas=void 0,this.fabrics=[]},_removeLockedCanvas:function(){a.default.prototype._removeLockedCanvas.call(this),this.disposeFabrics(this.lockedFabrics)},getFabric:function(){var t=void 0;t=this.lastFabricCanvas?this.fabrics.indexOf(this.lastFabricCanvas)+1:0;var e=this.fabrics[t];return e||(e=this.createFabric(),this.fabrics[t]=e),this.lastFabricCanvas=e},createFabric:function(){var t=this.createCanvas();return new o.fabric.StaticCanvas(t,{renderOnAddRemove:!1,stateful:!1})},initFabrics:function(){this.fabrics=[],this.lockedFabrics=[]},disposeFabrics:function(t){t.forEach(function(t){t.dispose()})},renderInSingleFrame:function(t,e,i,r,n){this.raf(function(){e.forEach(function(e){var o=n(e,i,r);void 0!=o&&(h.default.isArray(o)?o.forEach(function(e){return t.add(e)}):t.add(o))}),t.renderAll()})},renderInMultiFrames:function(t,e,i){var r=this;this.renderLayerBounds=this.getRenderLayerBounds();var n=t.features.length/this.options.canvasMaxNum;n>i&&(i=n);for(var o=[],s=this.getRenderContainerBounds(),a=this.getBufferedOffset(),l=0,h=t.features.length;h>l;l++){o.push(t.features[l]),o.length===i&&(this.renderInSingleFrame(this.getFabric(),o,s,a,e),o=[])}o.length>0&&this.renderInSingleFrame(this.getFabric(),o,s,a,e),this.raf(function(){r.fire("renderdone")})}})},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=Object.assign||function(t){for(var e=1;arguments.length>e;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},l=function(){function t(t,e){for(var i=0;e.length>i;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),h=i(3),c=(r(h),i(6)),u=(r(c),i(15)),f=r(u),d=(i(8),0);e.default=function(t){function e(t){n(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.id=d++,i.requestCounter=0,i.props=a({},i.props,t),i}return s(e,t),l(e,[{key:"emitLoadStart",value:function(t){for(var e=arguments.length,i=Array(e>1?e-1:0),r=1;e>r;r++)i[r-1]=arguments[r];this.emit.apply(this,["loadstart",t].concat(i))}},{key:"emitLoadData",value:function(t){for(var e=arguments.length,i=Array(e>1?e-1:0),r=1;e>r;r++)i[r-1]=arguments[r];this.emit.apply(this,["loaddata",t].concat(i))}},{key:"emitLoad",value:function(t){for(var e=arguments.length,i=Array(e>1?e-1:0),r=1;e>r;r++)i[r-1]=arguments[r];this.emit.apply(this,["load",t].concat(i))}},{key:"emitLoadError",value:function(t){for(var e=arguments.length,i=Array(e>1?e-1:0),r=1;e>r;r++)i[r-1]=arguments[r];this.emit.apply(this,["loaderror",t].concat(i))}},{key:"getRid",value:function(){return this.id+"-"+this.requestCounter}},{key:"setProps",value:function(t){this.props=a({},this.props,t)}},{key:"request",value:function(){this.requestCounter++;var t=this.getRid();return Promise.resolve(this._request(t))}},{key:"_request",value:function(t){throw Error("should overwrite _request interface")}},{key:"destroy",value:function(){this.isDestroy||(this.removeAllListeners(),this._destroy&&this._destroy(),this.isDestroy=!0)}}]),e}(f.default)},function(t,e){t.exports=__WEBPACK_EXTERNAL_MODULE_6__},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;arguments.length>e;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t};i(2);var n=i(5),o=function(t){return t&&t.__esModule?t:{default:t}}(n),s={valueName:"value",defaultValue:"undefined",destroyDsAfterRemove:!0,lazy:!1};e.default=L.Layer.extend({initialize:function(t){t=r({},s,t),L.setOptions(this,t),this._frames={},this._runningFrames={},this._loopPausing=!1},_initDs:function(){var t=this.options.ds;if(!(t instanceof o.default))throw Error("ds must be instance of Datasource");this._ds=t,this._ds.on("loadstart",this._onDsLoadStart,this),this._ds.on("loaddata",this._onDsLoadData,this),this._ds.on("load",this._onDsLoad,this),this._ds.on("loaderror",this._onDsLoadError,this),this.options.lazy||this._ds.request()},_onDsLoadStart:function(t){this.fire("loadstart",{rid:t})},_onDsLoadData:function(t,e,i){this._dataID=i,this.fire("loaddata",{data:e,rid:t,dataUrl:i})},_onDsLoad:function(t){this.fire("load",{rid:t})},_onDsLoadError:function(t,e){this.fire("loaderror",{error:e,rid:t})},_destroyDs:function(){if(this._ds&&this.options.destroyDsAfterRemove)return this._ds.destroy();this._ds.removeListener("loadstart",this._onDsLoadStart,this),this._ds.removeListener("loaddata",this._onDsLoadData,this),this._ds.removeListener("load",this._onDsLoad,this),this._ds.removeListener("loaderror",this._onDsLoadError,this)},getValue:function(t){return(void 0==this.options.getValue?t.properties[this.options.valueName]:this.options.getValue(t))||this.options.defaultValue},clearFrames:function(){var t=this;Object.keys(this._runningFrames).forEach(function(e){var i=t._runningFrames[e];i&&(L.Util.cancelAnimFrame(i.requestAnimFrameID),t._runningFrames[e]=null)}),this._frameFuncs={}},pauseLoop:function(){this._loopPausing=!0},resumeLoop:function(){this._loopPausing=!1,this.loop()},loop:function(){var t=this;this._loopPausing||Object.keys(this._frames).forEach(function(e){if(void 0==t._runningFrames[e]&&0!==t._frames[e].length){var i=t._runningFrame=t._frames[e].shift();i.requestAnimFrameID=L.Util.requestAnimFrame(function(){i.func(),t._runningFrames[e]=null,t.loop()})}})},raf:function(t,e){var i=this._dataID||"default";if(e)throw Error("not support immediate");void 0==this._frames[i]&&(this._frames[i]=[]),this._frames[i].push({func:t}),this.loop()}})},function(t,e,i){t.exports=i(49)},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=Object.assign||function(t){for(var e=1;arguments.length>e;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},l=function(){function t(t,e){for(var i=0;e.length>i;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),h=i(3),c=r(h),u=i(6),f=r(u),d=i(8),p=i(5),g=r(p),v={headers:{Accept:"application/json","Content-Type":"application/json"}},m=function(t){if(null===t)return t;if(void 0==t.isError)return t;if(t.isError)throw t.error;return t.data},y={maxCacheData:10,parseData:m};e.default=function(t){function e(t){n(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a({},y,t)));return i.cache=[],i}return s(e,t),l(e,[{key:"getRequestOpts",value:function(t){return a({},v,{headers:a({},v.headers,t.headers),credentials:t.credentials,method:t.method||"GET",body:t.body})}},{key:"_request",value:function(t){var e=this,i=this.props.url,r=this.getRequestOpts(this.props);this.emitLoadStart(t);var n=function(i,r){void 0!=i&&t===e.getRid()&&e.emitLoadData(t,i,r)},o=this.sendRequest(i,r,n);return o.then(function(){e.emitLoad(t)}).catch(function(i){return e.emitLoadError(t,i)}),o}},{key:"preload",value:function(t){return t=a({},this.props,t),this.sendRequest(t.url,this.getRequestOpts(t))}},{key:"sendRequest",value:function(t,e){var i=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};return c.default.isArray(t)?(0,d.all)(t.map(function(t){return i.sendOneRequest(t,e).then(function(e){return r(e,t)})})):this.sendOneRequest(t,e).then(function(e){return r(e,t)})}},{key:"sendOneRequest",value:function(t,e){var i=this,r=this.getCache(t);if(r)return r.value;var n=this._sendOneRequest(t,e).then(function(e){return null===e&&i.removeCache(t),e}).catch(function(e){throw i.removeCache(t),e});return this.setCache(t,n),n}},{key:"_sendOneRequest",value:function(t,e){var i=this;return(0,f.default)(t,e).then(function(t){return i.isDestroy?null:t.json()}).then(this.props.parseData)}},{key:"setCache",value:function(t,e){this.props.maxCacheData>this.cache.length||(this.cache=this.cache.slice(this.cache.length-this.props.maxCacheData+1)),this.cache.push({key:t,value:e})}},{key:"getCache",value:function(t,e){return c.default.find(this.cache,{key:t})}},{key:"removeCache",value:function(t){this.cache.splice(c.default.findIndex({key:t}),1)}},{key:"clearCache",value:function(){this.cache=[]}},{key:"_destroy",value:function(){this.clearCache()}}]),e}(g.default)},function(t,e){function i(t,e,i,r){if(void 0===t)throw Error("geometry is required");if(e&&e.constructor!==Object)throw Error("properties must be an Object");if(i&&4!==i.length)throw Error("bbox must be an Array of 4 numbers");if(r&&-1===["string","number"].indexOf(typeof r))throw Error("id must be a number or a string");var n={type:"Feature"};return r&&(n.id=r),i&&(n.bbox=i),n.properties=e||{},n.geometry=t,n}function r(t,e,i){if(!t)throw Error("type is required");if(!e)throw Error("coordinates is required");if(!Array.isArray(e))throw Error("coordinates must be an Array");if(i&&4!==i.length)throw Error("bbox must be an Array of 4 numbers");var r;switch(t){case"Point":r=n(e).geometry;break;case"LineString":r=s(e).geometry;break;case"Polygon":r=o(e).geometry;break;case"MultiPoint":r=h(e).geometry;break;case"MultiLineString":r=l(e).geometry;break;case"MultiPolygon":r=c(e).geometry;break;default:throw Error(t+" is invalid")}return i&&(r.bbox=i),r}function n(t,e,r,n){if(!t)throw Error("No coordinates passed");if(void 0===t.length)throw Error("Coordinates must be an array");if(2>t.length)throw Error("Coordinates must be at least 2 numbers long");if(!x(t[0])||!x(t[1]))throw Error("Coordinates must contain numbers");return i({type:"Point",coordinates:t},e,r,n)}function o(t,e,r,n){if(!t)throw Error("No coordinates passed");for(var o=0;t.length>o;o++){var s=t[o];if(4>s.length)throw Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;s[s.length-1].length>a;a++){if(0===o&&0===a&&!x(s[0][0])||!x(s[0][1]))throw Error("Coordinates must contain numbers");if(s[s.length-1][a]!==s[0][a])throw Error("First and last Position are not equivalent.")}}return i({type:"Polygon",coordinates:t},e,r,n)}function s(t,e,r,n){if(!t)throw Error("No coordinates passed");if(2>t.length)throw Error("Coordinates must be an array of two or more positions");if(!x(t[0][1])||!x(t[0][1]))throw Error("Coordinates must contain numbers");return i({type:"LineString",coordinates:t},e,r,n)}function a(t,e,i){if(!t)throw Error("No features passed");if(!Array.isArray(t))throw Error("features must be an Array");if(e&&4!==e.length)throw Error("bbox must be an Array of 4 numbers");if(i&&-1===["string","number"].indexOf(typeof i))throw Error("id must be a number or a string");var r={type:"FeatureCollection"};return i&&(r.id=i),e&&(r.bbox=e),r.features=t,r}function l(t,e,r,n){if(!t)throw Error("No coordinates passed");return i({type:"MultiLineString",coordinates:t},e,r,n)}function h(t,e,r,n){if(!t)throw Error("No coordinates passed");return i({type:"MultiPoint",coordinates:t},e,r,n)}function c(t,e,r,n){if(!t)throw Error("No coordinates passed");return i({type:"MultiPolygon",coordinates:t},e,r,n)}function u(t,e,r,n){if(!t)throw Error("geometries is required");if(!Array.isArray(t))throw Error("geometries must be an Array");return i({type:"GeometryCollection",geometries:t},e,r,n)}function f(t,e){if(void 0===t||null===t||isNaN(t))throw Error("num is required");if(e&&e<0)throw Error("precision must be a positive number");var i=Math.pow(10,e||0);return Math.round(t*i)/i}function d(t,e){if(void 0===t||null===t)throw Error("radians is required");var i=w[e||"kilometers"];if(!i)throw Error("units is invalid");return t*i}function p(t,e){if(void 0===t||null===t)throw Error("distance is required");var i=w[e||"kilometers"];if(!i)throw Error("units is invalid");return t/i}function g(t,e){return m(p(t,e))}function v(t){if(null===t||void 0===t)throw Error("bearing is required");var e=t%360;return 0>e&&(e+=360),e}function m(t){if(null===t||void 0===t)throw Error("radians is required");return t%(2*Math.PI)*180/Math.PI}function y(t){if(null===t||void 0===t)throw Error("degrees is required");return t%360*Math.PI/180}function b(t,e,i){if(null===t||void 0===t)throw Error("distance is required");if(t<0)throw Error("distance must be a positive number");return d(p(t,e),i||"kilometers")}function _(t,e,i){if(null===t||void 0===t)throw Error("area is required");if(t<0)throw Error("area must be a positive number");var r=L[e||"meters"];if(!r)throw Error("invalid original units");var n=L[i||"kilometers"];if(!n)throw Error("invalid final units");return t/r*n}function x(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}var w={miles:3960,nauticalmiles:3441.145,degrees:57.2957795,radians:1,inches:250905600,yards:6969600,meters:6373e3,metres:6373e3,centimeters:6373e5,centimetres:6373e5,kilometers:6373,kilometres:6373,feet:20908792.65},L={kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,centimetres:1e4,millimeter:1e6,acres:247105e-9,miles:3.86e-7,yards:1.195990046,feet:10.763910417,inches:1550.003100006};t.exports={feature:i,geometry:r,featureCollection:a,geometryCollection:u,point:n,multiPoint:h,lineString:s,multiLineString:l,polygon:o,multiPolygon:c,radiansToDistance:d,distanceToRadians:p,distanceToDegrees:g,radians2degrees:m,degrees2radians:y,bearingToAngle:v,convertDistance:b,convertArea:_,round:f,isNumber:x}},function(t,e,i){function r(t,e,i){var r=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var n=0,o=e.length-1;e.length>n;o=n++){var s=e[n][0],a=e[n][1],l=e[o][0],h=e[o][1];if(t[1]*(s-l)+a*(l-t[0])+h*(t[0]-s)==0&&0>=(s-t[0])*(l-t[0])&&0>=(a-t[1])*(h-t[1]))return!i;a>t[1]!=h>t[1]&&(l-s)*(t[1]-a)/(h-a)+s>t[0]&&(r=!r)}return r}function n(t,e){return!(e[0]>t[0]||e[1]>t[1]||t[0]>e[2]||t[1]>e[3])}var o=i(12),s=o.getCoord,a=o.getCoords;t.exports=function(t,e,i){if(!t)throw Error("point is required");if(!e)throw Error("polygon is required");var o=s(t),l=a(e),h=e.geometry?e.geometry.type:e.type,c=e.bbox;if(c&&!1===n(o,c))return!1;"Polygon"===h&&(l=[l]);for(var u=0,f=!1;l.length>u&&!f;u++)if(r(o,l[u][0],i)){for(var d=!1,p=1;l[u].length>p&&!d;)r(o,l[u][p],!i)&&(d=!0),p++;d||(f=!0)}return f}},function(t,e){function i(t){if(!t)throw Error("obj is required");var e=r(t);if(e.length>1&&"number"==typeof e[0]&&"number"==typeof e[1])return e;throw Error("Coordinate is not a valid Point")}function r(t){if(!t)throw Error("obj is required");var e;if(t.length?e=t:t.coordinates?e=t.coordinates:t.geometry&&t.geometry.coordinates&&(e=t.geometry.coordinates),e)return n(e),e;throw Error("No valid coordinates")}function n(t){if(t.length>1&&"number"==typeof t[0]&&"number"==typeof t[1])return!0;if(Array.isArray(t[0])&&t[0].length)return n(t[0]);throw Error("coordinates must only contain numbers")}function o(t,e,i){if(!e||!i)throw Error("type and name required");if(!t||t.type!==e)throw Error("Invalid input to "+i+": must be a "+e+", given "+t.type)}function s(t,e,i){if(!t)throw Error("No feature passed");if(!i)throw Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw Error("Invalid input to "+i+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw Error("Invalid input to "+i+": must be a "+e+", given "+t.geometry.type)}function a(t,e,i){if(!t)throw Error("No featureCollection passed");if(!i)throw Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw Error("Invalid input to "+i+", FeatureCollection required");for(var r=0;t.features.length>r;r++){var n=t.features[r];if(!n||"Feature"!==n.type||!n.geometry)throw Error("Invalid input to "+i+", Feature with geometry required");if(!n.geometry||n.geometry.type!==e)throw Error("Invalid input to "+i+": must be a "+e+", given "+n.geometry.type)}}function l(t){if(!t)throw Error("geojson is required");if(void 0!==t.geometry)return t.geometry;if(t.coordinates||t.geometries)return t;throw Error("geojson must be a valid Feature or Geometry Object")}function h(t){if(!t)throw Error("geojson is required");var e=l(t);if(e)return e.type}t.exports={geojsonType:o,collectionOf:a,featureOf:s,getCoord:i,getCoords:r,containsNumber:n,getGeom:l,getGeomType:h}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;arguments.length>e;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t};i(2);var n=i(7),o=function(t){return t&&t.__esModule?t:{default:t}}(n),s=i(0),a={canvasBuffer:{width:function(t){return 3*t},height:function(t){return 3*t}}};e.default=o.default.extend({initialize:function(t){t=r({},a,t),o.default.prototype.initialize.call(this,t)},_initEvents:function(){var t=this;this.on("loadstart",function(e){t.data={type:"FeatureCollection",features:[]}}),this.on("loaddata",function(e){t.renderRid!==e.rid&&(t.clearFrames(),t._lockAllCanvas(),t.renderRid=e.rid),t.data.features=t.data.features.concat(e.data.features),t.render(e.data)}),this.on("load",function(){t.once("renderdone",function(){t._removeLockedCanvas()})})},_initMapEvent:function(){var t=this._map;t.on("resize",this._onMapResize,this),t.on("movestart",this._onMapMovestart,this),t.on("moveend",this._onMapMoveend,this),t.on("zoomstart",this._onZoomstart,this),t.on("zoomend",this._onZoomend,this)},_removeMapEvent:function(){var t=this._map;t.off("resize",this._onMapResize,this),t.off("movestart",this._onMapMovestart,this),t.off("moveend",this._onMapMoveend,this),t.off("zoomstart",this._onZoomstart,this),t.off("zoomend",this._onZoomend,this)},_destroy:function(){this.getPane().removeChild(this.getContainer()),this._removeMapEvent(),this.clearFrames(),this._destroyDs(),this.off()},_reset:function(){this.renderLayerBounds=null;for(var t=this._map,e=this.getNodes(),i=(t.getSize(),this.getRenderLayerBounds()),r=t.containerPointToLayerPoint(i.min),n=i.max.x-i.min.x,o=i.max.y-i.min.y,s=0,a=e.length;a>s;s++){var l=e[s];L.DomUtil.setPosition(l,r),l.width!==n&&(l.width=n),l.height!==o&&(l.height=o)}},_forceRender:function(){var t=this;this.clearFrames(),this.raf(function(){t._lockAllCanvas(),t.render(t.data),t.once("renderdone",function(){t._removeLockedCanvas()})})},_getUnlockedCanvas:function(){for(var t=this.getContainer(),e=[],i=0,r=t.childNodes.length;r>i;i++){var n=t.childNodes[i];L.DomUtil.hasClass(n,"geoengine-locked-canvas")||e.push(n)}return e},_getLockedCanvas:function(){for(var t=this.getContainer(),e=[],i=0,r=t.childNodes.length;r>i;i++){var n=t.childNodes[i];L.DomUtil.hasClass(n,"geoengine-locked-canvas")&&e.push(n)}return e},_lockAllCanvas:function(){this._getUnlockedCanvas().forEach(function(t){L.DomUtil.addClass(t,"geoengine-locked-canvas")})},_removeLockedCanvas:function(){var t=this.getContainer();this._getLockedCanvas().forEach(function(e){t.removeChild(e)})},getBufferedOffset:function(){var t=this.options.canvasBuffer,e=this._map.getSize(),i=t.width(e.x),r=t.height(e.y);return L.point([(i-e.x)/2,(r-e.y)/2])},getViewLayerBounsd:function(){var t=this._map,e=t.getSize();return L.bounds([t.containerPointToLayerPoint(L.point([0,0])),t.containerPointToLayerPoint([e.x,e.y])])},getRenderContainerBounds:function(){var t=this._map.getSize(),e=this.getBufferedOffset();return L.bounds([L.point([0,0]).subtract(e),L.point([t.x,t.y]).add(e)])},getRenderLayerBounds:function(){var t=this._map,e=this._map.getSize(),i=this.getBufferedOffset();return L.bounds([t.containerPointToLayerPoint(L.point([0,0]).subtract(i)),t.containerPointToLayerPoint(L.point([e.x,e.y]).add(i))])},outOfRenderLayerBounds:function(){if(!this.renderLayerBounds)return!0;var t=this._map,e=this._map.getSize(),i=L.bounds([t.containerPointToLayerPoint(L.point([0,0])),t.containerPointToLayerPoint(L.point([e.x,e.y]))]);return!this.renderLayerBounds.contains(i.min)||!this.renderLayerBounds.contains(i.max)},_onMapResize:function(){this.clearFrames(),this._reset()},_onMapMovestart:function(){this.pauseLoop()},_onMapMoveend:function(){this.resumeLoop(),this.outOfRenderLayerBounds()&&(this.clearFrames(),this._forceRender())},_onZoomstart:function(t){this.clearFrames(),this.clearAllCanvas()},_onZoomend:function(t){this._reset(),this.clearFrames(),this._forceRender()},createCanvas:function(){var t=this._map,e=L.DomUtil.create("canvas","leaflet-canvas-layer leaflet-layer");e.style[L.DomUtil.testProp(["transformOrigin","WebkitTransformOrigin","msTransformOrigin"])]="50% 50%",e.style["pointer-events"]="none";var i=t.getSize(),r=this.options.canvasBuffer;e.width=r.width(i.x),e.height=r.height(i.y);var n=t.options.zoomAnimation&&L.Browser.any3d;return L.DomUtil.addClass(e,"leaflet-zoom-"+(n?"animated":"hide")),this.getContainer().appendChild(e),L.DomUtil.setPosition(e,this.getRenderLayerBounds().min),e},onAdd:function(t){this._map=t,this._initEvents(),this._initMapEvent(),this._initDs()},onRemove:function(){this._destroy()},clearCanvas:function(t){t.getContext("2d").clearRect(0,0,t.width,t.height)},clearAllCanvas:function(){for(var t=this.getNodes(),e=0,i=t.length;i>e;e++)this.clearCanvas(t[e])},setOptions:function(t){var e=(0,s.isAnyRenderOptionsChange)(t,this.options,this._forceRenderKeys);if(L.setOptions(this,t),t.ds&&this._ds!==t.ds)return this._ds.destroy(),void this._initDs();e&&this._forceRender()},getContainer:function(){if(this.container)return this.container;var t=this.getPane(),e=this.container=L.DomUtil.create("div","geoengine-canvas-container");return e.style.position="absolute",t.appendChild(e),e},getNodes:function(){return this.getContainer().childNodes},render:function(){throw Error("expect render function to be override")}})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={getVector:function(t){return{x:t[1].x-t[0].x,y:t[1].y-t[0].y}},getDot:function(t,e){return t.x*e.x+t.y*e.y},getLen:function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},getCos:function(t,e){return this.getLen(t)*this.getLen(e)==0?1:this.getDot(t,e)/(this.getLen(t)*this.getLen(e))},getCross:function(t,e){return t.x*e.y-t.y*e.x},getAngle:function(t,e){return Math.acos(this.getCos(this.getVector(t),this.getVector(e)))},getDegree:function(t,e){return 180*this.getAngle(t,e)/Math.PI},getRotateAngle:function(t,e){var i=this.getVector(t),r=this.getVector(e),n=this.getCos(i,r),o=Math.acos(n);return 0>this.getCross(i,r)?2*Math.PI-o:o},getRotateDegree:function(t,e){return 180*this.getRotateAngle(t,e)/Math.PI}}},function(t,e,i){"use strict";function r(){}function n(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function o(t,e,i,r,o){if("function"!=typeof i)throw new TypeError("The listener must be a function");var s=new n(i,r||t,o),a=h?h+e:e;return t._events[a]?t._events[a].fn?t._events[a]=[t._events[a],s]:t._events[a].push(s):(t._events[a]=s,t._eventsCount++),t}function s(t,e){0==--t._eventsCount?t._events=new r:delete t._events[e]}function a(){this._events=new r,this._eventsCount=0}var l=Object.prototype.hasOwnProperty,h="~";Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(h=!1)),a.prototype.eventNames=function(){var t,e,i=[];if(0===this._eventsCount)return i;for(e in t=this._events)l.call(t,e)&&i.push(h?e.slice(1):e);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},a.prototype.listeners=function(t){var e=h?h+t:t,i=this._events[e];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,n=i.length,o=Array(n);n>r;r++)o[r]=i[r].fn;return o},a.prototype.listenerCount=function(t){var e=h?h+t:t,i=this._events[e];return i?i.fn?1:i.length:0},a.prototype.emit=function(t,e,i,r,n,o){var s=h?h+t:t;if(!this._events[s])return!1;var a,l,c=this._events[s],u=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),u){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,i),!0;case 4:return c.fn.call(c.context,e,i,r),!0;case 5:return c.fn.call(c.context,e,i,r,n),!0;case 6:return c.fn.call(c.context,e,i,r,n,o),!0}for(l=1,a=Array(u-1);u>l;l++)a[l-1]=arguments[l];c.fn.apply(c.context,a)}else{var f,d=c.length;for(l=0;d>l;l++)switch(c[l].once&&this.removeListener(t,c[l].fn,void 0,!0),u){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,e);break;case 3:c[l].fn.call(c[l].context,e,i);break;case 4:c[l].fn.call(c[l].context,e,i,r);break;default:if(!a)for(f=1,a=Array(u-1);u>f;f++)a[f-1]=arguments[f];c[l].fn.apply(c[l].context,a)}}return!0},a.prototype.on=function(t,e,i){return o(this,t,e,i,!1)},a.prototype.once=function(t,e,i){return o(this,t,e,i,!0)},a.prototype.removeListener=function(t,e,i,r){var n=h?h+t:t;if(!this._events[n])return this;if(!e)return s(this,n),this;var o=this._events[n];if(o.fn)o.fn!==e||r&&!o.once||i&&o.context!==i||s(this,n);else{for(var a=0,l=[],c=o.length;c>a;a++)(o[a].fn!==e||r&&!o[a].once||i&&o[a].context!==i)&&l.push(o[a]);l.length?this._events[n]=1===l.length?l[0]:l:s(this,n)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=h?h+t:t,this._events[e]&&s(this,e)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=h,a.EventEmitter=a,t.exports=a},function(t,e){},function(t,e,i){var r,n;/*!
 * jQuery JavaScript Library v3.3.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2018-01-20T17:24Z
 */
!function(e,i){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=e.document?i(e,!0):function(t){if(!t.document)throw Error("jQuery requires a window with a document");return i(t)}:i(e)}("undefined"!=typeof window?window:this,function(i,o){"use strict";function s(t,e,i){e=e||ct;var r,n=e.createElement("script");if(n.text=t,i)for(r in Ct)i[r]&&(n[r]=i[r]);e.head.appendChild(n).parentNode.removeChild(n)}function a(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?vt[mt.call(t)]||"object":typeof t}function l(t){var e=!!t&&"length"in t&&t.length,i=a(t);return!wt(t)&&!Lt(t)&&("array"===i||0===e||"number"==typeof e&&e>0&&e-1 in t)}function h(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}function c(t,e,i){return wt(e)?kt.grep(t,function(t,r){return!!e.call(t,r,t)!==i}):e.nodeType?kt.grep(t,function(t){return t===e!==i}):"string"!=typeof e?kt.grep(t,function(t){return gt.call(e,t)>-1!==i}):kt.filter(e,t,i)}function u(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function f(t){var e={};return kt.each(t.match(Rt)||[],function(t,i){e[i]=!0}),e}function d(t){return t}function p(t){throw t}function g(t,e,i,r){var n;try{t&&wt(n=t.promise)?n.call(t).done(e).fail(i):t&&wt(n=t.then)?n.call(t,e,i):e.apply(void 0,[t].slice(r))}catch(t){i.apply(void 0,[t])}}function v(){ct.removeEventListener("DOMContentLoaded",v),i.removeEventListener("load",v),kt.ready()}function m(t,e){return e.toUpperCase()}function y(t){return t.replace(zt,"ms-").replace(Ht,m)}function b(){this.expando=kt.expando+b.uid++}function _(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:Yt.test(t)?JSON.parse(t):t)}function x(t,e,i){var r;if(void 0===i&&1===t.nodeType)if(r="data-"+e.replace(Wt,"-$&").toLowerCase(),"string"==typeof(i=t.getAttribute(r))){try{i=_(i)}catch(t){}Xt.set(t,e,i)}else i=void 0;return i}function w(t,e,i,r){var n,o,s=20,a=r?function(){return r.cur()}:function(){return kt.css(t,e,"")},l=a(),h=i&&i[3]||(kt.cssNumber[e]?"":"px"),c=(kt.cssNumber[e]||"px"!==h&&+l)&&Vt.exec(kt.css(t,e));if(c&&c[3]!==h){for(l/=2,h=h||c[3],c=+l||1;s--;)kt.style(t,e,c+h),(1-o)*(1-(o=a()/l||.5))>0||(s=0),c/=o;c*=2,kt.style(t,e,c+h),i=i||[]}return i&&(c=+c||+l||0,n=i[1]?c+(i[1]+1)*i[2]:+i[2],r&&(r.unit=h,r.start=c,r.end=n)),n}function L(t){var e,i=t.ownerDocument,r=t.nodeName,n=Qt[r];return n||(e=i.body.appendChild(i.createElement(r)),n=kt.css(e,"display"),e.parentNode.removeChild(e),"none"===n&&(n="block"),Qt[r]=n,n)}function C(t,e){for(var i,r,n=[],o=0,s=t.length;s>o;o++)r=t[o],r.style&&(i=r.style.display,e?("none"===i&&((n[o]=Ut.get(r,"display")||null)||(r.style.display="")),""===r.style.display&&Kt(r)&&(n[o]=L(r))):"none"!==i&&(n[o]="none",Ut.set(r,"display",i)));for(o=0;s>o;o++)null!=n[o]&&(t[o].style.display=n[o]);return t}function k(t,e){var i;return i=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&h(t,e)?kt.merge([t],i):i}function T(t,e){for(var i=0,r=t.length;r>i;i++)Ut.set(t[i],"globalEval",!e||Ut.get(e[i],"globalEval"))}function O(t,e,i,r,n){for(var o,s,l,h,c,u,f=e.createDocumentFragment(),d=[],p=0,g=t.length;g>p;p++)if((o=t[p])||0===o)if("object"===a(o))kt.merge(d,o.nodeType?[o]:o);else if(re.test(o)){for(s=s||f.appendChild(e.createElement("div")),l=(te.exec(o)||["",""])[1].toLowerCase(),h=ie[l]||ie._default,s.innerHTML=h[1]+kt.htmlPrefilter(o)+h[2],u=h[0];u--;)s=s.lastChild;kt.merge(d,s.childNodes),s=f.firstChild,s.textContent=""}else d.push(e.createTextNode(o));for(f.textContent="",p=0;o=d[p++];)if(r&&-1<kt.inArray(o,r))n&&n.push(o);else if(c=kt.contains(o.ownerDocument,o),s=k(f.appendChild(o),"script"),c&&T(s),i)for(u=0;o=s[u++];)ee.test(o.type||"")&&i.push(o);return f}function E(){return!0}function S(){return!1}function M(){try{return ct.activeElement}catch(t){}}function P(t,e,i,r,n,o){var s,a;if("object"==typeof e){"string"!=typeof i&&(r=r||i,i=void 0);for(a in e)P(t,a,i,r,e[a],o);return t}if(null==r&&null==n?(n=i,r=i=void 0):null==n&&("string"==typeof i?(n=r,r=void 0):(n=r,r=i,i=void 0)),!1===n)n=S;else if(!n)return t;return 1===o&&(s=n,n=function(t){return kt().off(t),s.apply(this,arguments)},n.guid=s.guid||(s.guid=kt.guid++)),t.each(function(){kt.event.add(this,e,n,r,i)})}function D(t,e){return h(t,"table")&&h(11!==e.nodeType?e:e.firstChild,"tr")?kt(t).children("tbody")[0]||t:t}function A(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function j(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function I(t,e){var i,r,n,o,s,a,l,h;if(1===e.nodeType){if(Ut.hasData(t)&&(o=Ut.access(t),s=Ut.set(e,o),h=o.events)){delete s.handle,s.events={};for(n in h)for(i=0,r=h[n].length;r>i;i++)kt.event.add(e,n,h[n][i])}Xt.hasData(t)&&(a=Xt.access(t),l=kt.extend({},a),Xt.set(e,l))}}function R(t,e){var i=e.nodeName.toLowerCase();"input"===i&&$t.test(t.type)?e.checked=t.checked:"input"!==i&&"textarea"!==i||(e.defaultValue=t.defaultValue)}function B(t,e,i,r){e=dt.apply([],e);var n,o,a,l,h,c,u=0,f=t.length,d=f-1,p=e[0],g=wt(p);if(g||f>1&&"string"==typeof p&&!xt.checkClone&&ce.test(p))return t.each(function(n){var o=t.eq(n);g&&(e[0]=p.call(this,n,o.html())),B(o,e,i,r)});if(f&&(n=O(e,t[0].ownerDocument,!1,t,r),o=n.firstChild,1===n.childNodes.length&&(n=o),o||r)){for(a=kt.map(k(n,"script"),A),l=a.length;f>u;u++)h=n,u!==d&&(h=kt.clone(h,!0,!0),l&&kt.merge(a,k(h,"script"))),i.call(t[u],h,u);if(l)for(c=a[a.length-1].ownerDocument,kt.map(a,j),u=0;l>u;u++)h=a[u],ee.test(h.type||"")&&!Ut.access(h,"globalEval")&&kt.contains(c,h)&&(h.src&&"module"!==(h.type||"").toLowerCase()?kt._evalUrl&&kt._evalUrl(h.src):s(h.textContent.replace(ue,""),c,h))}return t}function F(t,e,i){for(var r,n=e?kt.filter(e,t):t,o=0;null!=(r=n[o]);o++)i||1!==r.nodeType||kt.cleanData(k(r)),r.parentNode&&(i&&kt.contains(r.ownerDocument,r)&&T(k(r,"script")),r.parentNode.removeChild(r));return t}function N(t,e,i){var r,n,o,s,a=t.style;return i=i||de(t),i&&(s=i.getPropertyValue(e)||i[e],""!==s||kt.contains(t.ownerDocument,t)||(s=kt.style(t,e)),!xt.pixelBoxStyles()&&fe.test(s)&&pe.test(e)&&(r=a.width,n=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=i.width,a.width=r,a.minWidth=n,a.maxWidth=o)),void 0!==s?s+"":s}function z(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function H(t){if(t in _e)return t;for(var e=t[0].toUpperCase()+t.slice(1),i=be.length;i--;)if((t=be[i]+e)in _e)return t}function G(t){var e=kt.cssProps[t];return e||(e=kt.cssProps[t]=H(t)||t),e}function U(t,e,i){var r=Vt.exec(e);return r?Math.max(0,r[2]-(i||0))+(r[3]||"px"):e}function X(t,e,i,r,n,o){var s="width"===e?1:0,a=0,l=0;if(i===(r?"border":"content"))return 0;for(;4>s;s+=2)"margin"===i&&(l+=kt.css(t,i+Jt[s],!0,n)),r?("content"===i&&(l-=kt.css(t,"padding"+Jt[s],!0,n)),"margin"!==i&&(l-=kt.css(t,"border"+Jt[s]+"Width",!0,n))):(l+=kt.css(t,"padding"+Jt[s],!0,n),"padding"!==i?l+=kt.css(t,"border"+Jt[s]+"Width",!0,n):a+=kt.css(t,"border"+Jt[s]+"Width",!0,n));return r||0>o||(l+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-o-l-a-.5))),l}function Y(t,e,i){var r=de(t),n=N(t,e,r),o="border-box"===kt.css(t,"boxSizing",!1,r),s=o;if(fe.test(n)){if(!i)return n;n="auto"}return s=s&&(xt.boxSizingReliable()||n===t.style[e]),("auto"===n||!parseFloat(n)&&"inline"===kt.css(t,"display",!1,r))&&(n=t["offset"+e[0].toUpperCase()+e.slice(1)],s=!0),(n=parseFloat(n)||0)+X(t,e,i||(o?"border":"content"),s,r,n)+"px"}function W(t,e,i,r,n){return new W.prototype.init(t,e,i,r,n)}function q(){we&&(!1===ct.hidden&&i.requestAnimationFrame?i.requestAnimationFrame(q):i.setTimeout(q,kt.fx.interval),kt.fx.tick())}function V(){return i.setTimeout(function(){xe=void 0}),xe=Date.now()}function J(t,e){var i,r=0,n={height:t};for(e=e?1:0;4>r;r+=2-e)i=Jt[r],n["margin"+i]=n["padding"+i]=t;return e&&(n.opacity=n.width=t),n}function K(t,e,i){for(var r,n=($.tweeners[e]||[]).concat($.tweeners["*"]),o=0,s=n.length;s>o;o++)if(r=n[o].call(i,e,t))return r}function Z(t,e,i){var r,n,o,s,a,l,h,c,u="width"in e||"height"in e,f=this,d={},p=t.style,g=t.nodeType&&Kt(t),v=Ut.get(t,"fxshow");i.queue||(s=kt._queueHooks(t,"fx"),null==s.unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,f.always(function(){f.always(function(){s.unqueued--,kt.queue(t,"fx").length||s.empty.fire()})}));for(r in e)if(n=e[r],Le.test(n)){if(delete e[r],o=o||"toggle"===n,n===(g?"hide":"show")){if("show"!==n||!v||void 0===v[r])continue;g=!0}d[r]=v&&v[r]||kt.style(t,r)}if((l=!kt.isEmptyObject(e))||!kt.isEmptyObject(d)){u&&1===t.nodeType&&(i.overflow=[p.overflow,p.overflowX,p.overflowY],h=v&&v.display,null==h&&(h=Ut.get(t,"display")),c=kt.css(t,"display"),"none"===c&&(h?c=h:(C([t],!0),h=t.style.display||h,c=kt.css(t,"display"),C([t]))),("inline"===c||"inline-block"===c&&null!=h)&&"none"===kt.css(t,"float")&&(l||(f.done(function(){p.display=h}),null==h&&(c=p.display,h="none"===c?"":c)),p.display="inline-block")),i.overflow&&(p.overflow="hidden",f.always(function(){p.overflow=i.overflow[0],p.overflowX=i.overflow[1],p.overflowY=i.overflow[2]})),l=!1;for(r in d)l||(v?"hidden"in v&&(g=v.hidden):v=Ut.access(t,"fxshow",{display:h}),o&&(v.hidden=!g),g&&C([t],!0),f.done(function(){g||C([t]),Ut.remove(t,"fxshow");for(r in d)kt.style(t,r,d[r])})),l=K(g?v[r]:0,r,f),r in v||(v[r]=l.start,g&&(l.end=l.start,l.start=0))}}function Q(t,e){var i,r,n,o,s;for(i in t)if(r=y(i),n=e[r],o=t[i],Array.isArray(o)&&(n=o[1],o=t[i]=o[0]),i!==r&&(t[r]=o,delete t[i]),(s=kt.cssHooks[r])&&"expand"in s){o=s.expand(o),delete t[r];for(i in o)i in t||(t[i]=o[i],e[i]=n)}else e[r]=n}function $(t,e,i){var r,n,o=0,s=$.prefilters.length,a=kt.Deferred().always(function(){delete l.elem}),l=function(){if(n)return!1;for(var e=xe||V(),i=Math.max(0,h.startTime+h.duration-e),r=i/h.duration||0,o=1-r,s=0,l=h.tweens.length;l>s;s++)h.tweens[s].run(o);return a.notifyWith(t,[h,o,i]),1>o&&l?i:(l||a.notifyWith(t,[h,1,0]),a.resolveWith(t,[h]),!1)},h=a.promise({elem:t,props:kt.extend({},e),opts:kt.extend(!0,{specialEasing:{},easing:kt.easing._default},i),originalProperties:e,originalOptions:i,startTime:xe||V(),duration:i.duration,tweens:[],createTween:function(e,i){var r=kt.Tween(t,h.opts,e,i,h.opts.specialEasing[e]||h.opts.easing);return h.tweens.push(r),r},stop:function(e){var i=0,r=e?h.tweens.length:0;if(n)return this;for(n=!0;r>i;i++)h.tweens[i].run(1);return e?(a.notifyWith(t,[h,1,0]),a.resolveWith(t,[h,e])):a.rejectWith(t,[h,e]),this}}),c=h.props;for(Q(c,h.opts.specialEasing);s>o;o++)if(r=$.prefilters[o].call(h,t,c,h.opts))return wt(r.stop)&&(kt._queueHooks(h.elem,h.opts.queue).stop=r.stop.bind(r)),r;return kt.map(c,K,h),wt(h.opts.start)&&h.opts.start.call(t,h),h.progress(h.opts.progress).done(h.opts.done,h.opts.complete).fail(h.opts.fail).always(h.opts.always),kt.fx.timer(kt.extend(l,{elem:t,anim:h,queue:h.opts.queue})),h}function tt(t){return(t.match(Rt)||[]).join(" ")}function et(t){return t.getAttribute&&t.getAttribute("class")||""}function it(t){return Array.isArray(t)?t:"string"==typeof t?t.match(Rt)||[]:[]}function rt(t,e,i,r){var n;if(Array.isArray(e))kt.each(e,function(e,n){i||Ie.test(t)?r(t,n):rt(t+"["+("object"==typeof n&&null!=n?e:"")+"]",n,i,r)});else if(i||"object"!==a(e))r(t,e);else for(n in e)rt(t+"["+n+"]",e[n],i,r)}function nt(t){return function(e,i){"string"!=typeof e&&(i=e,e="*");var r,n=0,o=e.toLowerCase().match(Rt)||[];if(wt(i))for(;r=o[n++];)"+"===r[0]?(r=r.slice(1)||"*",(t[r]=t[r]||[]).unshift(i)):(t[r]=t[r]||[]).push(i)}}function ot(t,e,i,r){function n(a){var l;return o[a]=!0,kt.each(t[a]||[],function(t,a){var h=a(e,i,r);return"string"!=typeof h||s||o[h]?s?!(l=h):void 0:(e.dataTypes.unshift(h),n(h),!1)}),l}var o={},s=t===qe;return n(e.dataTypes[0])||!o["*"]&&n("*")}function st(t,e){var i,r,n=kt.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((n[i]?t:r||(r={}))[i]=e[i]);return r&&kt.extend(!0,t,r),t}function at(t,e,i){for(var r,n,o,s,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(n in a)if(a[n]&&a[n].test(r)){l.unshift(n);break}if(l[0]in i)o=l[0];else{for(n in i){if(!l[0]||t.converters[n+" "+l[0]]){o=n;break}s||(s=n)}o=o||s}if(o)return o!==l[0]&&l.unshift(o),i[o]}function lt(t,e,i,r){var n,o,s,a,l,h={},c=t.dataTypes.slice();if(c[1])for(s in t.converters)h[s.toLowerCase()]=t.converters[s];for(o=c.shift();o;)if(t.responseFields[o]&&(i[t.responseFields[o]]=e),!l&&r&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(s=h[l+" "+o]||h["* "+o]))for(n in h)if(a=n.split(" "),a[1]===o&&(s=h[l+" "+a[0]]||h["* "+a[0]])){!0===s?s=h[n]:!0!==h[n]&&(o=a[0],c.unshift(a[1]));break}if(!0!==s)if(s&&t.throws)e=s(e);else try{e=s(e)}catch(t){return{state:"parsererror",error:s?t:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}var ht=[],ct=i.document,ut=Object.getPrototypeOf,ft=ht.slice,dt=ht.concat,pt=ht.push,gt=ht.indexOf,vt={},mt=vt.toString,yt=vt.hasOwnProperty,bt=yt.toString,_t=bt.call(Object),xt={},wt=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType},Lt=function(t){return null!=t&&t===t.window},Ct={type:!0,src:!0,noModule:!0},kt=function(t,e){return new kt.fn.init(t,e)},Tt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;kt.fn=kt.prototype={jquery:"3.3.1",constructor:kt,length:0,toArray:function(){return ft.call(this)},get:function(t){return null==t?ft.call(this):0>t?this[t+this.length]:this[t]},pushStack:function(t){var e=kt.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return kt.each(this,t)},map:function(t){return this.pushStack(kt.map(this,function(e,i){return t.call(e,i,e)}))},slice:function(){return this.pushStack(ft.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,i=+t+(0>t?e:0);return this.pushStack(i>=0&&e>i?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:pt,sort:ht.sort,splice:ht.splice},kt.extend=kt.fn.extend=function(){var t,e,i,r,n,o,s=arguments[0]||{},a=1,l=arguments.length,h=!1;for("boolean"==typeof s&&(h=s,s=arguments[a]||{},a++),"object"==typeof s||wt(s)||(s={}),a===l&&(s=this,a--);l>a;a++)if(null!=(t=arguments[a]))for(e in t)i=s[e],r=t[e],s!==r&&(h&&r&&(kt.isPlainObject(r)||(n=Array.isArray(r)))?(n?(n=!1,o=i&&Array.isArray(i)?i:[]):o=i&&kt.isPlainObject(i)?i:{},s[e]=kt.extend(h,o,r)):void 0!==r&&(s[e]=r));return s},kt.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw Error(t)},noop:function(){},isPlainObject:function(t){var e,i;return!(!t||"[object Object]"!==mt.call(t))&&(!(e=ut(t))||"function"==typeof(i=yt.call(e,"constructor")&&e.constructor)&&bt.call(i)===_t)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t){s(t)},each:function(t,e){var i,r=0;if(l(t))for(i=t.length;i>r&&!1!==e.call(t[r],r,t[r]);r++);else for(r in t)if(!1===e.call(t[r],r,t[r]))break;return t},trim:function(t){return null==t?"":(t+"").replace(Tt,"")},makeArray:function(t,e){var i=e||[];return null!=t&&(l(Object(t))?kt.merge(i,"string"==typeof t?[t]:t):pt.call(i,t)),i},inArray:function(t,e,i){return null==e?-1:gt.call(e,t,i)},merge:function(t,e){for(var i=+e.length,r=0,n=t.length;i>r;r++)t[n++]=e[r];return t.length=n,t},grep:function(t,e,i){for(var r=[],n=0,o=t.length,s=!i;o>n;n++)!e(t[n],n)!==s&&r.push(t[n]);return r},map:function(t,e,i){var r,n,o=0,s=[];if(l(t))for(r=t.length;r>o;o++)null!=(n=e(t[o],o,i))&&s.push(n);else for(o in t)null!=(n=e(t[o],o,i))&&s.push(n);return dt.apply([],s)},guid:1,support:xt}),"function"==typeof Symbol&&(kt.fn[Symbol.iterator]=ht[Symbol.iterator]),kt.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){vt["[object "+e+"]"]=e.toLowerCase()});var Ot=/*!
 * Sizzle CSS Selector Engine v2.3.3
 * https://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2016-08-08
 */
function(t){function e(t,e,i,r){var n,o,s,a,l,c,f,d=e&&e.ownerDocument,p=e?e.nodeType:9;if(i=i||[],"string"!=typeof t||!t||1!==p&&9!==p&&11!==p)return i;if(!r&&((e?e.ownerDocument||e:N)!==P&&M(e),e=e||P,A)){if(11!==p&&(l=gt.exec(t)))if(n=l[1]){if(9===p){if(!(s=e.getElementById(n)))return i;if(s.id===n)return i.push(s),i}else if(d&&(s=d.getElementById(n))&&B(e,s)&&s.id===n)return i.push(s),i}else{if(l[2])return K.apply(i,e.getElementsByTagName(t)),i;if((n=l[3])&&_.getElementsByClassName&&e.getElementsByClassName)return K.apply(i,e.getElementsByClassName(n)),i}if(_.qsa&&!X[t+" "]&&(!j||!j.test(t))){if(1!==p)d=e,f=t;else if("object"!==e.nodeName.toLowerCase()){for((a=e.getAttribute("id"))?a=a.replace(bt,_t):e.setAttribute("id",a=F),c=C(t),o=c.length;o--;)c[o]="#"+a+" "+u(c[o]);f=c.join(","),d=vt.test(t)&&h(e.parentNode)||e}if(f)try{return K.apply(i,d.querySelectorAll(f)),i}catch(t){}finally{a===F&&e.removeAttribute("id")}}}return T(t.replace(ot,"$1"),e,i,r)}function i(){function t(i,r){return e.push(i+" ")>x.cacheLength&&delete t[e.shift()],t[i+" "]=r}var e=[];return t}function r(t){return t[F]=!0,t}function n(t){var e=P.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function o(t,e){for(var i=t.split("|"),r=i.length;r--;)x.attrHandle[i[r]]=e}function s(t,e){var i=e&&t,r=i&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(r)return r;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function a(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&wt(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function l(t){return r(function(e){return e=+e,r(function(i,r){for(var n,o=t([],i.length,e),s=o.length;s--;)i[n=o[s]]&&(i[n]=!(r[n]=i[n]))})})}function h(t){return t&&void 0!==t.getElementsByTagName&&t}function c(){}function u(t){for(var e=0,i=t.length,r="";i>e;e++)r+=t[e].value;return r}function f(t,e,i){var r=e.dir,n=e.next,o=n||r,s=i&&"parentNode"===o,a=H++;return e.first?function(e,i,n){for(;e=e[r];)if(1===e.nodeType||s)return t(e,i,n);return!1}:function(e,i,l){var h,c,u,f=[z,a];if(l){for(;e=e[r];)if((1===e.nodeType||s)&&t(e,i,l))return!0}else for(;e=e[r];)if(1===e.nodeType||s)if(u=e[F]||(e[F]={}),c=u[e.uniqueID]||(u[e.uniqueID]={}),n&&n===e.nodeName.toLowerCase())e=e[r]||e;else{if((h=c[o])&&h[0]===z&&h[1]===a)return f[2]=h[2];if(c[o]=f,f[2]=t(e,i,l))return!0}return!1}}function d(t){return t.length>1?function(e,i,r){for(var n=t.length;n--;)if(!t[n](e,i,r))return!1;return!0}:t[0]}function p(t,i,r){for(var n=0,o=i.length;o>n;n++)e(t,i[n],r);return r}function g(t,e,i,r,n){for(var o,s=[],a=0,l=t.length,h=null!=e;l>a;a++)(o=t[a])&&(i&&!i(o,r,n)||(s.push(o),h&&e.push(a)));return s}function v(t,e,i,n,o,s){return n&&!n[F]&&(n=v(n)),o&&!o[F]&&(o=v(o,s)),r(function(r,s,a,l){var h,c,u,f=[],d=[],v=s.length,m=r||p(e||"*",a.nodeType?[a]:a,[]),y=!t||!r&&e?m:g(m,f,t,a,l),b=i?o||(r?t:v||n)?[]:s:y;if(i&&i(y,b,a,l),n)for(h=g(b,d),n(h,[],a,l),c=h.length;c--;)(u=h[c])&&(b[d[c]]=!(y[d[c]]=u));if(r){if(o||t){if(o){for(h=[],c=b.length;c--;)(u=b[c])&&h.push(y[c]=u);o(null,b=[],h,l)}for(c=b.length;c--;)(u=b[c])&&(h=o?Q(r,u):f[c])>-1&&(r[h]=!(s[h]=u))}}else b=g(b===s?b.splice(v,b.length):b),o?o(null,s,b,l):K.apply(s,b)})}function m(t){for(var e,i,r,n=t.length,o=x.relative[t[0].type],s=o||x.relative[" "],a=o?1:0,l=f(function(t){return t===e},s,!0),h=f(function(t){return Q(e,t)>-1},s,!0),c=[function(t,i,r){var n=!o&&(r||i!==O)||((e=i).nodeType?l(t,i,r):h(t,i,r));return e=null,n}];n>a;a++)if(i=x.relative[t[a].type])c=[f(d(c),i)];else{if(i=x.filter[t[a].type].apply(null,t[a].matches),i[F]){for(r=++a;n>r&&!x.relative[t[r].type];r++);return v(a>1&&d(c),a>1&&u(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(ot,"$1"),i,r>a&&m(t.slice(a,r)),n>r&&m(t=t.slice(r)),n>r&&u(t))}c.push(i)}return d(c)}function y(t,i){var n=i.length>0,o=t.length>0,s=function(r,s,a,l,h){var c,u,f,d=0,p="0",v=r&&[],m=[],y=O,b=r||o&&x.find.TAG("*",h),_=z+=null==y?1:Math.random()||.1,w=b.length;for(h&&(O=s===P||s||h);p!==w&&null!=(c=b[p]);p++){if(o&&c){for(u=0,s||c.ownerDocument===P||(M(c),a=!A);f=t[u++];)if(f(c,s||P,a)){l.push(c);break}h&&(z=_)}n&&((c=!f&&c)&&d--,r&&v.push(c))}if(d+=p,n&&p!==d){for(u=0;f=i[u++];)f(v,m,s,a);if(r){if(d>0)for(;p--;)v[p]||m[p]||(m[p]=V.call(l));m=g(m)}K.apply(l,m),h&&!r&&m.length>0&&d+i.length>1&&e.uniqueSort(l)}return h&&(z=_,O=y),v};return n?r(s):s}var b,_,x,w,L,C,k,T,O,E,S,M,P,D,A,j,I,R,B,F="sizzle"+1*new Date,N=t.document,z=0,H=0,G=i(),U=i(),X=i(),Y=function(t,e){return t===e&&(S=!0),0},W={}.hasOwnProperty,q=[],V=q.pop,J=q.push,K=q.push,Z=q.slice,Q=function(t,e){for(var i=0,r=t.length;r>i;i++)if(t[i]===e)return i;return-1},$="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",tt="[\\x20\\t\\r\\n\\f]",et="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",it="\\["+tt+"*("+et+")(?:"+tt+"*([*^$|!~]?=)"+tt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+et+"))|)"+tt+"*\\]",rt=":("+et+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+it+")*)|.*)\\)|)",nt=RegExp(tt+"+","g"),ot=RegExp("^"+tt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+tt+"+$","g"),st=RegExp("^"+tt+"*,"+tt+"*"),at=RegExp("^"+tt+"*([>+~]|"+tt+")"+tt+"*"),lt=RegExp("="+tt+"*([^\\]'\"]*?)"+tt+"*\\]","g"),ht=RegExp(rt),ct=RegExp("^"+et+"$"),ut={ID:RegExp("^#("+et+")"),CLASS:RegExp("^\\.("+et+")"),TAG:RegExp("^("+et+"|[*])"),ATTR:RegExp("^"+it),PSEUDO:RegExp("^"+rt),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+tt+"*(even|odd|(([+-]|)(\\d*)n|)"+tt+"*(?:([+-]|)"+tt+"*(\\d+)|))"+tt+"*\\)|)","i"),bool:RegExp("^(?:"+$+")$","i"),needsContext:RegExp("^"+tt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+tt+"*((?:-\\d)?\\d*)"+tt+"*\\)|)(?=[^-]|$)","i")},ft=/^(?:input|select|textarea|button)$/i,dt=/^h\d$/i,pt=/^[^{]+\{\s*\[native \w/,gt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,vt=/[+~]/,mt=RegExp("\\\\([\\da-f]{1,6}"+tt+"?|("+tt+")|.)","ig"),yt=function(t,e,i){var r="0x"+e-65536;return r!==r||i?e:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},bt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,_t=function(t,e){return e?"\0"===t?"":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},xt=function(){M()},wt=f(function(t){return!0===t.disabled&&("form"in t||"label"in t)},{dir:"parentNode",next:"legend"});try{K.apply(q=Z.call(N.childNodes),N.childNodes)}catch(t){K={apply:q.length?function(t,e){J.apply(t,Z.call(e))}:function(t,e){for(var i=t.length,r=0;t[i++]=e[r++];);t.length=i-1}}}_=e.support={},L=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},M=e.setDocument=function(t){var e,i,r=t?t.ownerDocument||t:N;return r!==P&&9===r.nodeType&&r.documentElement?(P=r,D=P.documentElement,A=!L(P),N!==P&&(i=P.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",xt,!1):i.attachEvent&&i.attachEvent("onunload",xt)),_.attributes=n(function(t){return t.className="i",!t.getAttribute("className")}),_.getElementsByTagName=n(function(t){return t.appendChild(P.createComment("")),!t.getElementsByTagName("*").length}),_.getElementsByClassName=pt.test(P.getElementsByClassName),_.getById=n(function(t){return D.appendChild(t).id=F,!P.getElementsByName||!P.getElementsByName(F).length}),_.getById?(x.filter.ID=function(t){var e=t.replace(mt,yt);return function(t){return t.getAttribute("id")===e}},x.find.ID=function(t,e){if(void 0!==e.getElementById&&A){var i=e.getElementById(t);return i?[i]:[]}}):(x.filter.ID=function(t){var e=t.replace(mt,yt);return function(t){var i=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return i&&i.value===e}},x.find.ID=function(t,e){if(void 0!==e.getElementById&&A){var i,r,n,o=e.getElementById(t);if(o){if((i=o.getAttributeNode("id"))&&i.value===t)return[o];for(n=e.getElementsByName(t),r=0;o=n[r++];)if((i=o.getAttributeNode("id"))&&i.value===t)return[o]}return[]}}),x.find.TAG=_.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):_.qsa?e.querySelectorAll(t):void 0}:function(t,e){var i,r=[],n=0,o=e.getElementsByTagName(t);if("*"===t){for(;i=o[n++];)1===i.nodeType&&r.push(i);return r}return o},x.find.CLASS=_.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&A)return e.getElementsByClassName(t)},I=[],j=[],(_.qsa=pt.test(P.querySelectorAll))&&(n(function(t){D.appendChild(t).innerHTML="<a id='"+F+"'></a><select id='"+F+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&j.push("[*^$]="+tt+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||j.push("\\["+tt+"*(?:value|"+$+")"),t.querySelectorAll("[id~="+F+"-]").length||j.push("~="),t.querySelectorAll(":checked").length||j.push(":checked"),t.querySelectorAll("a#"+F+"+*").length||j.push(".#.+[+~]")}),n(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=P.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&j.push("name"+tt+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&j.push(":enabled",":disabled"),D.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&j.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),j.push(",.*:")})),(_.matchesSelector=pt.test(R=D.matches||D.webkitMatchesSelector||D.mozMatchesSelector||D.oMatchesSelector||D.msMatchesSelector))&&n(function(t){_.disconnectedMatch=R.call(t,"*"),R.call(t,"[s!='']:x"),I.push("!=",rt)}),j=j.length&&RegExp(j.join("|")),I=I.length&&RegExp(I.join("|")),e=pt.test(D.compareDocumentPosition),B=e||pt.test(D.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,r=e&&e.parentNode;return t===r||!(!r||1!==r.nodeType||!(i.contains?i.contains(r):t.compareDocumentPosition&&16&t.compareDocumentPosition(r)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},Y=e?function(t,e){if(t===e)return S=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i||(i=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&i||!_.sortDetached&&e.compareDocumentPosition(t)===i?t===P||t.ownerDocument===N&&B(N,t)?-1:e===P||e.ownerDocument===N&&B(N,e)?1:E?Q(E,t)-Q(E,e):0:4&i?-1:1)}:function(t,e){if(t===e)return S=!0,0;var i,r=0,n=t.parentNode,o=e.parentNode,a=[t],l=[e];if(!n||!o)return t===P?-1:e===P?1:n?-1:o?1:E?Q(E,t)-Q(E,e):0;if(n===o)return s(t,e);for(i=t;i=i.parentNode;)a.unshift(i);for(i=e;i=i.parentNode;)l.unshift(i);for(;a[r]===l[r];)r++;return r?s(a[r],l[r]):a[r]===N?-1:l[r]===N?1:0},P):P},e.matches=function(t,i){return e(t,null,null,i)},e.matchesSelector=function(t,i){if((t.ownerDocument||t)!==P&&M(t),i=i.replace(lt,"='$1']"),_.matchesSelector&&A&&!X[i+" "]&&(!I||!I.test(i))&&(!j||!j.test(i)))try{var r=R.call(t,i);if(r||_.disconnectedMatch||t.document&&11!==t.document.nodeType)return r}catch(t){}return e(i,P,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==P&&M(t),B(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==P&&M(t);var i=x.attrHandle[e.toLowerCase()],r=i&&W.call(x.attrHandle,e.toLowerCase())?i(t,e,!A):void 0;return void 0!==r?r:_.attributes||!A?t.getAttribute(e):(r=t.getAttributeNode(e))&&r.specified?r.value:null},e.escape=function(t){return(t+"").replace(bt,_t)},e.error=function(t){throw Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,i=[],r=0,n=0;if(S=!_.detectDuplicates,E=!_.sortStable&&t.slice(0),t.sort(Y),S){for(;e=t[n++];)e===t[n]&&(r=i.push(n));for(;r--;)t.splice(i[r],1)}return E=null,t},w=e.getText=function(t){var e,i="",r=0,n=t.nodeType;if(n){if(1===n||9===n||11===n){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=w(t)}else if(3===n||4===n)return t.nodeValue}else for(;e=t[r++];)i+=w(e);return i},x=e.selectors={cacheLength:50,createPseudo:r,match:ut,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(mt,yt),t[3]=(t[3]||t[4]||t[5]||"").replace(mt,yt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,i=!t[6]&&t[2];return ut.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&ht.test(i)&&(e=C(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(mt,yt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=G[t+" "];return e||(e=RegExp("(^|"+tt+")"+t+"("+tt+"|$)"))&&G(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,i,r){return function(n){var o=e.attr(n,t);return null==o?"!="===i:!i||(o+="","="===i?o===r:"!="===i?o!==r:"^="===i?r&&0===o.indexOf(r):"*="===i?r&&o.indexOf(r)>-1:"$="===i?r&&o.slice(-r.length)===r:"~="===i?(" "+o.replace(nt," ")+" ").indexOf(r)>-1:"|="===i&&(o===r||o.slice(0,r.length+1)===r+"-"))}},CHILD:function(t,e,i,r,n){var o="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===r&&0===n?function(t){return!!t.parentNode}:function(e,i,l){var h,c,u,f,d,p,g=o!==s?"nextSibling":"previousSibling",v=e.parentNode,m=a&&e.nodeName.toLowerCase(),y=!l&&!a,b=!1;if(v){if(o){for(;g;){for(f=e;f=f[g];)if(a?f.nodeName.toLowerCase()===m:1===f.nodeType)return!1;p=g="only"===t&&!p&&"nextSibling"}return!0}if(p=[s?v.firstChild:v.lastChild],s&&y){for(f=v,u=f[F]||(f[F]={}),c=u[f.uniqueID]||(u[f.uniqueID]={}),h=c[t]||[],d=h[0]===z&&h[1],b=d&&h[2],f=d&&v.childNodes[d];f=++d&&f&&f[g]||(b=d=0)||p.pop();)if(1===f.nodeType&&++b&&f===e){c[t]=[z,d,b];break}}else if(y&&(f=e,u=f[F]||(f[F]={}),c=u[f.uniqueID]||(u[f.uniqueID]={}),h=c[t]||[],d=h[0]===z&&h[1],b=d),!1===b)for(;(f=++d&&f&&f[g]||(b=d=0)||p.pop())&&((a?f.nodeName.toLowerCase()!==m:1!==f.nodeType)||!++b||(y&&(u=f[F]||(f[F]={}),c=u[f.uniqueID]||(u[f.uniqueID]={}),c[t]=[z,b]),f!==e)););return(b-=n)===r||b%r==0&&b/r>=0}}},PSEUDO:function(t,i){var n,o=x.pseudos[t]||x.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return o[F]?o(i):o.length>1?(n=[t,t,"",i],x.setFilters.hasOwnProperty(t.toLowerCase())?r(function(t,e){for(var r,n=o(t,i),s=n.length;s--;)r=Q(t,n[s]),t[r]=!(e[r]=n[s])}):function(t){return o(t,0,n)}):o}},pseudos:{not:r(function(t){var e=[],i=[],n=k(t.replace(ot,"$1"));return n[F]?r(function(t,e,i,r){for(var o,s=n(t,null,r,[]),a=t.length;a--;)(o=s[a])&&(t[a]=!(e[a]=o))}):function(t,r,o){return e[0]=t,n(e,null,o,i),e[0]=null,!i.pop()}}),has:r(function(t){return function(i){return e(t,i).length>0}}),contains:r(function(t){return t=t.replace(mt,yt),function(e){return(e.textContent||e.innerText||w(e)).indexOf(t)>-1}}),lang:r(function(t){return ct.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(mt,yt).toLowerCase(),function(e){var i;do{if(i=A?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(i=i.toLowerCase())===t||0===i.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var i=t.location&&t.location.hash;return i&&i.slice(1)===e.id},root:function(t){return t===D},focus:function(t){return t===P.activeElement&&(!P.hasFocus||P.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:a(!1),disabled:a(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(6>t.nodeType)return!1;return!0},parent:function(t){return!x.pseudos.empty(t)},header:function(t){return dt.test(t.nodeName)},input:function(t){return ft.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:l(function(){return[0]}),last:l(function(t,e){return[e-1]}),eq:l(function(t,e,i){return[0>i?i+e:i]}),even:l(function(t,e){for(var i=0;e>i;i+=2)t.push(i);return t}),odd:l(function(t,e){for(var i=1;e>i;i+=2)t.push(i);return t}),lt:l(function(t,e,i){for(var r=0>i?i+e:i;--r>=0;)t.push(r);return t}),gt:l(function(t,e,i){for(var r=0>i?i+e:i;++r<e;)t.push(r);return t})}},x.pseudos.nth=x.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[b]=function(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}(b);for(b in{submit:!0,reset:!0})x.pseudos[b]=function(t){return function(e){var i=e.nodeName.toLowerCase();return("input"===i||"button"===i)&&e.type===t}}(b);return c.prototype=x.filters=x.pseudos,x.setFilters=new c,C=e.tokenize=function(t,i){var r,n,o,s,a,l,h,c=U[t+" "];if(c)return i?0:c.slice(0);for(a=t,l=[],h=x.preFilter;a;){r&&!(n=st.exec(a))||(n&&(a=a.slice(n[0].length)||a),l.push(o=[])),r=!1,(n=at.exec(a))&&(r=n.shift(),o.push({value:r,type:n[0].replace(ot," ")}),a=a.slice(r.length));for(s in x.filter)!(n=ut[s].exec(a))||h[s]&&!(n=h[s](n))||(r=n.shift(),o.push({value:r,type:s,matches:n}),a=a.slice(r.length));if(!r)break}return i?a.length:a?e.error(t):U(t,l).slice(0)},k=e.compile=function(t,e){var i,r=[],n=[],o=X[t+" "];if(!o){for(e||(e=C(t)),i=e.length;i--;)o=m(e[i]),o[F]?r.push(o):n.push(o);o=X(t,y(n,r)),o.selector=t}return o},T=e.select=function(t,e,i,r){var n,o,s,a,l,c="function"==typeof t&&t,f=!r&&C(t=c.selector||t);if(i=i||[],1===f.length){if(o=f[0]=f[0].slice(0),o.length>2&&"ID"===(s=o[0]).type&&9===e.nodeType&&A&&x.relative[o[1].type]){if(!(e=(x.find.ID(s.matches[0].replace(mt,yt),e)||[])[0]))return i;c&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(n=ut.needsContext.test(t)?0:o.length;n--&&(s=o[n],!x.relative[a=s.type]);)if((l=x.find[a])&&(r=l(s.matches[0].replace(mt,yt),vt.test(o[0].type)&&h(e.parentNode)||e))){if(o.splice(n,1),!(t=r.length&&u(o)))return K.apply(i,r),i;break}}return(c||k(t,f))(r,e,!A,i,!e||vt.test(t)&&h(e.parentNode)||e),i},_.sortStable=F.split("").sort(Y).join("")===F,_.detectDuplicates=!!S,M(),_.sortDetached=n(function(t){return 1&t.compareDocumentPosition(P.createElement("fieldset"))}),n(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||o("type|href|height|width",function(t,e,i){if(!i)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),_.attributes&&n(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||o("value",function(t,e,i){if(!i&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),n(function(t){return null==t.getAttribute("disabled")})||o($,function(t,e,i){var r;if(!i)return!0===t[e]?e.toLowerCase():(r=t.getAttributeNode(e))&&r.specified?r.value:null}),e}(i);kt.find=Ot,kt.expr=Ot.selectors,kt.expr[":"]=kt.expr.pseudos,kt.uniqueSort=kt.unique=Ot.uniqueSort,kt.text=Ot.getText,kt.isXMLDoc=Ot.isXML,kt.contains=Ot.contains,kt.escapeSelector=Ot.escape;var Et=function(t,e,i){for(var r=[],n=void 0!==i;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(n&&kt(t).is(i))break;r.push(t)}return r},St=function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i},Mt=kt.expr.match.needsContext,Pt=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;kt.filter=function(t,e,i){var r=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===r.nodeType?kt.find.matchesSelector(r,t)?[r]:[]:kt.find.matches(t,kt.grep(e,function(t){return 1===t.nodeType}))},kt.fn.extend({find:function(t){var e,i,r=this.length,n=this;if("string"!=typeof t)return this.pushStack(kt(t).filter(function(){for(e=0;r>e;e++)if(kt.contains(n[e],this))return!0}));for(i=this.pushStack([]),e=0;r>e;e++)kt.find(t,n[e],i);return r>1?kt.uniqueSort(i):i},filter:function(t){return this.pushStack(c(this,t||[],!1))},not:function(t){return this.pushStack(c(this,t||[],!0))},is:function(t){return!!c(this,"string"==typeof t&&Mt.test(t)?kt(t):t||[],!1).length}});var Dt,At=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(kt.fn.init=function(t,e,i){var r,n;if(!t)return this;if(i=i||Dt,"string"==typeof t){if(!(r="<"!==t[0]||">"!==t[t.length-1]||3>t.length?At.exec(t):[null,t,null])||!r[1]&&e)return!e||e.jquery?(e||i).find(t):this.constructor(e).find(t);if(r[1]){if(e=e instanceof kt?e[0]:e,kt.merge(this,kt.parseHTML(r[1],e&&e.nodeType?e.ownerDocument||e:ct,!0)),Pt.test(r[1])&&kt.isPlainObject(e))for(r in e)wt(this[r])?this[r](e[r]):this.attr(r,e[r]);return this}return n=ct.getElementById(r[2]),n&&(this[0]=n,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):wt(t)?void 0!==i.ready?i.ready(t):t(kt):kt.makeArray(t,this)}).prototype=kt.fn,Dt=kt(ct);var jt=/^(?:parents|prev(?:Until|All))/,It={children:!0,contents:!0,next:!0,prev:!0};kt.fn.extend({has:function(t){var e=kt(t,this),i=e.length;return this.filter(function(){for(var t=0;i>t;t++)if(kt.contains(this,e[t]))return!0})},closest:function(t,e){var i,r=0,n=this.length,o=[],s="string"!=typeof t&&kt(t);if(!Mt.test(t))for(;n>r;r++)for(i=this[r];i&&i!==e;i=i.parentNode)if(11>i.nodeType&&(s?s.index(i)>-1:1===i.nodeType&&kt.find.matchesSelector(i,t))){o.push(i);break}return this.pushStack(o.length>1?kt.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?gt.call(kt(t),this[0]):gt.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(kt.uniqueSort(kt.merge(this.get(),kt(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),kt.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return Et(t,"parentNode")},parentsUntil:function(t,e,i){return Et(t,"parentNode",i)},next:function(t){return u(t,"nextSibling")},prev:function(t){return u(t,"previousSibling")},nextAll:function(t){return Et(t,"nextSibling")},prevAll:function(t){return Et(t,"previousSibling")},nextUntil:function(t,e,i){return Et(t,"nextSibling",i)},prevUntil:function(t,e,i){return Et(t,"previousSibling",i)},siblings:function(t){return St((t.parentNode||{}).firstChild,t)},children:function(t){return St(t.firstChild)},contents:function(t){return h(t,"iframe")?t.contentDocument:(h(t,"template")&&(t=t.content||t),kt.merge([],t.childNodes))}},function(t,e){kt.fn[t]=function(i,r){var n=kt.map(this,e,i);return"Until"!==t.slice(-5)&&(r=i),r&&"string"==typeof r&&(n=kt.filter(r,n)),this.length>1&&(It[t]||kt.uniqueSort(n),jt.test(t)&&n.reverse()),this.pushStack(n)}});var Rt=/[^\x20\t\r\n\f]+/g;kt.Callbacks=function(t){t="string"==typeof t?f(t):kt.extend({},t);var e,i,r,n,o=[],s=[],l=-1,h=function(){for(n=n||t.once,r=e=!0;s.length;l=-1)for(i=s.shift();++l<o.length;)!1===o[l].apply(i[0],i[1])&&t.stopOnFalse&&(l=o.length,i=!1);t.memory||(i=!1),e=!1,n&&(o=i?[]:"")},c={add:function(){return o&&(i&&!e&&(l=o.length-1,s.push(i)),function e(i){kt.each(i,function(i,r){wt(r)?t.unique&&c.has(r)||o.push(r):r&&r.length&&"string"!==a(r)&&e(r)})}(arguments),i&&!e&&h()),this},remove:function(){return kt.each(arguments,function(t,e){for(var i;(i=kt.inArray(e,o,i))>-1;)o.splice(i,1),i>l||l--}),this},has:function(t){return t?kt.inArray(t,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return n=s=[],o=i="",this},disabled:function(){return!o},lock:function(){return n=s=[],i||e||(o=i=""),this},locked:function(){return!!n},fireWith:function(t,i){return n||(i=i||[],i=[t,i.slice?i.slice():i],s.push(i),e||h()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},kt.extend({Deferred:function(t){var e=[["notify","progress",kt.Callbacks("memory"),kt.Callbacks("memory"),2],["resolve","done",kt.Callbacks("once memory"),kt.Callbacks("once memory"),0,"resolved"],["reject","fail",kt.Callbacks("once memory"),kt.Callbacks("once memory"),1,"rejected"]],r="pending",n={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},catch:function(t){return n.then(null,t)},pipe:function(){var t=arguments;return kt.Deferred(function(i){kt.each(e,function(e,r){var n=wt(t[r[4]])&&t[r[4]];o[r[1]](function(){var t=n&&n.apply(this,arguments);t&&wt(t.promise)?t.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[r[0]+"With"](this,n?[t]:arguments)})}),t=null}).promise()},then:function(t,r,n){function o(t,e,r,n){return function(){var a=this,l=arguments,h=function(){var i,h;if(t>=s){if((i=r.apply(a,l))===e.promise())throw new TypeError("Thenable self-resolution");h=i&&("object"==typeof i||"function"==typeof i)&&i.then,wt(h)?n?h.call(i,o(s,e,d,n),o(s,e,p,n)):(s++,h.call(i,o(s,e,d,n),o(s,e,p,n),o(s,e,d,e.notifyWith))):(r!==d&&(a=void 0,l=[i]),(n||e.resolveWith)(a,l))}},c=n?h:function(){try{h()}catch(i){kt.Deferred.exceptionHook&&kt.Deferred.exceptionHook(i,c.stackTrace),s>t+1||(r!==p&&(a=void 0,l=[i]),e.rejectWith(a,l))}};t?c():(kt.Deferred.getStackHook&&(c.stackTrace=kt.Deferred.getStackHook()),i.setTimeout(c))}}var s=0;return kt.Deferred(function(i){e[0][3].add(o(0,i,wt(n)?n:d,i.notifyWith)),e[1][3].add(o(0,i,wt(t)?t:d)),e[2][3].add(o(0,i,wt(r)?r:p))}).promise()},promise:function(t){return null!=t?kt.extend(t,n):n}},o={};return kt.each(e,function(t,i){var s=i[2],a=i[5];n[i[1]]=s.add,a&&s.add(function(){r=a},e[3-t][2].disable,e[3-t][3].disable,e[0][2].lock,e[0][3].lock),s.add(i[3].fire),o[i[0]]=function(){return o[i[0]+"With"](this===o?void 0:this,arguments),this},o[i[0]+"With"]=s.fireWith}),n.promise(o),t&&t.call(o,o),o},when:function(t){var e=arguments.length,i=e,r=Array(i),n=ft.call(arguments),o=kt.Deferred(),s=function(t){return function(i){r[t]=this,n[t]=arguments.length>1?ft.call(arguments):i,--e||o.resolveWith(r,n)}};if(1>=e&&(g(t,o.done(s(i)).resolve,o.reject,!e),"pending"===o.state()||wt(n[i]&&n[i].then)))return o.then();for(;i--;)g(n[i],s(i),o.reject);return o.promise()}});var Bt=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;kt.Deferred.exceptionHook=function(t,e){i.console&&i.console.warn&&t&&Bt.test(t.name)&&i.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},kt.readyException=function(t){i.setTimeout(function(){throw t})};var Ft=kt.Deferred();kt.fn.ready=function(t){return Ft.then(t).catch(function(t){kt.readyException(t)}),this},kt.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--kt.readyWait:kt.isReady)||(kt.isReady=!0,!0!==t&&--kt.readyWait>0||Ft.resolveWith(ct,[kt]))}}),kt.ready.then=Ft.then,"complete"===ct.readyState||"loading"!==ct.readyState&&!ct.documentElement.doScroll?i.setTimeout(kt.ready):(ct.addEventListener("DOMContentLoaded",v),i.addEventListener("load",v));var Nt=function(t,e,i,r,n,o,s){var l=0,h=t.length,c=null==i;if("object"===a(i)){n=!0;for(l in i)Nt(t,e,l,i[l],!0,o,s)}else if(void 0!==r&&(n=!0,wt(r)||(s=!0),c&&(s?(e.call(t,r),e=null):(c=e,e=function(t,e,i){return c.call(kt(t),i)})),e))for(;h>l;l++)e(t[l],i,s?r:r.call(t[l],l,e(t[l],i)));return n?t:c?e.call(t):h?e(t[0],i):o},zt=/^-ms-/,Ht=/-([a-z])/g,Gt=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};b.uid=1,b.prototype={cache:function(t){var e=t[this.expando];return e||(e={},Gt(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,i){var r,n=this.cache(t);if("string"==typeof e)n[y(e)]=i;else for(r in e)n[y(r)]=e[r];return n},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][y(e)]},access:function(t,e,i){return void 0===e||e&&"string"==typeof e&&void 0===i?this.get(t,e):(this.set(t,e,i),void 0!==i?i:e)},remove:function(t,e){var i,r=t[this.expando];if(void 0!==r){if(void 0!==e){Array.isArray(e)?e=e.map(y):(e=y(e),e=e in r?[e]:e.match(Rt)||[]),i=e.length;for(;i--;)delete r[e[i]]}(void 0===e||kt.isEmptyObject(r))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!kt.isEmptyObject(e)}};var Ut=new b,Xt=new b,Yt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Wt=/[A-Z]/g;kt.extend({hasData:function(t){return Xt.hasData(t)||Ut.hasData(t)},data:function(t,e,i){return Xt.access(t,e,i)},removeData:function(t,e){Xt.remove(t,e)},_data:function(t,e,i){return Ut.access(t,e,i)},_removeData:function(t,e){Ut.remove(t,e)}}),kt.fn.extend({data:function(t,e){var i,r,n,o=this[0],s=o&&o.attributes;if(void 0===t){if(this.length&&(n=Xt.get(o),1===o.nodeType&&!Ut.get(o,"hasDataAttrs"))){for(i=s.length;i--;)s[i]&&(r=s[i].name,0===r.indexOf("data-")&&(r=y(r.slice(5)),x(o,r,n[r])));Ut.set(o,"hasDataAttrs",!0)}return n}return"object"==typeof t?this.each(function(){Xt.set(this,t)}):Nt(this,function(e){var i;if(o&&void 0===e){if(void 0!==(i=Xt.get(o,t)))return i;if(void 0!==(i=x(o,t)))return i}else this.each(function(){Xt.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){Xt.remove(this,t)})}}),kt.extend({queue:function(t,e,i){var r;if(t)return e=(e||"fx")+"queue",r=Ut.get(t,e),i&&(!r||Array.isArray(i)?r=Ut.access(t,e,kt.makeArray(i)):r.push(i)),r||[]},dequeue:function(t,e){e=e||"fx";var i=kt.queue(t,e),r=i.length,n=i.shift(),o=kt._queueHooks(t,e),s=function(){kt.dequeue(t,e)};"inprogress"===n&&(n=i.shift(),r--),n&&("fx"===e&&i.unshift("inprogress"),delete o.stop,n.call(t,s,o)),!r&&o&&o.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return Ut.get(t,i)||Ut.access(t,i,{empty:kt.Callbacks("once memory").add(function(){Ut.remove(t,[e+"queue",i])})})}}),kt.fn.extend({queue:function(t,e){var i=2;return"string"!=typeof t&&(e=t,t="fx",i--),i>arguments.length?kt.queue(this[0],t):void 0===e?this:this.each(function(){var i=kt.queue(this,t,e);kt._queueHooks(this,t),"fx"===t&&"inprogress"!==i[0]&&kt.dequeue(this,t)})},dequeue:function(t){return this.each(function(){kt.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,r=1,n=kt.Deferred(),o=this,s=this.length,a=function(){--r||n.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)(i=Ut.get(o[s],t+"queueHooks"))&&i.empty&&(r++,i.empty.add(a));return a(),n.promise(e)}});var qt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Vt=RegExp("^(?:([+-])=|)("+qt+")([a-z%]*)$","i"),Jt=["Top","Right","Bottom","Left"],Kt=function(t,e){return t=e||t,"none"===t.style.display||""===t.style.display&&kt.contains(t.ownerDocument,t)&&"none"===kt.css(t,"display")},Zt=function(t,e,i,r){var n,o,s={};for(o in e)s[o]=t.style[o],t.style[o]=e[o];n=i.apply(t,r||[]);for(o in e)t.style[o]=s[o];return n},Qt={};kt.fn.extend({show:function(){return C(this,!0)},hide:function(){return C(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Kt(this)?kt(this).show():kt(this).hide()})}});var $t=/^(?:checkbox|radio)$/i,te=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,ee=/^$|^module$|\/(?:java|ecma)script/i,ie={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ie.optgroup=ie.option,ie.tbody=ie.tfoot=ie.colgroup=ie.caption=ie.thead,ie.th=ie.td;var re=/<|&#?\w+;/;!function(){var t=ct.createDocumentFragment(),e=t.appendChild(ct.createElement("div")),i=ct.createElement("input");i.setAttribute("type","radio"),i.setAttribute("checked","checked"),i.setAttribute("name","t"),e.appendChild(i),xt.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",xt.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var ne=ct.documentElement,oe=/^key/,se=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ae=/^([^.]*)(?:\.(.+)|)/;kt.event={global:{},add:function(t,e,i,r,n){var o,s,a,l,h,c,u,f,d,p,g,v=Ut.get(t);if(v)for(i.handler&&(o=i,i=o.handler,n=o.selector),n&&kt.find.matchesSelector(ne,n),i.guid||(i.guid=kt.guid++),(l=v.events)||(l=v.events={}),(s=v.handle)||(s=v.handle=function(e){return void 0!==kt&&kt.event.triggered!==e.type?kt.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(Rt)||[""],h=e.length;h--;)a=ae.exec(e[h])||[],d=g=a[1],p=(a[2]||"").split(".").sort(),d&&(u=kt.event.special[d]||{},d=(n?u.delegateType:u.bindType)||d,u=kt.event.special[d]||{},c=kt.extend({type:d,origType:g,data:r,handler:i,guid:i.guid,selector:n,needsContext:n&&kt.expr.match.needsContext.test(n),namespace:p.join(".")},o),(f=l[d])||(f=l[d]=[],f.delegateCount=0,u.setup&&!1!==u.setup.call(t,r,p,s)||t.addEventListener&&t.addEventListener(d,s)),u.add&&(u.add.call(t,c),c.handler.guid||(c.handler.guid=i.guid)),n?f.splice(f.delegateCount++,0,c):f.push(c),kt.event.global[d]=!0)},remove:function(t,e,i,r,n){var o,s,a,l,h,c,u,f,d,p,g,v=Ut.hasData(t)&&Ut.get(t);if(v&&(l=v.events)){for(e=(e||"").match(Rt)||[""],h=e.length;h--;)if(a=ae.exec(e[h])||[],d=g=a[1],p=(a[2]||"").split(".").sort(),d){for(u=kt.event.special[d]||{},d=(r?u.delegateType:u.bindType)||d,f=l[d]||[],a=a[2]&&RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=f.length;o--;)c=f[o],!n&&g!==c.origType||i&&i.guid!==c.guid||a&&!a.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(f.splice(o,1),c.selector&&f.delegateCount--,u.remove&&u.remove.call(t,c));s&&!f.length&&(u.teardown&&!1!==u.teardown.call(t,p,v.handle)||kt.removeEvent(t,d,v.handle),delete l[d])}else for(d in l)kt.event.remove(t,d+e[h],i,r,!0);kt.isEmptyObject(l)&&Ut.remove(t,"handle events")}},dispatch:function(t){var e,i,r,n,o,s,a=kt.event.fix(t),l=Array(arguments.length),h=(Ut.get(this,"events")||{})[a.type]||[],c=kt.event.special[a.type]||{};for(l[0]=a,e=1;arguments.length>e;e++)l[e]=arguments[e];if(a.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,a)){for(s=kt.event.handlers.call(this,a,h),e=0;(n=s[e++])&&!a.isPropagationStopped();)for(a.currentTarget=n.elem,i=0;(o=n.handlers[i++])&&!a.isImmediatePropagationStopped();)a.rnamespace&&!a.rnamespace.test(o.namespace)||(a.handleObj=o,a.data=o.data,void 0!==(r=((kt.event.special[o.origType]||{}).handle||o.handler).apply(n.elem,l))&&!1===(a.result=r)&&(a.preventDefault(),a.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,a),a.result}},handlers:function(t,e){var i,r,n,o,s,a=[],l=e.delegateCount,h=t.target;if(l&&h.nodeType&&("click"!==t.type||1>t.button))for(;h!==this;h=h.parentNode||this)if(1===h.nodeType&&("click"!==t.type||!0!==h.disabled)){for(o=[],s={},i=0;l>i;i++)r=e[i],n=r.selector+" ",void 0===s[n]&&(s[n]=r.needsContext?kt(n,this).index(h)>-1:kt.find(n,this,null,[h]).length),s[n]&&o.push(r);o.length&&a.push({elem:h,handlers:o})}return h=this,e.length>l&&a.push({elem:h,handlers:e.slice(l)}),a},addProp:function(t,e){Object.defineProperty(kt.Event.prototype,t,{enumerable:!0,configurable:!0,get:wt(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[kt.expando]?t:new kt.Event(t)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==M()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===M()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&h(this,"input"))return this.click(),!1},_default:function(t){return h(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},kt.removeEvent=function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i)},kt.Event=function(t,e){if(!(this instanceof kt.Event))return new kt.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?E:S,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&kt.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[kt.expando]=!0},kt.Event.prototype={constructor:kt.Event,isDefaultPrevented:S,isPropagationStopped:S,isImmediatePropagationStopped:S,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=E,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=E,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=E,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},kt.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&oe.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&se.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},kt.event.addProp),kt.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){kt.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,r=this,n=t.relatedTarget,o=t.handleObj;return n&&(n===r||kt.contains(r,n))||(t.type=o.origType,i=o.handler.apply(this,arguments),t.type=e),i}}}),kt.fn.extend({on:function(t,e,i,r){return P(this,t,e,i,r)},one:function(t,e,i,r){return P(this,t,e,i,r,1)},off:function(t,e,i){var r,n;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,kt(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof t){for(n in t)this.off(n,e,t[n]);return this}return!1!==e&&"function"!=typeof e||(i=e,e=void 0),!1===i&&(i=S),this.each(function(){kt.event.remove(this,t,i,e)})}});var le=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,he=/<script|<style|<link/i,ce=/checked\s*(?:[^=]|=\s*.checked.)/i,ue=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;kt.extend({htmlPrefilter:function(t){return t.replace(le,"<$1></$2>")},clone:function(t,e,i){var r,n,o,s,a=t.cloneNode(!0),l=kt.contains(t.ownerDocument,t);if(!(xt.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||kt.isXMLDoc(t)))for(s=k(a),o=k(t),r=0,n=o.length;n>r;r++)R(o[r],s[r]);if(e)if(i)for(o=o||k(t),s=s||k(a),r=0,n=o.length;n>r;r++)I(o[r],s[r]);else I(t,a);return s=k(a,"script"),s.length>0&&T(s,!l&&k(t,"script")),a},cleanData:function(t){for(var e,i,r,n=kt.event.special,o=0;void 0!==(i=t[o]);o++)if(Gt(i)){if(e=i[Ut.expando]){if(e.events)for(r in e.events)n[r]?kt.event.remove(i,r):kt.removeEvent(i,r,e.handle);i[Ut.expando]=void 0}i[Xt.expando]&&(i[Xt.expando]=void 0)}}}),kt.fn.extend({detach:function(t){return F(this,t,!0)},remove:function(t){return F(this,t)},text:function(t){return Nt(this,function(t){return void 0===t?kt.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return B(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){D(this,t).appendChild(t)}})},prepend:function(){return B(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=D(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return B(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return B(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(kt.cleanData(k(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return kt.clone(this,t,e)})},html:function(t){return Nt(this,function(t){var e=this[0]||{},i=0,r=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!he.test(t)&&!ie[(te.exec(t)||["",""])[1].toLowerCase()]){t=kt.htmlPrefilter(t);try{for(;r>i;i++)e=this[i]||{},1===e.nodeType&&(kt.cleanData(k(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return B(this,arguments,function(e){var i=this.parentNode;0>kt.inArray(this,t)&&(kt.cleanData(k(this)),i&&i.replaceChild(e,this))},t)}}),kt.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){kt.fn[t]=function(t){for(var i,r=[],n=kt(t),o=n.length-1,s=0;o>=s;s++)i=s===o?this:this.clone(!0),kt(n[s])[e](i),pt.apply(r,i.get());return this.pushStack(r)}});var fe=RegExp("^("+qt+")(?!px)[a-z%]+$","i"),de=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=i),e.getComputedStyle(t)},pe=RegExp(Jt.join("|"),"i");!function(){function t(){if(h){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",h.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ne.appendChild(l).appendChild(h);var t=i.getComputedStyle(h);r="1%"!==t.top,a=12===e(t.marginLeft),h.style.right="60%",s=36===e(t.right),n=36===e(t.width),h.style.position="absolute",o=36===h.offsetWidth||"absolute",ne.removeChild(l),h=null}}function e(t){return Math.round(parseFloat(t))}var r,n,o,s,a,l=ct.createElement("div"),h=ct.createElement("div");h.style&&(h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip="",xt.clearCloneStyle="content-box"===h.style.backgroundClip,kt.extend(xt,{boxSizingReliable:function(){return t(),n},pixelBoxStyles:function(){return t(),s},pixelPosition:function(){return t(),r},reliableMarginLeft:function(){return t(),a},scrollboxSize:function(){return t(),o}}))}();var ge=/^(none|table(?!-c[ea]).+)/,ve=/^--/,me={position:"absolute",visibility:"hidden",display:"block"},ye={letterSpacing:"0",fontWeight:"400"},be=["Webkit","Moz","ms"],_e=ct.createElement("div").style;kt.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=N(t,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,i,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var n,o,s,a=y(e),l=ve.test(e),h=t.style;if(l||(e=G(a)),s=kt.cssHooks[e]||kt.cssHooks[a],void 0===i)return s&&"get"in s&&void 0!==(n=s.get(t,!1,r))?n:h[e];o=typeof i,"string"===o&&(n=Vt.exec(i))&&n[1]&&(i=w(t,e,n),o="number"),null!=i&&i===i&&("number"===o&&(i+=n&&n[3]||(kt.cssNumber[a]?"":"px")),xt.clearCloneStyle||""!==i||0!==e.indexOf("background")||(h[e]="inherit"),s&&"set"in s&&void 0===(i=s.set(t,i,r))||(l?h.setProperty(e,i):h[e]=i))}},css:function(t,e,i,r){var n,o,s,a=y(e);return ve.test(e)||(e=G(a)),s=kt.cssHooks[e]||kt.cssHooks[a],s&&"get"in s&&(n=s.get(t,!0,i)),void 0===n&&(n=N(t,e,r)),"normal"===n&&e in ye&&(n=ye[e]),""===i||i?(o=parseFloat(n),!0===i||isFinite(o)?o||0:n):n}}),kt.each(["height","width"],function(t,e){kt.cssHooks[e]={get:function(t,i,r){if(i)return!ge.test(kt.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?Y(t,e,r):Zt(t,me,function(){return Y(t,e,r)})},set:function(t,i,r){var n,o=de(t),s="border-box"===kt.css(t,"boxSizing",!1,o),a=r&&X(t,e,r,s,o);return s&&xt.scrollboxSize()===o.position&&(a-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(o[e])-X(t,e,"border",!1,o)-.5)),a&&(n=Vt.exec(i))&&"px"!==(n[3]||"px")&&(t.style[e]=i,i=kt.css(t,e)),U(t,i,a)}}}),kt.cssHooks.marginLeft=z(xt.reliableMarginLeft,function(t,e){if(e)return(parseFloat(N(t,"marginLeft"))||t.getBoundingClientRect().left-Zt(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),kt.each({margin:"",padding:"",border:"Width"},function(t,e){kt.cssHooks[t+e]={expand:function(i){for(var r=0,n={},o="string"==typeof i?i.split(" "):[i];4>r;r++)n[t+Jt[r]+e]=o[r]||o[r-2]||o[0];return n}},"margin"!==t&&(kt.cssHooks[t+e].set=U)}),kt.fn.extend({css:function(t,e){return Nt(this,function(t,e,i){var r,n,o={},s=0;if(Array.isArray(e)){for(r=de(t),n=e.length;n>s;s++)o[e[s]]=kt.css(t,e[s],!1,r);return o}return void 0!==i?kt.style(t,e,i):kt.css(t,e)},t,e,arguments.length>1)}}),kt.Tween=W,W.prototype={constructor:W,init:function(t,e,i,r,n,o){this.elem=t,this.prop=i,this.easing=n||kt.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=r,this.unit=o||(kt.cssNumber[i]?"":"px")},cur:function(){var t=W.propHooks[this.prop];return t&&t.get?t.get(this):W.propHooks._default.get(this)},run:function(t){var e,i=W.propHooks[this.prop];return this.pos=e=this.options.duration?kt.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):W.propHooks._default.set(this),this}},W.prototype.init.prototype=W.prototype,W.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=kt.css(t.elem,t.prop,""),e&&"auto"!==e?e:0)},set:function(t){kt.fx.step[t.prop]?kt.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[kt.cssProps[t.prop]]&&!kt.cssHooks[t.prop]?t.elem[t.prop]=t.now:kt.style(t.elem,t.prop,t.now+t.unit)}}},W.propHooks.scrollTop=W.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},kt.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},kt.fx=W.prototype.init,kt.fx.step={};var xe,we,Le=/^(?:toggle|show|hide)$/,Ce=/queueHooks$/;kt.Animation=kt.extend($,{tweeners:{"*":[function(t,e){var i=this.createTween(t,e);return w(i.elem,t,Vt.exec(e),i),i}]},tweener:function(t,e){wt(t)?(e=t,t=["*"]):t=t.match(Rt);for(var i,r=0,n=t.length;n>r;r++)i=t[r],$.tweeners[i]=$.tweeners[i]||[],$.tweeners[i].unshift(e)},prefilters:[Z],prefilter:function(t,e){e?$.prefilters.unshift(t):$.prefilters.push(t)}}),kt.speed=function(t,e,i){var r=t&&"object"==typeof t?kt.extend({},t):{complete:i||!i&&e||wt(t)&&t,duration:t,easing:i&&e||e&&!wt(e)&&e};return kt.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration=r.duration in kt.fx.speeds?kt.fx.speeds[r.duration]:kt.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){wt(r.old)&&r.old.call(this),r.queue&&kt.dequeue(this,r.queue)},r},kt.fn.extend({fadeTo:function(t,e,i,r){return this.filter(Kt).css("opacity",0).show().end().animate({opacity:e},t,i,r)},animate:function(t,e,i,r){var n=kt.isEmptyObject(t),o=kt.speed(e,i,r),s=function(){var e=$(this,kt.extend({},t),o);(n||Ut.get(this,"finish"))&&e.stop(!0)};return s.finish=s,n||!1===o.queue?this.each(s):this.queue(o.queue,s)},stop:function(t,e,i){var r=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=e,e=t,t=void 0),e&&!1!==t&&this.queue(t||"fx",[]),this.each(function(){var e=!0,n=null!=t&&t+"queueHooks",o=kt.timers,s=Ut.get(this);if(n)s[n]&&s[n].stop&&r(s[n]);else for(n in s)s[n]&&s[n].stop&&Ce.test(n)&&r(s[n]);for(n=o.length;n--;)o[n].elem!==this||null!=t&&o[n].queue!==t||(o[n].anim.stop(i),e=!1,o.splice(n,1));!e&&i||kt.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,i=Ut.get(this),r=i[t+"queue"],n=i[t+"queueHooks"],o=kt.timers,s=r?r.length:0;for(i.finish=!0,kt.queue(this,t,[]),n&&n.stop&&n.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;s>e;e++)r[e]&&r[e].finish&&r[e].finish.call(this);delete i.finish})}}),kt.each(["toggle","show","hide"],function(t,e){var i=kt.fn[e];kt.fn[e]=function(t,r,n){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(J(e,!0),t,r,n)}}),kt.each({slideDown:J("show"),slideUp:J("hide"),slideToggle:J("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){kt.fn[t]=function(t,i,r){return this.animate(e,t,i,r)}}),kt.timers=[],kt.fx.tick=function(){var t,e=0,i=kt.timers;for(xe=Date.now();i.length>e;e++)(t=i[e])()||i[e]!==t||i.splice(e--,1);i.length||kt.fx.stop(),xe=void 0},kt.fx.timer=function(t){kt.timers.push(t),kt.fx.start()},kt.fx.interval=13,kt.fx.start=function(){we||(we=!0,q())},kt.fx.stop=function(){we=null},kt.fx.speeds={slow:600,fast:200,_default:400},kt.fn.delay=function(t,e){return t=kt.fx?kt.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,r){var n=i.setTimeout(e,t);r.stop=function(){i.clearTimeout(n)}})},function(){var t=ct.createElement("input"),e=ct.createElement("select"),i=e.appendChild(ct.createElement("option"));t.type="checkbox",xt.checkOn=""!==t.value,xt.optSelected=i.selected,t=ct.createElement("input"),t.value="t",t.type="radio",xt.radioValue="t"===t.value}();var ke,Te=kt.expr.attrHandle;kt.fn.extend({attr:function(t,e){return Nt(this,kt.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){kt.removeAttr(this,t)})}}),kt.extend({attr:function(t,e,i){var r,n,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===t.getAttribute?kt.prop(t,e,i):(1===o&&kt.isXMLDoc(t)||(n=kt.attrHooks[e.toLowerCase()]||(kt.expr.match.bool.test(e)?ke:void 0)),void 0!==i?null===i?void kt.removeAttr(t,e):n&&"set"in n&&void 0!==(r=n.set(t,i,e))?r:(t.setAttribute(e,i+""),i):n&&"get"in n&&null!==(r=n.get(t,e))?r:(r=kt.find.attr(t,e),null==r?void 0:r))},attrHooks:{type:{set:function(t,e){if(!xt.radioValue&&"radio"===e&&h(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}},removeAttr:function(t,e){var i,r=0,n=e&&e.match(Rt);if(n&&1===t.nodeType)for(;i=n[r++];)t.removeAttribute(i)}}),ke={set:function(t,e,i){return!1===e?kt.removeAttr(t,i):t.setAttribute(i,i),i}},kt.each(kt.expr.match.bool.source.match(/\w+/g),function(t,e){var i=Te[e]||kt.find.attr;Te[e]=function(t,e,r){var n,o,s=e.toLowerCase();return r||(o=Te[s],Te[s]=n,n=null!=i(t,e,r)?s:null,Te[s]=o),n}});var Oe=/^(?:input|select|textarea|button)$/i,Ee=/^(?:a|area)$/i;kt.fn.extend({prop:function(t,e){return Nt(this,kt.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[kt.propFix[t]||t]})}}),kt.extend({prop:function(t,e,i){var r,n,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&kt.isXMLDoc(t)||(e=kt.propFix[e]||e,n=kt.propHooks[e]),void 0!==i?n&&"set"in n&&void 0!==(r=n.set(t,i,e))?r:t[e]=i:n&&"get"in n&&null!==(r=n.get(t,e))?r:t[e]},propHooks:{tabIndex:{get:function(t){var e=kt.find.attr(t,"tabindex");return e?parseInt(e,10):Oe.test(t.nodeName)||Ee.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),xt.optSelected||(kt.propHooks.selected={get:function(t){return null},set:function(t){}}),kt.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){kt.propFix[this.toLowerCase()]=this}),kt.fn.extend({addClass:function(t){var e,i,r,n,o,s,a,l=0;if(wt(t))return this.each(function(e){kt(this).addClass(t.call(this,e,et(this)))});if(e=it(t),e.length)for(;i=this[l++];)if(n=et(i),r=1===i.nodeType&&" "+tt(n)+" "){for(s=0;o=e[s++];)0>r.indexOf(" "+o+" ")&&(r+=o+" ");a=tt(r),n!==a&&i.setAttribute("class",a)}return this},removeClass:function(t){var e,i,r,n,o,s,a,l=0;if(wt(t))return this.each(function(e){kt(this).removeClass(t.call(this,e,et(this)))});if(!arguments.length)return this.attr("class","");if(e=it(t),e.length)for(;i=this[l++];)if(n=et(i),r=1===i.nodeType&&" "+tt(n)+" "){for(s=0;o=e[s++];)for(;r.indexOf(" "+o+" ")>-1;)r=r.replace(" "+o+" "," ");a=tt(r),n!==a&&i.setAttribute("class",a)}return this},toggleClass:function(t,e){var i=typeof t,r="string"===i||Array.isArray(t);return"boolean"==typeof e&&r?e?this.addClass(t):this.removeClass(t):this.each(wt(t)?function(i){kt(this).toggleClass(t.call(this,i,et(this),e),e)}:function(){var e,n,o,s;if(r)for(n=0,o=kt(this),s=it(t);e=s[n++];)o.hasClass(e)?o.removeClass(e):o.addClass(e);else void 0!==t&&"boolean"!==i||(e=et(this),e&&Ut.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":Ut.get(this,"__className__")||""))})},hasClass:function(t){var e,i,r=0;for(e=" "+t+" ";i=this[r++];)if(1===i.nodeType&&(" "+tt(et(i))+" ").indexOf(e)>-1)return!0;return!1}});var Se=/\r/g;kt.fn.extend({val:function(t){var e,i,r,n=this[0];{if(arguments.length)return r=wt(t),this.each(function(i){var n;1===this.nodeType&&(n=r?t.call(this,i,kt(this).val()):t,null==n?n="":"number"==typeof n?n+="":Array.isArray(n)&&(n=kt.map(n,function(t){return null==t?"":t+""})),(e=kt.valHooks[this.type]||kt.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,n,"value")||(this.value=n))});if(n)return(e=kt.valHooks[n.type]||kt.valHooks[n.nodeName.toLowerCase()])&&"get"in e&&void 0!==(i=e.get(n,"value"))?i:(i=n.value,"string"==typeof i?i.replace(Se,""):null==i?"":i)}}}),kt.extend({valHooks:{option:{get:function(t){var e=kt.find.attr(t,"value");return null!=e?e:tt(kt.text(t))}},select:{get:function(t){var e,i,r,n=t.options,o=t.selectedIndex,s="select-one"===t.type,a=s?null:[],l=s?o+1:n.length;for(r=0>o?l:s?o:0;l>r;r++)if(i=n[r],(i.selected||r===o)&&!i.disabled&&(!i.parentNode.disabled||!h(i.parentNode,"optgroup"))){if(e=kt(i).val(),s)return e;a.push(e)}return a},set:function(t,e){for(var i,r,n=t.options,o=kt.makeArray(e),s=n.length;s--;)r=n[s],(r.selected=kt.inArray(kt.valHooks.option.get(r),o)>-1)&&(i=!0);return i||(t.selectedIndex=-1),o}}}}),kt.each(["radio","checkbox"],function(){kt.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=kt.inArray(kt(t).val(),e)>-1}},xt.checkOn||(kt.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),xt.focusin="onfocusin"in i;var Me=/^(?:focusinfocus|focusoutblur)$/,Pe=function(t){t.stopPropagation()};kt.extend(kt.event,{trigger:function(t,e,r,n){var o,s,a,l,h,c,u,f,d=[r||ct],p=yt.call(t,"type")?t.type:t,g=yt.call(t,"namespace")?t.namespace.split("."):[];if(s=f=a=r=r||ct,3!==r.nodeType&&8!==r.nodeType&&!Me.test(p+kt.event.triggered)&&(p.indexOf(".")>-1&&(g=p.split("."),p=g.shift(),g.sort()),h=0>p.indexOf(":")&&"on"+p,t=t[kt.expando]?t:new kt.Event(p,"object"==typeof t&&t),t.isTrigger=n?2:3,t.namespace=g.join("."),t.rnamespace=t.namespace?RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),e=null==e?[t]:kt.makeArray(e,[t]),u=kt.event.special[p]||{},n||!u.trigger||!1!==u.trigger.apply(r,e))){if(!n&&!u.noBubble&&!Lt(r)){for(l=u.delegateType||p,Me.test(l+p)||(s=s.parentNode);s;s=s.parentNode)d.push(s),a=s;a===(r.ownerDocument||ct)&&d.push(a.defaultView||a.parentWindow||i)}for(o=0;(s=d[o++])&&!t.isPropagationStopped();)f=s,t.type=o>1?l:u.bindType||p,c=(Ut.get(s,"events")||{})[t.type]&&Ut.get(s,"handle"),c&&c.apply(s,e),(c=h&&s[h])&&c.apply&&Gt(s)&&!1===(t.result=c.apply(s,e))&&t.preventDefault();return t.type=p,n||t.isDefaultPrevented()||u._default&&!1!==u._default.apply(d.pop(),e)||!Gt(r)||h&&wt(r[p])&&!Lt(r)&&(a=r[h],a&&(r[h]=null),kt.event.triggered=p,t.isPropagationStopped()&&f.addEventListener(p,Pe),r[p](),t.isPropagationStopped()&&f.removeEventListener(p,Pe),kt.event.triggered=void 0,a&&(r[h]=a)),t.result}},simulate:function(t,e,i){var r=kt.extend(new kt.Event,i,{type:t,isSimulated:!0});kt.event.trigger(r,null,e)}}),kt.fn.extend({trigger:function(t,e){return this.each(function(){kt.event.trigger(t,e,this)})},triggerHandler:function(t,e){var i=this[0];if(i)return kt.event.trigger(t,e,i,!0)}}),xt.focusin||kt.each({focus:"focusin",blur:"focusout"},function(t,e){var i=function(t){kt.event.simulate(e,t.target,kt.event.fix(t))};kt.event.special[e]={setup:function(){var r=this.ownerDocument||this,n=Ut.access(r,e);n||r.addEventListener(t,i,!0),Ut.access(r,e,(n||0)+1)},teardown:function(){var r=this.ownerDocument||this,n=Ut.access(r,e)-1;n?Ut.access(r,e,n):(r.removeEventListener(t,i,!0),Ut.remove(r,e))}}});var De=i.location,Ae=Date.now(),je=/\?/;kt.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new i.DOMParser).parseFromString(t,"text/xml")}catch(t){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||kt.error("Invalid XML: "+t),e};var Ie=/\[\]$/,Re=/\r?\n/g,Be=/^(?:submit|button|image|reset|file)$/i,Fe=/^(?:input|select|textarea|keygen)/i;kt.param=function(t,e){var i,r=[],n=function(t,e){var i=wt(e)?e():e;r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==i?"":i)};if(Array.isArray(t)||t.jquery&&!kt.isPlainObject(t))kt.each(t,function(){n(this.name,this.value)});else for(i in t)rt(i,t[i],e,n);return r.join("&")},kt.fn.extend({serialize:function(){return kt.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=kt.prop(this,"elements");return t?kt.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!kt(this).is(":disabled")&&Fe.test(this.nodeName)&&!Be.test(t)&&(this.checked||!$t.test(t))}).map(function(t,e){var i=kt(this).val();return null==i?null:Array.isArray(i)?kt.map(i,function(t){return{name:e.name,value:t.replace(Re,"\r\n")}}):{name:e.name,value:i.replace(Re,"\r\n")}}).get()}});var Ne=/%20/g,ze=/#.*$/,He=/([?&])_=[^&]*/,Ge=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ue=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Xe=/^(?:GET|HEAD)$/,Ye=/^\/\//,We={},qe={},Ve="*/".concat("*"),Je=ct.createElement("a");Je.href=De.href,kt.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:De.href,type:"GET",isLocal:Ue.test(De.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ve,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":kt.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?st(st(t,kt.ajaxSettings),e):st(kt.ajaxSettings,t)},ajaxPrefilter:nt(We),ajaxTransport:nt(qe),ajax:function(t,e){function r(t,e,r,a){var h,f,d,_,x,w=e;c||(c=!0,l&&i.clearTimeout(l),n=void 0,s=a||"",L.readyState=t>0?4:0,h=t>=200&&300>t||304===t,r&&(_=at(p,L,r)),_=lt(p,_,L,h),h?(p.ifModified&&(x=L.getResponseHeader("Last-Modified"),x&&(kt.lastModified[o]=x),(x=L.getResponseHeader("etag"))&&(kt.etag[o]=x)),204===t||"HEAD"===p.type?w="nocontent":304===t?w="notmodified":(w=_.state,f=_.data,d=_.error,h=!d)):(d=w,!t&&w||(w="error",0>t&&(t=0))),L.status=t,L.statusText=(e||w)+"",h?m.resolveWith(g,[f,w,L]):m.rejectWith(g,[L,w,d]),L.statusCode(b),b=void 0,u&&v.trigger(h?"ajaxSuccess":"ajaxError",[L,p,h?f:d]),y.fireWith(g,[L,w]),u&&(v.trigger("ajaxComplete",[L,p]),--kt.active||kt.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,o,s,a,l,h,c,u,f,d,p=kt.ajaxSetup({},e),g=p.context||p,v=p.context&&(g.nodeType||g.jquery)?kt(g):kt.event,m=kt.Deferred(),y=kt.Callbacks("once memory"),b=p.statusCode||{},_={},x={},w="canceled",L={readyState:0,getResponseHeader:function(t){var e;if(c){if(!a)for(a={};e=Ge.exec(s);)a[e[1].toLowerCase()]=e[2];e=a[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return c?s:null},setRequestHeader:function(t,e){return null==c&&(t=x[t.toLowerCase()]=x[t.toLowerCase()]||t,_[t]=e),this},overrideMimeType:function(t){return null==c&&(p.mimeType=t),this},statusCode:function(t){var e;if(t)if(c)L.always(t[L.status]);else for(e in t)b[e]=[b[e],t[e]];return this},abort:function(t){var e=t||w;return n&&n.abort(e),r(0,e),this}};if(m.promise(L),p.url=((t||p.url||De.href)+"").replace(Ye,De.protocol+"//"),p.type=e.method||e.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(Rt)||[""],null==p.crossDomain){h=ct.createElement("a");try{h.href=p.url,h.href=h.href,p.crossDomain=Je.protocol+"//"+Je.host!=h.protocol+"//"+h.host}catch(t){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=kt.param(p.data,p.traditional)),ot(We,p,e,L),c)return L;u=kt.event&&p.global,u&&0==kt.active++&&kt.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Xe.test(p.type),o=p.url.replace(ze,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(Ne,"+")):(d=p.url.slice(o.length),p.data&&(p.processData||"string"==typeof p.data)&&(o+=(je.test(o)?"&":"?")+p.data,delete p.data),!1===p.cache&&(o=o.replace(He,"$1"),d=(je.test(o)?"&":"?")+"_="+Ae+++d),p.url=o+d),p.ifModified&&(kt.lastModified[o]&&L.setRequestHeader("If-Modified-Since",kt.lastModified[o]),kt.etag[o]&&L.setRequestHeader("If-None-Match",kt.etag[o])),(p.data&&p.hasContent&&!1!==p.contentType||e.contentType)&&L.setRequestHeader("Content-Type",p.contentType),L.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Ve+"; q=0.01":""):p.accepts["*"]);for(f in p.headers)L.setRequestHeader(f,p.headers[f]);if(p.beforeSend&&(!1===p.beforeSend.call(g,L,p)||c))return L.abort();if(w="abort",y.add(p.complete),L.done(p.success),L.fail(p.error),n=ot(qe,p,e,L)){if(L.readyState=1,u&&v.trigger("ajaxSend",[L,p]),c)return L;p.async&&p.timeout>0&&(l=i.setTimeout(function(){L.abort("timeout")},p.timeout));try{c=!1,n.send(_,r)}catch(t){if(c)throw t;r(-1,t)}}else r(-1,"No Transport");return L},getJSON:function(t,e,i){return kt.get(t,e,i,"json")},getScript:function(t,e){return kt.get(t,void 0,e,"script")}}),kt.each(["get","post"],function(t,e){kt[e]=function(t,i,r,n){return wt(i)&&(n=n||r,r=i,i=void 0),kt.ajax(kt.extend({url:t,type:e,dataType:n,data:i,success:r},kt.isPlainObject(t)&&t))}}),kt._evalUrl=function(t){return kt.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},kt.fn.extend({wrapAll:function(t){var e;return this[0]&&(wt(t)&&(t=t.call(this[0])),e=kt(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(t){return this.each(wt(t)?function(e){kt(this).wrapInner(t.call(this,e))}:function(){var e=kt(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)})},wrap:function(t){var e=wt(t);return this.each(function(i){kt(this).wrapAll(e?t.call(this,i):t)})},unwrap:function(t){return this.parent(t).not("body").each(function(){kt(this).replaceWith(this.childNodes)}),this}}),kt.expr.pseudos.hidden=function(t){return!kt.expr.pseudos.visible(t)},kt.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},kt.ajaxSettings.xhr=function(){try{return new i.XMLHttpRequest}catch(t){}};var Ke={0:200,1223:204},Ze=kt.ajaxSettings.xhr();xt.cors=!!Ze&&"withCredentials"in Ze,xt.ajax=Ze=!!Ze,kt.ajaxTransport(function(t){var e,r;if(xt.cors||Ze&&!t.crossDomain)return{send:function(n,o){var s,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)a[s]=t.xhrFields[s];t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(s in n)a.setRequestHeader(s,n[s]);e=function(t){return function(){e&&(e=r=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===t?a.abort():"error"===t?"number"!=typeof a.status?o(0,"error"):o(a.status,a.statusText):o(Ke[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=e(),r=a.onerror=a.ontimeout=e("error"),void 0!==a.onabort?a.onabort=r:a.onreadystatechange=function(){4===a.readyState&&i.setTimeout(function(){e&&r()})},e=e("abort");try{a.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}}),kt.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),kt.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return kt.globalEval(t),t}}}),kt.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),kt.ajaxTransport("script",function(t){if(t.crossDomain){var e,i;return{send:function(r,n){e=kt("<script>").prop({charset:t.scriptCharset,src:t.url}).on("load error",i=function(t){e.remove(),i=null,t&&n("error"===t.type?404:200,t.type)}),ct.head.appendChild(e[0])},abort:function(){i&&i()}}}});var Qe=[],$e=/(=)\?(?=&|$)|\?\?/;kt.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Qe.pop()||kt.expando+"_"+Ae++;return this[t]=!0,t}}),kt.ajaxPrefilter("json jsonp",function(t,e,r){var n,o,s,a=!1!==t.jsonp&&($e.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&$e.test(t.data)&&"data");if(a||"jsonp"===t.dataTypes[0])return n=t.jsonpCallback=wt(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace($e,"$1"+n):!1!==t.jsonp&&(t.url+=(je.test(t.url)?"&":"?")+t.jsonp+"="+n),t.converters["script json"]=function(){return s||kt.error(n+" was not called"),s[0]},t.dataTypes[0]="json",o=i[n],i[n]=function(){s=arguments},r.always(function(){void 0===o?kt(i).removeProp(n):i[n]=o,t[n]&&(t.jsonpCallback=e.jsonpCallback,Qe.push(n)),s&&wt(o)&&o(s[0]),s=o=void 0}),"script"}),xt.createHTMLDocument=function(){var t=ct.implementation.createHTMLDocument("").body;return t.innerHTML="<form></form><form></form>",2===t.childNodes.length}(),kt.parseHTML=function(t,e,i){if("string"!=typeof t)return[];"boolean"==typeof e&&(i=e,e=!1);var r,n,o;return e||(xt.createHTMLDocument?(e=ct.implementation.createHTMLDocument(""),r=e.createElement("base"),r.href=ct.location.href,e.head.appendChild(r)):e=ct),n=Pt.exec(t),o=!i&&[],n?[e.createElement(n[1])]:(n=O([t],e,o),o&&o.length&&kt(o).remove(),kt.merge([],n.childNodes))},kt.fn.load=function(t,e,i){var r,n,o,s=this,a=t.indexOf(" ");return a>-1&&(r=tt(t.slice(a)),t=t.slice(0,a)),wt(e)?(i=e,e=void 0):e&&"object"==typeof e&&(n="POST"),s.length>0&&kt.ajax({url:t,type:n||"GET",dataType:"html",data:e}).done(function(t){o=arguments,s.html(r?kt("<div>").append(kt.parseHTML(t)).find(r):t)}).always(i&&function(t,e){s.each(function(){i.apply(this,o||[t.responseText,e,t])})}),this},kt.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){kt.fn[e]=function(t){return this.on(e,t)}}),kt.expr.pseudos.animated=function(t){return kt.grep(kt.timers,function(e){return t===e.elem}).length},kt.offset={setOffset:function(t,e,i){var r,n,o,s,a,l,h,c=kt.css(t,"position"),u=kt(t),f={};"static"===c&&(t.style.position="relative"),a=u.offset(),o=kt.css(t,"top"),l=kt.css(t,"left"),h=("absolute"===c||"fixed"===c)&&(o+l).indexOf("auto")>-1,h?(r=u.position(),s=r.top,n=r.left):(s=parseFloat(o)||0,n=parseFloat(l)||0),wt(e)&&(e=e.call(t,i,kt.extend({},a))),null!=e.top&&(f.top=e.top-a.top+s),null!=e.left&&(f.left=e.left-a.left+n),"using"in e?e.using.call(t,f):u.css(f)}},kt.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){kt.offset.setOffset(this,t,e)});var e,i,r=this[0];if(r)return r.getClientRects().length?(e=r.getBoundingClientRect(),i=r.ownerDocument.defaultView,{top:e.top+i.pageYOffset,left:e.left+i.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var t,e,i,r=this[0],n={top:0,left:0};if("fixed"===kt.css(r,"position"))e=r.getBoundingClientRect();else{for(e=this.offset(),i=r.ownerDocument,t=r.offsetParent||i.documentElement;t&&(t===i.body||t===i.documentElement)&&"static"===kt.css(t,"position");)t=t.parentNode;t&&t!==r&&1===t.nodeType&&(n=kt(t).offset(),n.top+=kt.css(t,"borderTopWidth",!0),n.left+=kt.css(t,"borderLeftWidth",!0))}return{top:e.top-n.top-kt.css(r,"marginTop",!0),left:e.left-n.left-kt.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===kt.css(t,"position");)t=t.offsetParent;return t||ne})}}),kt.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var i="pageYOffset"===e;kt.fn[t]=function(r){return Nt(this,function(t,r,n){var o;if(Lt(t)?o=t:9===t.nodeType&&(o=t.defaultView),void 0===n)return o?o[e]:t[r];o?o.scrollTo(i?o.pageXOffset:n,i?n:o.pageYOffset):t[r]=n},t,r,arguments.length)}}),kt.each(["top","left"],function(t,e){kt.cssHooks[e]=z(xt.pixelPosition,function(t,i){if(i)return i=N(t,e),fe.test(i)?kt(t).position()[e]+"px":i})}),kt.each({Height:"height",Width:"width"},function(t,e){kt.each({padding:"inner"+t,content:e,"":"outer"+t},function(i,r){kt.fn[r]=function(n,o){var s=arguments.length&&(i||"boolean"!=typeof n),a=i||(!0===n||!0===o?"margin":"border");return Nt(this,function(e,i,n){var o;return Lt(e)?0===r.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===n?kt.css(e,i,a):kt.style(e,i,n,a)},e,s?n:void 0,s)}})}),kt.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,e){kt.fn[e]=function(t,i){return arguments.length>0?this.on(e,null,t,i):this.trigger(e)}}),kt.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),kt.fn.extend({bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,r){return this.on(e,t,i,r)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)}}),kt.proxy=function(t,e){var i,r,n;if("string"==typeof e&&(i=t[e],e=t,t=i),wt(t))return r=ft.call(arguments,2),n=function(){return t.apply(e||this,r.concat(ft.call(arguments)))},n.guid=t.guid=t.guid||kt.guid++,n},kt.holdReady=function(t){t?kt.readyWait++:kt.ready(!0)},kt.isArray=Array.isArray,kt.parseJSON=JSON.parse,kt.nodeName=h,kt.isFunction=wt,kt.isWindow=Lt,kt.camelCase=y,kt.type=a,kt.now=Date.now,kt.isNumeric=function(t){var e=kt.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},r=[],void 0!==(n=function(){return kt}.apply(e,r))&&(t.exports=n);var ti=i.jQuery,ei=i.$;return kt.noConflict=function(t){return i.$===kt&&(i.$=ei),t&&i.jQuery===kt&&(i.jQuery=ti),kt},o||(i.jQuery=i.$=kt),kt})},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t){return d[t]?d[t]:d[t]=(0,h.default)(t).then(function(t){return t.text()})}Object.defineProperty(e,"__esModule",{value:!0}),e.AdminDistrictLayer=void 0;var o=Object.assign||function(t){for(var e=1;arguments.length>e;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t};i(2);var s=i(17),a=r(s),l=i(6),h=r(l),c=i(7),u=r(c),f=i(0),d={},p={},g=e.AdminDistrictLayer=u.default.extend({_forceRenderKeys:["fill","valueName","getValue","url"],initialize:function(t){t=o({},p,t),u.default.prototype.initialize.call(this,t)},_initEvents:function(){var t=this;this.on("loadstart",function(e){t.data={type:"FeatureCollection",features:[]}}),this.on("loaddata",function(e){t.renderRid!==e.rid&&(t.clearFrames(),t.clearSvg(),t.renderRid=e.rid),t.data.features=t.data.features.concat(e.data.features),t.render(e.data)})},_initMapEvent:function(){var t=this._map;t.on("click",this.clearClickFeature,this),t.on("resize",this._reset,this),t.on("moveend",this._reset,this),t.on("zoomstart",this._onZoomstart,this),t.on("zoomend",this._reset,this)},_removeMapEvent:function(){var t=this._map;t.off("click",this.clearClickFeature,this),t.off("resize",this._reset,this),t.off("moveend",this._reset,this),t.off("zoomstart",this._onZoomstart,this),t.off("zoomend",this._reset,this)},_destroy:function(){for(var t=this.getContainer(),e=t.childNodes,i=0,r=e.length;r>i;i++)e[i]&&t.removeChild(e[i]);this.$svg&&this.$svg.off(),this._removeMapEvent(),this.clearFrames(),this._destroyDs(),this.off()},_onZoomstart:function(){this.getSvg().hide()},_reset:function(){if(this.bounds){var t=this.bounds,e=new L.Bounds(this._map.latLngToLayerPoint([t[0],t[1]]),this._map.latLngToLayerPoint([t[2],t[3]]));if(void 0===this.layerBounds||!this.layerBounds.min.equals(e.min)||!this.layerBounds.max.equals(e.max)){this.layerBounds=e;var i=e.getSize(),r=this.getSvg();L.DomUtil.setPosition(r.get(0),e.min),r.attr("width",i.x+"px").attr("height",i.y+"px").show()}}},_forceRender:function(){this.clearFrames(),this.raf(this.render.bind(this,this.data))},onAdd:function(t){this._map=t,this._initEvents(),this._initMapEvent(),this._initDs()},onRemove:function(){this._destroy()},setOptions:function(t){var e=(0,f.isAnyRenderOptionsChange)(t,this.options,this._forceRenderKeys);if(L.setOptions(this,t),t.ds&&this._ds!==t.ds)return this._ds.destroy(),void this._initDs();e&&this._forceRender()},initSvg:function(t){var e=this;if(void 0==this.svgContainer&&(this.svgContainer=document.createElement("div")),this.level!==t&&(this.initSvgPromise=null,this.level=t),this.initSvgPromise)return this.initSvgPromise;var i=this.svgContainer,r=L.DomUtil.testProp(["transformOrigin","WebkitTransformOrigin","msTransformOrigin"]);return i.style[r]="50% 50%",i.style.position="absolute",this.initSvgPromise=n(this.options.url[t]).then(function(r){i.innerHTML=r;var n=(0,a.default)(i).find("svg").hide().attr("data-level",t);e.$svg=n;var o=n.attr("bounds").split(" ").map(function(t){return parseFloat(t)});e.bounds=o;var s=e.getContainer();(0,a.default)(s).empty().append(i),e._reset(),e.initSvgClickEvent()})},initSvgClickEvent:function(){var t=this;this.$svg.on("click",function(e){t.isSvgClicked=!0,t.clickFeature=(0,a.default)(e.target).data("feature")})},clearClickFeature:function(){this.isSvgClicked||(this.clickFeature=null),this.isSvgClicked=!1},getSvg:function(){return this.$svg?this.$svg:(0,a.default)(this.svgContainer).find("svg")},clearSvg:function(){this.getSvg().find("polygon").attr("fill","none").attr("stroke","none")},renderInSingleFrame:function(t,e){this.raf(function(){t.forEach(function(t){return e(t)})})},renderInMultiFrames:function(t,e,i){for(var r=[],n=0,o=t.features.length;o>n;n++){r.push(t.features[n]),r.length===i&&(this.renderInSingleFrame(r,e),r=[])}r.length>0&&this.renderInSingleFrame(r,e)},renderPolygon:function(t,e){var i=this.getSvg(),r=this.getValue(t),n=(0,f.getScale)(r,this.options.fill),o=t.properties[e],s=i.find("[adcode="+o+"]");s.data("feature",t),s.attr("fill")!==n&&s.attr("fill",n)},render:function(t){var e=this;if(void 0!=t){var i=t&&t.features&&t.features[0];if(void 0!=i){var r="province";i.properties&&i.properties.city&&(r="city"),this.initSvg(r).then(function(){e.$svg.find("[adcode]").data("feature",null),e.renderInMultiFrames(t,function(t){e.renderPolygon(t,r)},20)}).catch(function(t){console.error(t)})}}},getContainer:function(){return this.getPane()},findObjectByXy:function(t,e){return this.clickFeature}});e.default=function(t){return new g(t)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BezierCurveLayer=void 0;var r=Object.assign||function(t){for(var e=1;arguments.length>e;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},n=i(1),o=i(4),s=function(t){return t&&t.__esModule?t:{default:t}}(o),a=i(0),l={minPixel:5,strokeWidth:3,stroke:{range:["rgb(0, 167, 157)"]},fill:!1,strokeDashArray:null},h=e.BezierCurveLayer=s.default.extend({_forceRenderKeys:["fill","valueName","getValue","minPixel","unit","stroke","strokeWidth","strokeDashArray"],initialize:function(t){t=r({},l,t),s.default.prototype.initialize.call(this,t)},getBezierCurvePath:function(t,e,i){var r="M "+t.x+" "+t.y,n=e.x+" "+e.y;if(0===i.length)return r+" L "+n;if(1===i.length)return r+" Q "+i[0].x+" "+i[0].y+" "+n;if(2===i.length)return r+" C "+i[0].x+" "+i[0].y+" "+i[1].x+" "+i[1].y+" "+n;throw Error("the control points are more than two for bezier curve")},latLngToPixel:function(t,e){var i=this._map.latLngToContainerPoint([t[0],t[1]]),r=i;return e&&(r=L.point(i.x,i.y).add(e)),r},pointLatLngToXY:function(t,e){var i=this;return{start:this.latLngToPixel(t.start,e),end:this.latLngToPixel(t.end,e),ctrlPoints:t.ctrlPoints&&t.ctrlPoints.map(function(t){return i.latLngToPixel(t,e)})||[]}},createBezierCurve:function(t,e,i){var r=this.pointLatLngToXY(t,i),o=r.start,s=r.end,l=r.ctrlPoints,h=this.getBezierCurvePath(o,s,l),c=this.getValue(t),u=(0,a.getScale)(c,this.options.stroke),f=this.options.fill&&(0,a.getScale)(c,this.options.fill)||!1;return new n.fabric.Path(h,{stroke:u,strokeWidth:this.options.strokeWidth,strokeLineCap:"round",strokeLineJoin:"round",strokeDashArray:this.options.strokeDashArray,fill:f})},render:function(t){var e=this;if(void 0!=t){this.renderInMultiFrames(t,function(t,i,r){return e.createBezierCurve(t,i,r)},2e3)}},getEuclideanDistance:function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},straightBezierCurve:function(t,e,i,r){var n=this.pointLatLngToXY(i,r),o=n.start,s=n.end,a=(s.y-o.y)/(s.x-o.x),l=s.y-a*s.x,h={x:t,y:e};return r&&(h=L.point(t,e).add(r)),10>=this.getEuclideanDistance(h,{x:h.x,y:a*h.x+l})},quadraticBezierCurve:function(t,e,i,r){var n=this.pointLatLngToXY(i,r),o=n.start,s=n.end,a=n.ctrlPoints,l={x:t,y:e};r&&(l=L.point(t,e).add(r));var h=l.x,c=l.y,u=o.x-2*a[0].x+s.x,f=2*(a[0].x-o.x),d=o.x-h,p=2*u,g=f*f-4*u*d;if(0>g)return!1;var v=Math.sqrt(g),m=(-f+v)/p,y=(-f-v)/p,b=(o.y-2*a[0].y+s.y)*m*m+2*(a[0].y-o.y)*m+o.y,_=(o.y-2*a[0].y+s.y)*y*y+2*(a[0].y-o.y)*y+o.y;return 10>this.getEuclideanDistance({x:h,y:c},{x:h,y:b})||10>this.getEuclideanDistance({x:h,y:c},{x:h,y:_})},solveCubic:function(t,e,i,r){var n=void 0,o=void 0,s=void 0,a=void 0,l=void 0,h=void 0,c=void 0,u=void 0,f=void 0,d=void 0,p=void 0,g=void 0,v=void 0,m=void 0,y=void 0,b=void 0,_=void 0,x=(3*i/t-e*e/(t*t))/3,w=(e*e*e/(t*t*t)*2-9*e*i/(t*t)+r/t*27)/27,L=w*w/4+x*x*x/27;return L>0?(n=-w/2+Math.sqrt(L),s=0>n?-1:1,o=Math.pow(n*s,1/3),o*=s,a=-w/2-Math.sqrt(L),s=0>a?-1:1,l=Math.pow(a*s,1/3),l*=s,h=o+l-e/(3*t)):(c=Math.sqrt(w*w/4-L),s=0>c?-1:1,u=Math.pow(c*s,1/3)*s,f=Math.acos(-w/(2*c)),g=u*Math.cos(f/3)*2-e/(3*t),v=-1*u,m=Math.cos(f/3),y=Math.sqrt(3)*Math.sin(f/3),e/3*t*-1,b=v*(m+y)-e/(3*t),_=v*(m-y)-e/(3*t),g*=1e14,g=Math.round(g),g/=1e14,b*=1e14,b=Math.round(b),b/=1e14,_*=1e14,_=Math.round(_),_/=1e14,0>g||g>1||(h=g),0>b||b>1||(h=b),0>_||_>1||(h=_)),x+w+L==0&&(0>r&&(d=-1),0>r||(d=1),d>0&&(p=Math.pow(r/t,1/3),p*=-1),0>d&&(r*=-1,p=Math.pow(r/t,1/3)),h=p),h},makeCubicBezierCurve:function(t,e,i,r,n){var o={x:0,y:0},s=1-n,a=s*s,l=a*s;return o.x=t.x*l+3*e.x*a*n+3*i.x*s*n*n+r.x*n*n*n,o.y=t.y*l+3*e.y*a*n+3*i.y*s*n*n+r.y*n*n*n,o},cubicBezierCurve:function(t,e,i,r){var n=this.pointLatLngToXY(i,r),o=n.start,s=n.end,a=n.ctrlPoints,l={x:t,y:e};r&&(l=L.point(t,e).add(r));var h=l.x;return 10>=this.getEuclideanDistance(l,this.makeCubicBezierCurve(o,a[0],a[1],s,this.solveCubic(s.x-3*a[1].x+3*a[0].x-o.x,3*a[1].x-6*a[0].x+3*o.x,3*a[0].x-3*o.x,o.x-h)))},pointOnBezierCurve:function(t,e,i){var r=i.ctrlPoints||[],n=this.getBufferedOffset();switch(r.length){case 0:return this.straightBezierCurve(t,e,i,n);case 1:return this.quadraticBezierCurve(t,e,i,n);case 2:return this.cubicBezierCurve(t,e,i,n);default:return console.error(" do not support control points more than two"),!1}return!1},findObjectByXy:function(t,e){var i=this.data.features,r=!0,n=!1,o=void 0;try{for(var s,a=i[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var l=s.value;if(this.pointOnBezierCurve(t,e,l))return l}}catch(t){n=!0,o=t}finally{try{!r&&a.return&&a.return()}finally{if(n)throw o}}return null}});e.default=function(t){return new h(t)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BubbleLayer=void 0;var r=Object.assign||function(t){for(var e=1;arguments.length>e;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},n=i(1),o=i(4),s=function(t){return t&&t.__esModule?t:{default:t}}(o),a=i(0),l={gap:3},h=e.BubbleLayer=s.default.extend({_forceRenderKeys:["radius","fill","gap","valueName","getValue"],initialize:function(t){t=r({},l,t),s.default.prototype.initialize.call(this,t)},createBubble:function(t,e,i){var r=this.getValue(t),o=(0,a.getScale)(r,this.options.radius),s=(0,a.pointToPixel)(t,e,this._map,i);if(void 0==s)return null;var l=(0,a.getScale)(r,this.options.fill),h=new n.fabric.Circle({radius:o,strokeWidth:2,fill:"#fff",stroke:l,originX:"center",originY:"center"}),c=new n.fabric.Circle({radius:o-this.options.gap,fill:l,originX:"center",originY:"center"}),u=[h,c];if(this.options.font){u.push(new n.fabric.Text(""+r,{originX:"center",originY:"center",fontSize:this.options.font.size,fill:this.options.font.fill}))}return new n.fabric.Group(u,{originX:"center",originY:"center",top:s.y,left:s.x})},render:function(t){var e=this;if(void 0!=t){this.renderInMultiFrames(t,function(t,i,r){return e.createBubble(t,i,r)},500)}},findObjectByXy:function(t,e){for(var i=this.data.features,r=this._map.getSize(),n=i.length-1;n>-1;n--){var o=i[n],s=this.getValue(o),l=(0,a.getScale)(s,this.options.radius),h=new L.Bounds(L.point([-l,-l]),r.add([l,l])),c=(0,a.pointToPixel)(o,h,this._map);if(void 0!=c){if(Math.pow(l,2)>=Math.pow(t-c.x,2)+Math.pow(e-c.y,2))return o}}return null}});e.default=function(t){return new h(t)}},function(t,e,i){"use strict";function r(t,e,i){var r=t.lat;return": "+t.lng.toFixed(9)+"\n<br/>\n: "+r.toFixed(9)+"\n<br/>\n: "+e+" \n<br/>\n"+(i?"":"")+"\n<br/>\n\n  "}Object.defineProperty(e,"__esModule",{value:!0}),e.CircleRangeLayer=void 0;var n=Object.assign||function(t){for(var e=1;arguments.length>e;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t};i(2);var o=i(3),s=function(t){return t&&t.__esModule?t:{default:t}}(o);i(16);var a={strokeColor:"rgba(255,0,0,1)",strokeWeight:3,fillColor:"rgba(255,0,0,0.5)",toolTipContent:r,toolTipClass:"circle-range-tooltip",disableEditWhenMouseUp:!1},l=e.CircleRangeLayer=L.Layer.extend({initialize:function(t){this.setOptions(n({},a,t)),this.circle={editing:!1},this.isCirclEditEnabled=!0,this.prevent=!1,this.timer=0},setOptions:function(t){L.setOptions(this,t)},onAdd:function(t){this._map=t,this._initMapEvents(),this.enableEdit()},onRemove:function(){this._destroy()},_destroy:function(){clearTimeout(this.openCircleEditTimer);for(var t in this.mapEvents)this._map.off(t,this.mapEvents[t]);this.unlockMap(),this.removeCircleInstance(),this.removeToolTip()},_initMapEvents:function(){this.mapEvents={mousedown:this.onMouseDown.bind(this),mousemove:s.default.throttle(this.onMouseMove.bind(this),50),mouseup:this.onMouseUp.bind(this),zoomend:this.onZoomEnd.bind(this)};for(var t=["zoomend"],e=0;1>e;e++){var i=t[e];this._map.on(i,this.mapEvents[i])}},onMouseDown:function(t){var e=this;this.openCircleEditTimer=setTimeout(function(){e.removeCircleInstance(),e.removeToolTip(),e.circle={startLatlng:t.latlng,endLatlng:t.latlng,radius:0,editing:!0},e.initCircle(),e.renderToolTip(),e._map.on("mousemove",e.mapEvents.mousemove)},200)},onMouseMove:function(t){if(void 0!=this._map&&this.circle.editing){this.circle.endLatlng=t.latlng;var e=this.circle;this.circle.radius=this._map.distance(e.startLatlng,e.endLatlng),this.drawCircle(),this.renderToolTip(),this.fire("circlechange",this.circle)}},onMouseUp:function(){void 0!=this._map&&(clearTimeout(this.openCircleEditTimer),this.options.disableEditWhenMouseUp&&this.disableEdit(),this.circle.editing&&(this.circle.editing=!1,this.fire("circleconfirm",this.circle),this._map.off("mousemove",this.mapEvents.mousemove)))},onZoomEnd:function(){this.updateToolTipPosition()},lockMap:function(){this._map.dragging.disable(),this._map.doubleClickZoom.disable()},unlockMap:function(){this._map.dragging.enable(),this._map.doubleClickZoom.enable()},disableEdit:function(){this.isCirclEditEnabled=!1;for(var t=["mouseup","mousedown"],e=0;2>e;e++){var i=t[e];this._map.off(i,this.mapEvents[i])}this.unlockMap(),this.renderToolTip(),this.fire("disableedit")},enableEdit:function(){this.isCirclEditEnabled=!0;for(var t=["mouseup","mousedown"],e=0;2>e;e++){var i=t[e];this._map.on(i,this.mapEvents[i])}this.lockMap(),this.renderToolTip(),this.fire("enableedit")},initCircle:function(){var t=this;this.circleInstance=L.circle(this.circle.startLatlng),this.circleInstance.options.pane=this.options.pane,this.circleInstance.setStyle({weight:this.options.strokeWeight,color:this.options.strokeColor,fill:!0,fillColor:this.options.fillColor}),this.circleInstance.on("click",function(){t.timer=setTimeout(function(){t.prevent||(t.isCirclEditEnabled?t.disableEdit():t.enableEdit()),t.prevent=!1},200)}),this.circleInstance.on("dblclick",function(){clearTimeout(t.timer),t.prevent=!0,t.fire("circleaffirm",t.circle),t.removeCircleInstance(),t.removeToolTip()}),this.circleInstance.addTo(this._map)},drawCircle:function(){this.circleInstance.setRadius(this.circle.radius)},renderToolTip:function(){var t=this.circle,e=t.startLatlng,i=t.radius;void 0!=e&&(void 0==this.toolTip&&(this.toolTip=L.DomUtil.create("span",this.options.toolTipClass,this._map.getPane(this.options.pane))),this.updateToolTipPosition(),this.toolTip.innerHTML=this.options.toolTipContent(e,i,this.isCirclEditEnabled))},updateToolTipPosition:function(){if(void 0!=this.toolTip){var t=this._map.latLngToLayerPoint(this.circle.endLatlng);L.DomUtil.setPosition(this.toolTip,t)}},removeCircleInstance:function(){this.circleInstance&&(this.circleInstance.off(),this.circleInstance.remove(),this.circleInstance=void 0)},removeToolTip:function(){this.toolTip&&(L.DomUtil.remove(this.toolTip),this.toolTip=void 0)}});l.fireEvents=["circlechange","circleconfirm","enableedit","disableedit","circleaffirm"],e.default=function(t){return new l(t)}},function(t,e,i){"use strict";function r(t,e,i){var r=t.lat;return": "+t.lng.toFixed(9)+"\n<br/>\n: "+r.toFixed(9)+"\n<br/>\n: "+e+" \n  "}function n(){return L.divIcon({html:""})}function o(){return L.divIcon({html:""})}Object.defineProperty(e,"__esModule",{value:!0}),e.CircleRangeLayer=void 0;var s=Object.assign||function(t){for(var e=1;arguments.length>e;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t};i(2);var a=i(3);i(16);var l={strokeColor:"rgba(255,0,0,1)",strokeWeight:3,dashArray:"5, 5",radiusStrokeColor:"rgba(255,0,0,1)",radiusStrokeWeight:3,radiusDashArray:"5, 5",fillColor:"rgba(255,0,0,0.5)",toolTipContent:r,toolTipClass:"circle-range-tooltip",disableEditWhenMouseUp:!1,renderBorderHandler:n,renderCenterHandler:o,isCirclEditEnabled:!0,pane:"circle-range-pane",centerHandlerTooltip:""},h=e.CircleRangeLayer=L.Layer.extend({initialize:function(t){if(void 0==t.initCircle)throw Error("options.initCircle cannot be empty");this.setOptions(s({},l,t)),this.isCirclEditEnabled=this.options.isCirclEditEnabled,this.prevent=!1,this.timer=0},initCircle:function(t){var e=t.startLatlng,i=t.endLatlng;this.circle={startLatlng:L.latLng(e),endLatlng:L.latLng(i),radius:this._map.distance(e,i)}},setOptions:function(t){L.setOptions(this,t),this._map&&this.options.circle&&this.options.circle!==this.circle&&(this.initCircle(this.options.circle),this.renderCircle())},onAdd:function(t){this._map=t,void 0==this.getPane()&&this._map.createPane(this.options.pane),this._initMapEvents(),this.initCircle(this.options.initCircle),this.initCircleInstance(),this.initCircleRadius(),this.initCenterHandler(),this.initBorderHandler(),this.renderCircle(),this.enableEdit()},onRemove:function(){this._destroy()},_destroy:function(){this._destroyMapEvents(),this.removeLeafletInstance(this.polyline),this.removeLeafletInstance(this.circleInstance),this.removeLeafletInstance(this.centerHandler),this.removeLeafletInstance(this.borderHandler),this.removeToolTip()},_initMapEvents:function(){this.mapEvents={zoomend:this.onZoomEnd.bind(this)};for(var t=["zoomend"],e=0;1>e;e++){var i=t[e];this._map.on(i,this.mapEvents[i])}},_destroyMapEvents:function(){for(var t in this.mapEvents)this._map.off(t,this.mapEvents[t])},onZoomEnd:function(){this.updateToolTipPosition()},enableEdit:function(){L.setOptions(this.centerHandler.options,{draggable:!0}),L.setOptions(this.borderHandler.options,{draggable:!0}),this.isCirclEditEnabled=!0,this.fire("enableedit")},disableEdit:function(){L.setOptions(this.centerHandler.options,{draggable:!1}),L.setOptions(this.borderHandler.options,{draggable:!1}),this.isCirclEditEnabled=!1,this.fire("disableedit")},getPaneName:function(){var t=this._map.getPanes(),e=this.getPane();for(var i in t)if(t[i]===e)return i},initCircleInstance:function(){this.circleInstance=L.circle(this.circle.startLatlng,{pane:this.getPaneName()}),this.circleInstance.setStyle({weight:this.options.strokeWeight,color:this.options.strokeColor,dashArray:this.options.dashArray,fill:!0,fillColor:this.options.fillColor}),this.circleInstance.addTo(this._map)},initCircleRadius:function(){this.polyline=L.polyline([this.circle.startLatlng,this.circle.endLatlng],{pane:this.getPaneName(),weight:this.options.radiusStrokeWeight,color:this.options.radiusStrokeColor,dashArray:this.options.radiusDashArray}),this.polyline.addTo(this._map)},initCenterHandler:function(){var t=this,e=this.options.renderCenterHandler();if(!(e instanceof L.Icon))throw Error("renderCenterHandler must return an object instanceof L.Icon");this.centerHandler=L.marker(this.circle.startLatlng,{icon:e,draggable:this.isCirclEditEnabled,pane:this.getPaneName(),zIndexOffset:1e3});var i=this.options.centerHandlerTooltip;"function"==typeof i&&(i=function(e){return t.options.centerHandlerTooltip(t.circle.startLatlng,t.circle.radius,t.isCirclEditEnabled,e)}),i&&this.centerHandler.bindTooltip(i),this.centerHandler.on("drag",function(){var e=t.centerHandler.getLatLng(),i=t.circle.startLatlng,r=t.circle.endLatlng,n={lat:r.lat+e.lat-i.lat,lng:r.lng+e.lng-i.lng};t.circle=s({},t.circle,{startLatlng:e,endLatlng:n}),t.borderHandler.setLatLng(n),t.renderCircle(),t.fire("circlechange",t.circle)}),this.centerHandler.addTo(this._map)},initBorderHandler:function(){var t=this,e=this.options.renderBorderHandler();if(!(e instanceof L.Icon))throw Error("renderCenterHandler must return an object instanceof L.Icon");this.borderHandler=L.marker(this.circle.endLatlng,{icon:e,draggable:this.isCirclEditEnabled,pane:this.getPaneName(),zIndexOffset:1e3}),this.borderHandler.on("drag",function(){var e=t.borderHandler.getLatLng();t.circle=s({},t.circle,{endLatlng:e,radius:t._map.distance(t.circle.startLatlng,e)}),t.renderCircle(),t.fire("circlechange",t.circle)}),this.borderHandler.addTo(this._map)},renderCircle:function(){this.renderToolTip(),this.renderCircleRadius(),this.renderCenterHandler(),this.renderBorderHandler(),this.circleInstance.setLatLng(this.circle.startLatlng),this.circleInstance.setRadius(this.circle.radius)},renderCenterHandler:function(){this.centerHandler.setLatLng(this.circle.startLatlng)},renderBorderHandler:function(){this.borderHandler.setLatLng(this.circle.endLatlng)},renderCircleRadius:function(){this.polyline.setLatLngs([this.circle.startLatlng,this.circle.endLatlng])},renderToolTip:function(){var t=this.circle,e=t.startLatlng,i=t.radius;void 0!=e&&(void 0==this.toolTip&&(this.toolTip=L.DomUtil.create("span",this.options.toolTipClass,this.getPane())),this.updateToolTipPosition(),this.toolTip.innerHTML=this.options.toolTipContent(e,i,this.isCirclEditEnabled))},updateToolTipPosition:function(){if(void 0!=this.toolTip){var t=this._map.latLngToLayerPoint(this.circle.endLatlng);L.DomUtil.setPosition(this.toolTip,t)}},removeLeafletInstance:function(t){t&&(t.off(),t.remove())},removeToolTip:function(){this.toolTip&&(L.DomUtil.remove(this.toolTip),this.toolTip=void 0)}});h.fireEvents=["circlechange","circleconfirm","enableedit","disableedit","circleaffirm"],e.default=function(t){return new h(t)}},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){for(var i={},r=["baseUrl","id","version","extent","filter","transforms","time","token","geohash_level"],n=0;9>n;n++){var o=r[n],s=t[o],a=s;p.default.isObject(s)?a=encodeURIComponent(JSON.stringify(s)):void 0==s&&(a=""),i[o]=a}return e(i)}function l(t,e){return t.extent&&t.extent.geohashes&&t.extent.geohashes.length>1?t.extent.geohashes.map(function(i){return a(f({},t,{extent:f({},t.extent,{geohashes:[i]})}),e)}):a(t,e)}function h(t){var e=t.baseUrl,i=t.version,r=t.id,n=t.extent,o=t.filter,s=t.transforms,a=t.time,l=t.token,h=t.geohash_level;if(!l)throw Error("token cannot be empty");if(!r)throw Error("id cannot be empty");if(!i)throw Error("version cannot be empty");return e+"/datasource/"+i+"/data/"+r+"?extent="+n+"&filter="+o+"&transforms="+s+"&time="+a+"&geohash_level="+h+"&token="+l}Object.defineProperty(e,"__esModule",{value:!0});var c=function(){function t(t,e){for(var i=0;e.length>i;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),u=function t(e,i,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,i,r)}if("value"in n)return n.value;var s=n.get;if(void 0!==s)return s.call(r)},f=Object.assign||function(t){for(var e=1;arguments.length>e;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},d=i(3),p=r(d),g=i(9),v=r(g);e.default=function(t){function e(){var t,i,r,s;n(this,e);for(var a=arguments.length,l=Array(a),c=0;a>c;c++)l[c]=arguments[c];return i=r=o(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(l))),r.template=h,s=i,o(r,s)}return s(e,t),c(e,[{key:"preload",value:function(t){return t=f({},this.props,t),t.url=l(t,this.template),u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"preload",this).call(this,t)}},{key:"_request",value:function(t){return this.props.url=l(this.props,this.template),u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_request",this).call(this,t)}},{key:"setTemplate",value:function(t){this.template=t}},{key:"setProps",value:function(t){this.props=f({},this.props,t)}}]),e}(v.default)},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;e.length>i;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=i(5),l=function(t){return t&&t.__esModule?t:{default:t}}(a);e.default=function(t){function e(){return r(this,e),n(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),s(e,[{key:"setData",value:function(t){this.props.data=t}},{key:"_request",value:function(t){this.emitLoadStart(t),this.emitLoadData(t,this.props.data),this.emitLoad(t)}}]),e}(l.default)},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t){if(void 0==t)throw Error("dsMap must be a datasourceMap");for(var e in t){if(!(t[e]instanceof u.default))throw Error(e+" is not a datasource")}}Object.defineProperty(e,"__esModule",{value:!0});var a=Object.assign||function(t){for(var e=1;arguments.length>e;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},l=function(){function t(t,e){for(var i=0;e.length>i;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),h=i(8),c=i(5),u=function(t){return t&&t.__esModule?t:{default:t}}(c),f={ignoreOutdateRequest:!0,dsMap:{}};e.default=function(t){function e(t){r(this,e),s(t.dsMap);var i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a({},f,t)));return i.listenerMap={},i.dataMap={},i.initDsMapListeners(),i}return o(e,t),l(e,[{key:"setDsMap",value:function(t){s(t),this.destroyDsMapListeners(),this.dataMap={},this.props.dsMap=t,this.initDsMapListeners()}},{key:"addDs",value:function(t,e){if(void 0!=this.props.dsMap[t])throw Error("ds "+t+" has been in map. duplicte key");this.props.dsMap[t]=e,this.initDsListeners(t)}},{key:"removeDs",value:function(t){this.destroyDsListeners(t),delete this.dataMap[t],delete this.props.dsMap[t]}},{key:"initDsMapListeners",value:function(){for(var t in this.props.dsMap)this.initDsListeners(t)}},{key:"initDsListeners",value:function(t){var e=this.props.dsMap[t],i={loadstart:this.onDsLoadStart.bind(this,t,e),loaddata:this.onDsLoadData.bind(this,t,e),load:this.onDsLoad.bind(this,t,e)};this.listenerMap[t]=i;for(var r in i)e.on(r,i[r])}},{key:"destroyDsMapListeners",value:function(){for(var t in this.props.dsMap)this.destroyDsEvent(t)}},{key:"destroyDsEvent",value:function(t){var e=this.props.dsMap[t],i=this.listenerMap[t];for(var r in i)e.removeListener(r,i[r]);delete this.listenerMap[t]}},{key:"onDsLoadStart",value:function(t,e,i){void 0==this.dataMap[t]&&(this.dataMap[t]={}),this.dataMap[t].request={rid:i}}},{key:"onDsLoadData",value:function(t,e,i,r){var n=this.dataMap[t];this.props.ignoreOutdateRequest&&n.request.rid!=i||(void 0!=n.request.data?(n.request.data=[n.request.data],n.request.data.push(r)):n.request.data=r)}},{key:"onDsLoad",value:function(t,e,i){var r=this.dataMap[t];if(!this.props.ignoreOutdateRequest||r.request.rid==i){r.data=r.request.data,delete r.request;var n=this.props.parseData(this.getUnparsedData());void 0!=n&&this.emitLoadData(i,n)}}},{key:"onDsLoadError",value:function(t,e,i,r){this.emitLoadError(i,r)}},{key:"getUnparsedData",value:function(){var t={};for(var e in this.dataMap)t[e]=this.dataMap[e].data;return t}},{key:"_request",value:function(t){var e=this;this.emitLoadStart(t);var i=Object.keys(this.props.dsMap).map(function(t){return e.props.dsMap[t].request()});return(0,h.all)(i).then(function(){e.emitLoad(t)}).catch(function(i){e.emitLoadError(t,i)})}}]),e}(u.default)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DrawLayer=void 0;var r=Object.assign||function(t){for(var e=1;arguments.length>e;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t};i(2),i(48),i(45),Reflect.deleteProperty(L.Icon.Default.prototype,"_getIconUrl"),L.Icon.Default.mergeOptions({iconRetinaUrl:i(54),iconUrl:i(55),shadowUrl:i(56)});var n=e.DrawLayer=L.Layer.extend({initialize:function(t){this.setOptions(t)},setOptions:function(t){L.setOptions(this,t)},onAdd:function(t){this._map=t,this.editableLayers=new L.FeatureGroup,this._map.addLayer(this.editableLayers);var e={edit:{featureGroup:this.editableLayers,remove:!0}},i=r({},this.options,e);this.setOptions(i),this.drawControl=new L.Control.Draw(i),this._map.addControl(this.drawControl),this._initMapEvents()},_drawCtrlEvent:function(t){this.fire(t.type.match(/^draw:(.*)$/)[1],t)},_getGeoJSON:function(t){var e=this.editableLayers&&this.editableLayers._layers,i={type:"FeatureCollection",features:[]},r=!0,n=!1,o=void 0;try{for(var s,a=Object.keys(e)[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){i.features.push(e[s.value].toGeoJSON())}}catch(t){n=!0,o=t}finally{try{!r&&a.return&&a.return()}finally{if(n)throw o}}return this.fire("data",{data:i})},onDrawCreate:function(t){this.editableLayers.addLayer(t.layer),this._getGeoJSON(t)},_initMapEvents:function(){var t=!0,e=!1,i=void 0;try{for(var r,n=Object.keys(L.Draw.Event)[Symbol.iterator]();!(t=(r=n.next()).done);t=!0){var o=r.value;this._map.on(L.Draw.Event[o],this._drawCtrlEvent.bind(this))}}catch(t){e=!0,i=t}finally{try{!t&&n.return&&n.return()}finally{if(e)throw i}}this._map.on(L.Draw.Event.CREATED,this.onDrawCreate.bind(this)),this._map.on(L.Draw.Event.EDITED,this._getGeoJSON.bind(this)),this._map.on(L.Draw.Event.DELETED,this._getGeoJSON.bind(this))},_destroy:function(){var t=!0,e=!1,i=void 0;try{for(var r,n=Object.keys(L.Draw.Event)[Symbol.iterator]();!(t=(r=n.next()).done);t=!0){var o=r.value;this._map.off(L.Draw.Event[o],this._drawCtrlEvent.bind(this))}}catch(t){e=!0,i=t}finally{try{!t&&n.return&&n.return()}finally{if(e)throw i}}this._map.off(L.Draw.Event.CREATED,this.onDrawCreate.bind(this)),this._map.off(L.Draw.Event.EDITED,this._getGeoJSON.bind(this)),this._map.off(L.Draw.Event.DELETED,this._getGeoJSON.bind(this))},onRemove:function(){this._destroy()}});n.fireEvents=Object.keys(L.Draw.Event).map(function(t){return L.Draw.Event[t].match(/^draw:(.*)$/)[1]}).concat(["data"]),e.default=function(t){return new n(t)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GridHeatLayer=void 0;var r=Object.assign||function(t){for(var e=1;arguments.length>e;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},n=i(1),o=i(4),s=function(t){return t&&t.__esModule?t:{default:t}}(o),a=i(0),l={minPixel:5,gridSize:{width:1,height:1,unit:"arc"}},h=e.GridHeatLayer=s.default.extend({_forceRenderKeys:["gridSize","fill","minPixel","valueName","getValue","minPixel","unit"],initialize:function(t){t=r({},l,t),s.default.prototype.initialize.call(this,t)},createGrid:function(t,e,i,r){var o=(0,a.pointToPixel)(t,e,this._map,r);if(void 0==o)return null;var s=this.getValue(t),l=(0,a.getScale)(s,this.options.fill);return new n.fabric.Rect({originX:"center",originY:"center",fill:l,top:o.y,left:o.x,width:i.width,height:i.height})},gridSizeToPixel:function(t){var e=this._map,i=t.unit,r=t.width,n=t.height;if("arc"===i)return(0,a.arcToPixel)(r,n,this.options.minPixel,e);if("meter"===i)return(0,a.meterToPixel)(r,n,this.options.minPixel,e);if("pixel"===i)return{width:r,height:n};throw Error("only support unit [arc, meter, pixel]")},render:function(t){var e=this;if(void 0!=t){var i=this.options.gridSize,r=this.gridSizeToPixel(i);this.renderInMultiFrames(t,function(t,i,n){return e.createGrid(t,i,r,n)},2e3)}},findObjectByXy:function(t,e){for(var i=this.data.features,r=this.gridSizeToPixel(this.options.gridSize),n=this._map.getSize(),o=new L.Bounds(L.point([-r.width,-r.height]),n.add([r.width,r.height])),s=i.length-1;s>-1;s--){var l=i[s],h=(0,a.pointToPixel)(l,o,this._map);if(void 0!=h&&(Math.abs(h.x-t)<=r.width/2&&Math.abs(h.y-e)<=r.height/2))return l}return null}});e.default=function(t){return new h(t)}},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.HeatLayer=void 0;var n=Object.assign||function(t){for(var e=1;arguments.length>e;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t};i(2);var o=i(52),s=r(o),a=i(13),l=r(a),h=i(0),c={blur:3,radius:5,minOpacity:.1,unit:"pixel",minPixel:1};e.HeatLayer=L.HeatLayer=l.default.extend({_forceRenderKeys:["fill","radius","blur","valueName","getValue","unit","minPixel"],initialize:function(t){t=n({},c,t),l.default.prototype.initialize.call(this,t),this.grid=[]},_initEvents:function(){var t=this;this.on("loadstart",function(e){t.clearGrid(),t.data={type:"FeatureCollection",features:[]}}),this.on("loaddata",function(e){t.data.features=t.data.features.concat(e.data.features),t.addDataToGrid(e.data)}),this.on("load",function(e){t._forceRender()})},_onMapResize:function(){l.default.prototype._onMapResize.call(this,this._map),this.getHeat().resize(),this.clearGrid()},_onMapMoveend:function(){this.clearGrid(),l.default.prototype._onMapMoveend.call(this,this._map)},_onZoomstart:function(t){l.default.prototype._onZoomstart.call(this,this._map),this.clearGrid()},convertUnit:function(t){if("meter"===this.options.unit)return(0,h.meterToPixel)(t,0,this.options.minPixel,this._map).width;if("arc"===this.options.unit)return(0,h.arcToPixel)(t,0,this.options.minPixel,this._map).width;if("pixel"===this.options.unit)return t;throw Error("only support unit [arc, meter, pixel]")},_updateOptions:function(){if(void 0!=this.heat){var t=this.getHeat(),e=this.options,i=e.radius,r=e.blur;if(t.radius(this.convertUnit(i),this.convertUnit(r)),this.options.fill){var n=this.getFillMax(),o=this.getFillMin();t.gradient(this.getGradient()),t.max(n-o)}}},onAdd:function(t){l.default.prototype.onAdd.call(this,t),this.initHeat()},getFillMax:function(){var t=this.options.fill.domain;return 0===t.length?1:t[t.length-1]},getFillMin:function(){var t=this.options.fill.domain;return 2>t.length?0:t[0]},getGradient:function(){var t=this.options.fill,e=t.domain,i=t.range,r=this.getFillMax(),n=this.getFillMin(),o=r-n;o>0||(o=1);var s={};return e.forEach(function(t,e){var r=t-n;r>0||(r=0),s[r/o]=i[e]}),s},initHeat:function(){if(this.heat)return this.heat;var t=this.createCanvas();return this.heat=(0,s.default)(t),this._updateOptions(),this.heat},getHeat:function(){return this.heat?this.heat:this.initHeat()},_lockAllCanvas:function(){l.default.prototype._lockAllCanvas.call(this),this.heat=void 0},addDataToGrid:function(t){if(void 0!=t){for(var e=this.getFillMin(),i=(this.getHeat(),this.getRenderContainerBounds()),r=this.getBufferedOffset(),n=this.grid,o=0,s=t.features.length;s>o;o++){var a=t.features[o],l=(0,h.pointToPixel)(a,i,this._map,r);if(void 0!=l){var c=l.x,u=l.y,f=this.getValue(a);isNaN(f)&&(f=e),n[u]=n[u]||[];var d=n[u][c];d?d[2]+=f:n[u][c]=[c,u,f]}}return n}},renderGrid:function(t){for(var e=this.getHeat(),i=this.getFillMax(),r=this.getFillMin(),n=[],o=0,s=t.length;s>o;o++)if(t[o])for(var a=0,l=t[o].length;l>a;a++){var h=t[o][a];h&&n.push([Math.round(h[0]),Math.round(h[1]),Math.min(h[2]-r,i-r)])}this.clearAllCanvas(),e.data(n).draw(this.options.minOpacity)},clearGrid:function(){this.grid=[]},recomputeDataToGrid:function(){0===this.grid.length&&this.addDataToGrid(this.data)},setOptions:function(t){var e=(0,h.isAnyRenderOptionsChange)(t,this.options,this._forceRenderKeys),i=this.options.valueName!==t.valueName||this.options.getValue!==t.getValue;if(L.setOptions(this,t),t.ds&&this._ds!==t.ds)return this._ds.destroy(),void this._initDs();i&&this.clearGrid(),(i||e)&&this._forceRender()},render:function(){var t=this;this.recomputeDataToGrid(),this._updateOptions(),this.renderGrid(this.grid),this.raf(function(){t.fire("renderdone")})}});e.default=L.heatLayer=function(t,e){return new L.HeatLayer(t,e)}},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.HoneyCombLayer=void 0;var n=Object.assign||function(t){for(var e=1;arguments.length>e;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},o=i(1),s=i(11),a=r(s),l=i(10),h=r(l),c=i(4),u=r(c),f=i(0),d={minPixel:5,honeycombSize:{edge:5,unit:"pixel"},strokeWidth:3,stroke:{range:["rgb(0, 167, 157)"]},fill:{range:["rgba(0, 167, 157, 0.5)"]}},p=e.HoneyCombLayer=u.default.extend({_forceRenderKeys:["honeycombSize","fill","valueName","getValue","minPixel","unit","stroke","strokeWidth"],initialize:function(t){t=n({},d,t),u.default.prototype.initialize.call(this,t)},getHoneycombPixel:function(t,e){var i=e.edge;return[{x:t.x-.5*i,y:t.y-Math.sqrt(3)*i/2},{x:t.x-i,y:t.y},{x:t.x-.5*i,y:t.y+Math.sqrt(3)*i/2},{x:t.x+.5*i,y:t.y+Math.sqrt(3)*i/2},{x:t.x+i,y:t.y},{x:t.x+.5*i,y:t.y-Math.sqrt(3)*i/2}]},createHoneycomb:function(t,e,i,r){var n=(0,f.pointToPixel)(t,e,this._map,r);if(void 0==n)return null;var s=this.getHoneycombPixel(n,i),a=this.getValue(t),l=(0,f.getScale)(a,this.options.stroke),h=(0,f.getScale)(a,this.options.fill);return new o.fabric.Polygon(s,{stroke:l,strokeWidth:this.options.strokeWidth,strokeLineCap:"round",strokeLineJoin:"round",fill:h})},honeycombToPixel:function(t){var e=this._map,i=t.unit,r=t.edge,n=this.options.minPixel,o=n;switch(i){case"arc":o=(0,f.arcPerPixel)(e);break;case"meter":o=r/(0,f.meterPerPixel)(e);break;case"pixel":o=r;break;default:throw Error("only support unit [arc, meter, pixel]")}return{edge:n>o?n:o}},render:function(t){var e=this;if(void 0!=t){var i=this.options.honeycombSize,r=this.honeycombToPixel(i);this.renderInMultiFrames(t,function(t,i,n){return e.createHoneycomb(t,i,r,n)},2e3)}},honeycombToLatLng:function(t,e){var i=this,r=t.geometry.coordinates,n=this._map.latLngToContainerPoint([r[1],r[0]]),o=this.getHoneycombPixel(n,e),s=o.map(function(t){var e=(0,f.pixelToPoint)(t.x,t.y,i._map);return[e.lng,e.lat]});return s[0][0]===s[s.length-1][0]&&s[0][1]===s[s.length-1][1]||s.push(s[0]),[s]},findObjectByXy:function(t,e){var i=this.data.features,r=(0,f.pixelToPoint)(t,e,this._map),n=h.default.point([r.lng,r.lat]),o=this.honeycombToPixel(this.options.honeycombSize),s=!0,l=!1,c=void 0;try{for(var u,d=i[Symbol.iterator]();!(s=(u=d.next()).done);s=!0){var p=u.value,g=h.default.polygon(this.honeycombToLatLng(p,o));if((0,a.default)(n,g))return p}}catch(t){l=!0,c=t}finally{try{!s&&d.return&&d.return()}finally{if(l)throw c}}return null}});e.default=function(t){return new p(t)}},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=Object.assign||function(t){for(var e=1;arguments.length>e;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},a=function(){function t(t,e){for(var i=0;e.length>i;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),l=i(15),h=function(t){return t&&t.__esModule?t:{default:t}}(l);e.default=new(function(t){function e(){r(this,e);var t=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.registerList=[],t}return o(e,t),a(e,[{key:"register",value:function(t,e,i){if(void 0==e._map)throw Error("layer must be register after add to map");e._map===this.map&&this.isInited||this.initEventsOnMap(e._map),this.registerList.push({name:t,layer:e,zIndex:i}),this.registerList=this.registerList.sort(function(t,e){return t.zIndex-e.zIndex})}},{key:"unregister",value:function(t){for(var e=0,i=this.registerList.length;i>e;e++)if(this.registerList[e].name===t)return this.registerList.splice(e,1)}},{key:"initEventsOnMap",value:function(t){this._map=t,t.on("click",this.onMapClick,this),t.on("mousemove",this.onMapMouseMove,this),this.isInited=!0}},{key:"onMapClick",value:function(t){var e=this,i=t.containerPoint;clearTimeout(this.clickTimer),this.clickTimer=setTimeout(function(){var r=e.getByXy(i);r&&e.emit("clickobject",r.object,r.layer,i,t)},100)}},{key:"onMapMouseMove",value:function(t){var e=this,i=t.containerPoint;this.hoverTimer&&clearTimeout(this.hoverTimer),this.hoverTimer=setTimeout(function(){var r=e.getByXy(i);r&&e.emit("hoverobject",r.object,r.layer,i,t),e.hoverTimer=null},100)}},{key:"getByXy",value:function(t){for(var e=t.x,i=t.y,r=this.registerList.length-1;r>-1;r--){var n=this.registerList[r],o=n.layer;if(void 0!=o.findObjectByXy){var a=void 0;try{a=o.findObjectByXy(e,i)}catch(t){console.error("layer "+n.name+" findObject error",t)}if(a)return{layer:o,object:s({},a,{layerName:n.name})}}}}},{key:"destroy",value:function(){this._map.off("click",this.onMapClick,this),this.removeAllListeners()}}]),e}(h.default))},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.MarkerLayer=void 0;var n=Object.assign||function(t){for(var e=1;arguments.length>e;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t};i(2);var o=i(17),s=(r(o),i(6)),a=(r(s),i(7)),l=r(a),h=i(0),c={renderFeature:function(t){return L.divIcon({html:'<pre style="width: 100px; border: 1px solid black; background: rgba(0,0,0,0.7); color: white; word-break: break-all; white-space: normal">'+JSON.stringify(t)+"</pre>",className:"geoengin-marker"})},opacity:1,renderPopup:function(t){return null},renderTooltip:function(t){return null}},u=e.MarkerLayer=l.default.extend({_forceRenderKeys:["renderFeature","opacity","pane"],initialize:function(t){t=n({},c,t),l.default.prototype.initialize.call(this,t),this.group=null,this.clickObject=null},_initEvents:function(){var t=this;this.on("loadstart",function(e){t.data={type:"FeatureCollection",features:[]}}),this.on("loaddata",function(e){t.renderRid!==e.rid&&(t.clear(),t.renderRid=e.rid),t.data.features=t.data.features.concat(e.data.features),t.render(e.data)})},_initMapEvents:function(){this._map.on("click",this.onMapClick,this)},_removeMapEvents:function(){this._map.off("click",this.onMapClick,this)},_destroy:function(){this._destroyDs(),this.off()},onAdd:function(t){this._map=t,this._initEvents(),this._initMapEvents(),this._initDs()},onRemove:function(){this.clear(),this._destroy()},onMapClick:function(t){if(t.group===this.group)return this.clickObject=t.feature;this.clickObject=null},setOptions:function(t){var e=(0,h.isAnyRenderOptionsChange)(t,this.options,this._forceRenderKeys);if(L.setOptions(this,t),t.ds&&this._ds!==t.ds)return this._ds.destroy(),void this._initDs();e&&(this.clear(),this.render())},clear:function(){this.group&&(this.group.remove(),this.clickObject=null,this.group=null)},getPaneName:function(){var t=this._map.getPanes(),e=this.getPane();for(var i in t)if(t[i]===e)return i},renderFeature:function(t){var e=t.geometry.coordinates,i=[e[1],e[0]],r=this.options.renderFeature(t),n=this.options.renderPopup(t),o=this.options.renderTooltip(t);if(!(r instanceof L.Icon))throw Error("renderFeature must return an object instanceof L.Icon");if(n&&!(n instanceof L.Popup))throw Error("renderPopup must return an object instanceof L.popup");if(o&&!(o instanceof L.Tooltip))throw Error("renderTooltip must return an object instanceof L.tooltip");var s=new L.Marker(i,{pane:this.getPaneName(),opacity:this.options.opacity,icon:r});return n&&s.bindPopup(n),o&&s.bindTooltip(o),s._feature_=t,s},initMarkerGroupEvent:function(){var t=this;this.group.on("click",function(e){t._map.fire("click",n({},e,{feature:e.layer._feature_,group:t.group}))})},render:function(t){if(void 0!=t){if(void 0!=(t&&t.features&&t.features[0])){var e=t.features.map(this.renderFeature.bind(this));this.group=L.featureGroup(e),this.group.addTo(this._map),this.initMarkerGroupEvent()}}},findObjectByXy:function(){return this.clickObject?this.clickObject:null}});e.default=function(t){return new u(t)}},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.PolygonLayer=void 0;var n=Object.assign||function(t){for(var e=1;arguments.length>e;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},o=i(1),s=i(4),a=r(s),l=i(0),h=i(11),c=r(h),u=i(10),f=r(u),d={strokeWidth:3,stroke:{range:["rgb(0, 167, 157)"]},fill:{range:["rgba(0, 167, 157, 0.5)"]}},p=e.PolygonLayer=a.default.extend({_forceRenderKeys:["fill","stroke","strokeWidth","valueName","getValue"],initialize:function(t){t=n({},d,t),a.default.prototype.initialize.call(this,t)},createPolygon:function(t,e,i){var r=(0,l.polygonToPixels)(t,e,this._map,i);if(void 0==r)return null;var n=this.getValue(t),s=(0,l.getScale)(n,this.options.stroke||d.stroke),a=(0,l.getScale)(n,this.options.fill||d.fill);return new o.fabric.Polygon(r,{stroke:s,strokeWidth:this.options.strokeWidth,strokeLineCap:"round",strokeLineJoin:"round",fill:a})},render:function(t){var e=this;void 0!=t&&this.renderInMultiFrames(t,function(t,i,r){return e.createPolygon(t,i,r)},2e3)},findObjectByXy:function(t,e){var i=this.data.features,r=(0,l.pixelToPoint)(t,e,this._map),n=f.default.point([r.lng,r.lat]),o=!0,s=!1,a=void 0;try{for(var h,u=i[Symbol.iterator]();!(o=(h=u.next()).done);o=!0){var d=h.value,p=f.default.polygon((0,l.getPolygonCoords)(d));if((0,c.default)(n,p))return d}}catch(t){s=!0,a=t}finally{try{!o&&u.return&&u.return()}finally{if(s)throw a}}return null}});e.default=function(t){return new p(t)}},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.PolylineLayer=void 0;var n=Object.assign||function(t){for(var e=1;arguments.length>e;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},o=i(1),s=i(4),a=r(s),l=i(0),h=i(14),c=(r(h),i(42)),u=i(43),f=i(3),d=r(f),p={strokeWidth:3},g=e.PolylineLayer=a.default.extend({_forceRenderKeys:["pattern","stroke","strokeWidth","valueName","getValue"],initialize:function(t){t=n({},p,t),a.default.prototype.initialize.call(this,t)},loadPolylineRenderOptions:function(){if(void 0==this.options.pattern)return Promise.resolve({type:"stroke"});var t=this.options.pattern,e=t.src,i=t.patternWidth,r=t.patternHeight,n=t.cropOffsetX,s=t.cropOffsetY;return new Promise(function(t,a){var l=new Image;l.src=e,l.onload=function(){t({type:"pattern",pattern:new o.fabric.Pattern({source:(0,c.createPatternCanvas)(l,i/l.width,r/l.height,n,s,0,0)})})},l.onerror=a})},clonePixels:function(t){var e=[];return t.forEach(function(t){e.push({x:t.x,y:t.y})}),e},createPolylineWithPattern:function(t,e,i){var r=this.options.pattern,n=r.paddingX,s=r.paddingY,a=r.background,l=new o.fabric.Polyline(this.clonePixels(t),{stroke:d.default.isFunction(a)?a(i):a,strokeWidth:e.source.height,strokeLineCap:"round",strokeLineJoin:"round",fill:"transparent"});l.minY=l.minY+e.source.height/2,l.minX=l.minX+e.source.height/2;var h=[l];return h=h.concat((0,u.createPolylineDecoratorsWithPattern)(this.clonePixels(t),e,n,s))},createSimplePolyline:function(t,e){var i=this.getValue(t),r=(0,l.getScale)(i,this.options.stroke),n=new o.fabric.Polyline(e,{stroke:r,strokeWidth:this.options.strokeWidth,strokeLineCap:"round",strokeLineJoin:"round",fill:"transparent"});return n.minY=n.minY+this.options.strokeWidth/2,n.minX=n.minX+this.options.strokeWidth/2,n},createPolyline:function(t,e,i,r){var n=(0,l.lineToPixels)(t,e,this._map,r);return void 0==n?null:"pattern"===i.type?this.createPolylineWithPattern(n,i.pattern,t):this.createSimplePolyline(t,n)},render:function(t){var e=this;void 0!=t&&this.loadPolylineRenderOptions().then(function(i){e.renderInMultiFrames(t,function(t,r,n){return e.createPolyline(t,r,i,n)},2e3)}).catch(function(t){console.error(t)})},findObjectByXy:function(t,e){for(var i=this.data.features,r=this._map.getSize(),n=new L.Bounds(L.point([0,0]),r),o=i.length-1;o>-1;o--){var s=i[o],a=(0,l.lineToPixels)(s,n,this._map);if(void 0!=a&&(0,l.isPointOnLine)(t,e,a,this.options.strokeWidth))return s}return null}});e.default=function(t){return new g(t)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={arrowSample:i(53)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ScatterLayer=void 0;var r=Object.assign||function(t){for(var e=1;arguments.length>e;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},n=i(1),o=i(4),s=function(t){return t&&t.__esModule?t:{default:t}}(o),a=i(0),l={radius:5},h=e.ScatterLayer=s.default.extend({_forceRenderKeys:["radius","fill","valueName","getValue"],initialize:function(t){t=r({},l,t),s.default.prototype.initialize.call(this,t)},createScatter:function(t,e,i){var r=(0,a.pointToPixel)(t,e,this._map,i);if(void 0==r)return null;var o=this.getValue(t),s=(0,a.getScale)(o,this.options.fill);return new n.fabric.Circle({originX:"center",originY:"center",fill:s,radius:this.options.radius,top:r.y,left:r.x})},render:function(t){var e=this;if(void 0!=t){this.renderInMultiFrames(t,function(t,i,r){return e.createScatter(t,i,r)},2e3)}},findObjectByXy:function(t,e){for(var i=this.data.features,r=this.options.radius,n=Math.pow(r,2),o=this._map.getSize(),s=new L.Bounds(L.point([-r,-r]),o.add([r,r])),l=i.length-1;l>-1;l--){var h=i[l],c=(0,a.pointToPixel)(h,s,this._map);if(void 0!=c){if(n>=Math.pow(t-c.x,2)+Math.pow(e-c.y,2))return h}}return null}});e.default=function(t){return new h(t)}},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.SymbolLayer=void 0;var n=Object.assign||function(t){for(var e=1;arguments.length>e;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},o=i(1),s=i(4),a=r(s),l=i(0),h=i(3),c=r(h),u=i(40),f=r(u),d={},p={src:"http://img4.imgtn.bdimg.com/it/u=4019847970,3718827910&fm=21&gp=0.jpg",originX:"center",originY:"center",width:10,height:10,angle:0},g=e.SymbolLayer=a.default.extend({_forceRenderKeys:["symbol","valueName","getValue"],initialize:function(t){t=n({},d,t),a.default.prototype.initialize.call(this,t),this.imageCache={}},getCache:function(t,e){for(var i=(0,l.getScale)(t,this.options.symbol),r=Object.keys(e),n=(0,l.getKey)(i),o=0,s=r.length;s>o;++o){var a=r[o];if(a===n)return e[a]}console.error(Error("symbol "+n+" not found"));var h=new Image(i.width,i.height);return h.src=f.default,{symbol:i,imgElement:h}},generateImageCache:function(t){var e=this;return new Promise(function(i,r){var o=(0,l.getKey)(t);t=n({},p,t);var s=new Image(t.width,t.height);s.src=t.src,s.onload=function(){e.imageCache[o]={symbol:t,imgElement:s},i()},s.onerror=function(){console.error(Error("symbol "+t.src+" load failed")),i()}})},initImageCache:function(){var t=this;return this.initImageCachePromise?this.initImageCachePromise:this.initImageCachePromise=c.default.isArray(this.options.symbol.range)?Promise.all(this.options.symbol.range.map(function(e){return t.generateImageCache(e)})):this.generateImageCache(this.options.symbol)},clearImageCache:function(){this.initImageCachePromise=null,this.imageCache={}},createSymbol:function(t,e,i,r){var n=this.getValue(t),s=this.getCache(n,e),a=s.symbol,h=s.imgElement,c=(0,l.pointToPixel)(t,i,this._map,r);return void 0==c?null:new o.fabric.Image(h,{left:c.x,top:c.y,originX:a.originX,originY:a.originY,angle:a.angle})},render:function(t){var e=this;if(void 0!=t){var i=this.renderRid;this.initImageCache().then(function(){if(i===e.renderRid){var r=e.imageCache;e.renderInMultiFrames(t,function(t,i,n){return e.createSymbol(t,r,i,n)},2e3)}}).catch(function(t){console.error(t)})}},findObjectByXy:function(t,e){for(var i=this.data.features,r=this._map.getSize(),n=this.imageCache,o=i.length-1;o>-1;o--){var s=i[o],a=this.getValue(s),h=this.getCache(a,n),c=h.symbol,u=new L.Bounds(L.point([-c.width,-c.height]),r.add([c.width,c.height])),f=(0,l.pointToPixel)(s,u,this._map);if(void 0!=f&&!("center"===c.originX&&Math.abs(f.x-t)>c.width/2||"center"===c.originY&&Math.abs(f.y-e)>c.height/2||"left"===c.originX&&f.x-t>c.width||"top"===c.originY&&f.y-e>c.height||"right"===c.originX&&-(f.x-t)>c.width||"bottom"===c.originY&&-(f.y-e)>c.height))return s}return null},setOptions:function(t){c.default.isEqual(t.symbol,this.options.symbol)||this.clearImageCache(),a.default.prototype.setOptions.call(this,t)}});e.default=function(t){return new g(t)}},function(t,e,i){t.exports=i(50)()},function(t,e){t.exports=__WEBPACK_EXTERNAL_MODULE_38__},function(t,e){t.exports=__WEBPACK_EXTERNAL_MODULE_39__},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEABAMAAACuXLVVAAAAA1BMVEUzNDVszlHHAAAAAXRSTlMAQObYZgAAAAlwSFlzAAAAAAAAAAAB6mUWpAAAADZJREFUeJztwQEBAAAAgiD/r25IQAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA7waBAAABw08RwAAAAABJRU5ErkJggg=="},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.version=e.fabric=e.utils=e.resource=e.MixDatasource=e.MemoryDatasource=e.GeoEngineDatasource=e.HttpDatasource=e.Datasource=e.BaseDatasource=void 0;var a=Object.assign||function(t){for(var e=1;arguments.length>e;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},l=function(){function t(t,e){for(var i=0;e.length>i;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),h=function t(e,i,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,i,r)}if("value"in n)return n.value;var s=n.get;if(void 0!==s)return s.call(r)},c=i(5);Object.defineProperty(e,"BaseDatasource",{enumerable:!0,get:function(){return r(c).default}});var u=i(9);Object.defineProperty(e,"Datasource",{enumerable:!0,get:function(){return r(u).default}}),Object.defineProperty(e,"HttpDatasource",{enumerable:!0,get:function(){return r(u).default}});var f=i(23);Object.defineProperty(e,"GeoEngineDatasource",{enumerable:!0,get:function(){return r(f).default}});var d=i(24);Object.defineProperty(e,"MemoryDatasource",{enumerable:!0,get:function(){return r(d).default}});var p=i(25);Object.defineProperty(e,"MixDatasource",{enumerable:!0,get:function(){return r(p).default}});var g=i(34);Object.defineProperty(e,"resource",{enumerable:!0,get:function(){return r(g).default}});var v=i(0);Object.defineProperty(e,"utils",{enumerable:!0,get:function(){return r(v).default}});var m=i(1);Object.defineProperty(e,"fabric",{enumerable:!0,get:function(){return m.fabric}}),i(2);var y=i(38),b=(r(y),i(37)),_=r(b),x=i(39),w=i(3),L=r(w),C=i(28),k=i(33),T=i(27),O=i(32),E=i(26),S=i(35),M=i(20),P=i(29),D=i(19),A=i(18),j=i(36),I=i(21),R=i(22),B=i(31),F=i(30),N=r(F),z=(e.version="3.0.3",{}),H={HeatLayer:C.HeatLayer,ScatterLayer:S.ScatterLayer,BubbleLayer:M.BubbleLayer,AdminDistrictLayer:A.AdminDistrictLayer,SymbolLayer:j.SymbolLayer,GridHeatLayer:T.GridHeatLayer,PolylineLayer:k.PolylineLayer,PolygonLayer:O.PolygonLayer,MarkerLayer:B.MarkerLayer,HoneyCombLayer:P.HoneyCombLayer,BezierCurveLayer:D.BezierCurveLayer};for(var G in H)z[G]=function(t,e){var i,r;return r=i=function(e){function i(t,e){n(this,i);var r=o(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t,e));return r.map=r.props.map||r.context.map,r}return s(i,e),l(i,[{key:"componentWillMount",value:function(){h(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"componentWillMount",this).call(this),this.leafletElement=new t(this.getOptions(this.props))}},{key:"getOptions",value:function(t){return void 0==h(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"getOptions",this)?t:h(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"getOptions",this).call(this,t)}},{key:"componentDidMount",value:function(){h(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"componentDidMount",this).call(this),this.leafletElement.addTo(this.map),this.registerToLayerDB(this.props),N.default.on("clickobject",this.onClickObject,this),N.default.on("hoverobject",this.onHoverObject,this),this.props.onAddToMap&&this.props.onAddToMap(this.map)}},{key:"componentDidUpdate",value:function(t){if(t!==this.props){(this.props.name||this.props.layerDBIndex)&&(N.default.unregister(t.name),this.registerToLayerDB(this.props));this.leafletElement.setOptions(this.getOptions(this.props))}}},{key:"componentWillUnmount",value:function(){h(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"componentWillUnmount",this).call(this),this.props.layerDBIndex&&N.default.unregister(this.props.name),N.default.removeListener("clickobject",this.onClickObject,this),N.default.removeListener("hoverobject",this.onHoverObject,this),this.leafletElement.remove(),this.props.onRemoveFromMap&&this.props.onRemoveFromMap(this.map)}},{key:"registerToLayerDB",value:function(t){var e=t.layerDBIndex,i=t.name;e&&N.default.register(i,this.leafletElement,e)}},{key:"onClickObject",value:function(t,e,i,r){t.layerName===this.props.name&&"function"==typeof this.props.onClickObject&&this.props.onClickObject(t,e,i,r)}},{key:"onHoverObject",value:function(t,e,i,r){t.layerName===this.props.name&&"function"==typeof this.props.onHoverObject&&this.props.onHoverObject(t,e,i,r)}},{key:"render",value:function(){return null}}]),i}(x.MapComponent),i.displayName=e,i.propTypes={onClickObject:_.default.func,onHoverObject:_.default.func,onAddToMap:_.default.func,onRemoveFromMap:_.default.func},i.contextTypes={map:_.default.object,pane:_.default.string},r}(H[G],G);var U={CircleRangeLayer:I.CircleRangeLayer,CircleRangeLayerV2:R.CircleRangeLayer,DrawLayer:E.DrawLayer};for(var X in U)z[X]=function(t,e){function i(t){return"on"+L.default.capitalize(t)}var r,c,u=t.fireEvents,f={},d=!0,p=!1,g=void 0;try{for(var v,m=u[Symbol.iterator]();!(d=(v=m.next()).done);d=!0){f[i(v.value)]=_.default.func}}catch(t){p=!0,g=t}finally{try{!d&&m.return&&m.return()}finally{if(p)throw g}}return c=r=function(e){function r(t,e){n(this,r);var i=o(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,t,e));return i.map=i.props.map||i.context.map,i}return s(r,e),l(r,[{key:"componentWillMount",value:function(){h(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"componentWillMount",this).call(this),this.leafletElement=new t(this.props)}},{key:"componentDidMount",value:function(){h(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"componentDidMount",this).call(this),this.leafletElement.addTo(this.map),this.rebindEvents(),this.props.onAddToMap&&this.props.onAddToMap(this.map)}},{key:"componentDidUpdate",value:function(t){if(t!==this.props){this.leafletElement.setOptions(this.props),this.rebindEvents()}}},{key:"rebindEvents",value:function(){var t=!0,e=!1,r=void 0;try{for(var n,o=u[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){var s=n.value,a=i(s);this.leafletElement.off(s),this.props[a]&&this.leafletElement.on(s,this.props[a])}}catch(t){e=!0,r=t}finally{try{!t&&o.return&&o.return()}finally{if(e)throw r}}}},{key:"componentWillUnmount",value:function(){h(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"componentWillUnmount",this).call(this),this.leafletElement.off(),this.leafletElement.remove(),this.props.onRemoveFromMap&&this.props.onRemoveFromMap(this.map)}},{key:"render",value:function(){return null}}]),r}(x.MapComponent),r.displayName=e,r.propTypes=a({},f,{onAddToMap:_.default.func,onRemoveFromMap:_.default.func}),r.contextTypes={map:_.default.object},c}(U[X],X);e.default=z,window.react_geoengine=a({default:z},e)},function(t,e,i){"use strict";function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=document.createElement("canvas");l.width=t.width*e+o,l.height=t.height*i+s;var h=l.getContext("2d"),c=o,u=s;return a>0&&(h.translate(l.width/2,l.height/2),c=-l.width/2,u=-l.height/2,h.rotate(-a)),h.drawImage(t,r,n,t.width-r,t.height-n,c,u,t.width*e,t.height*i),l}Object.defineProperty(e,"__esModule",{value:!0}),e.createPatternCanvas=r},function(t,e,i){"use strict";function r(t,e,i,r){var n=e.source.width+i,a=e.source.width,l=[];return t.slice(1).map(function(r,s){var h=t[s],c=[h,r],u=[],f=o.default.getVector(c),d=o.default.getLen(f);if(n>a+d)return void(a+=d);var p=o.default.getRotateAngle(c,[{x:0,y:0},{x:1,y:0}]),g=o.default.getRotateDegree(c,[{x:0,y:0},{x:1,y:0}]),v=e.source.height/2*Math.sin(-p),m=-e.source.height/2*Math.cos(-p);u.degree=g,u.offsetX=h.x+v,u.offsetY=h.y+m,u.len=d;var y={x:i-a,y:0};u.push(y);for(var b=y;d-b.x-n>e.source.width;){var _={x:b.x+n,y:0};u.push(_),b=_}l.push(u),a=d-(b.x+e.source.width)}),l.map(function(t){var i=[new s.fabric.Rect({top:0,left:0,width:0,height:e.source.height,fill:"transparent",strokeWidth:0})];return i=i.concat(t.map(function(t){return new s.fabric.Rect({top:t.y,left:t.x,width:e.source.width,height:e.source.height,fill:e,strokeWidth:0})})),new s.fabric.Group(i,{top:t.offsetY,left:t.offsetX,angle:-t.degree,originX:"left",originY:"top"})})}Object.defineProperty(e,"__esModule",{value:!0}),e.createPolylineDecoratorsWithPattern=r;var n=i(14),o=function(t){return t&&t.__esModule?t:{default:t}}(n),s=i(1)},function(t,e,i){var r;!function(n){"use strict";function o(t,e){var i=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(i>>16)<<16|65535&i}function s(t,e){return t<<e|t>>>32-e}function a(t,e,i,r,n,a){return o(s(o(o(e,t),o(r,a)),n),i)}function l(t,e,i,r,n,o,s){return a(e&i|~e&r,t,e,n,o,s)}function h(t,e,i,r,n,o,s){return a(e&r|i&~r,t,e,n,o,s)}function c(t,e,i,r,n,o,s){return a(e^i^r,t,e,n,o,s)}function u(t,e,i,r,n,o,s){return a(i^(e|~r),t,e,n,o,s)}function f(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;var i,r,n,s,a,f=1732584193,d=-271733879,p=-1732584194,g=271733878;for(i=0;t.length>i;i+=16)r=f,n=d,s=p,a=g,f=l(f,d,p,g,t[i],7,-680876936),g=l(g,f,d,p,t[i+1],12,-389564586),p=l(p,g,f,d,t[i+2],17,606105819),d=l(d,p,g,f,t[i+3],22,-1044525330),f=l(f,d,p,g,t[i+4],7,-176418897),g=l(g,f,d,p,t[i+5],12,1200080426),p=l(p,g,f,d,t[i+6],17,-1473231341),d=l(d,p,g,f,t[i+7],22,-45705983),f=l(f,d,p,g,t[i+8],7,1770035416),g=l(g,f,d,p,t[i+9],12,-1958414417),p=l(p,g,f,d,t[i+10],17,-42063),d=l(d,p,g,f,t[i+11],22,-1990404162),f=l(f,d,p,g,t[i+12],7,1804603682),g=l(g,f,d,p,t[i+13],12,-40341101),p=l(p,g,f,d,t[i+14],17,-1502002290),d=l(d,p,g,f,t[i+15],22,1236535329),f=h(f,d,p,g,t[i+1],5,-165796510),g=h(g,f,d,p,t[i+6],9,-1069501632),p=h(p,g,f,d,t[i+11],14,643717713),d=h(d,p,g,f,t[i],20,-373897302),f=h(f,d,p,g,t[i+5],5,-701558691),g=h(g,f,d,p,t[i+10],9,38016083),p=h(p,g,f,d,t[i+15],14,-660478335),d=h(d,p,g,f,t[i+4],20,-405537848),f=h(f,d,p,g,t[i+9],5,568446438),g=h(g,f,d,p,t[i+14],9,-1019803690),p=h(p,g,f,d,t[i+3],14,-187363961),d=h(d,p,g,f,t[i+8],20,1163531501),f=h(f,d,p,g,t[i+13],5,-1444681467),g=h(g,f,d,p,t[i+2],9,-51403784),p=h(p,g,f,d,t[i+7],14,1735328473),d=h(d,p,g,f,t[i+12],20,-1926607734),f=c(f,d,p,g,t[i+5],4,-378558),g=c(g,f,d,p,t[i+8],11,-2022574463),p=c(p,g,f,d,t[i+11],16,1839030562),d=c(d,p,g,f,t[i+14],23,-35309556),f=c(f,d,p,g,t[i+1],4,-1530992060),g=c(g,f,d,p,t[i+4],11,1272893353),p=c(p,g,f,d,t[i+7],16,-155497632),d=c(d,p,g,f,t[i+10],23,-1094730640),f=c(f,d,p,g,t[i+13],4,681279174),g=c(g,f,d,p,t[i],11,-358537222),p=c(p,g,f,d,t[i+3],16,-722521979),d=c(d,p,g,f,t[i+6],23,76029189),f=c(f,d,p,g,t[i+9],4,-640364487),g=c(g,f,d,p,t[i+12],11,-421815835),p=c(p,g,f,d,t[i+15],16,530742520),d=c(d,p,g,f,t[i+2],23,-995338651),f=u(f,d,p,g,t[i],6,-198630844),g=u(g,f,d,p,t[i+7],10,1126891415),p=u(p,g,f,d,t[i+14],15,-1416354905),d=u(d,p,g,f,t[i+5],21,-57434055),f=u(f,d,p,g,t[i+12],6,1700485571),g=u(g,f,d,p,t[i+3],10,-1894986606),p=u(p,g,f,d,t[i+10],15,-1051523),d=u(d,p,g,f,t[i+1],21,-2054922799),f=u(f,d,p,g,t[i+8],6,1873313359),g=u(g,f,d,p,t[i+15],10,-30611744),p=u(p,g,f,d,t[i+6],15,-1560198380),d=u(d,p,g,f,t[i+13],21,1309151649),f=u(f,d,p,g,t[i+4],6,-145523070),g=u(g,f,d,p,t[i+11],10,-1120210379),p=u(p,g,f,d,t[i+2],15,718787259),d=u(d,p,g,f,t[i+9],21,-343485551),f=o(f,r),d=o(d,n),p=o(p,s),g=o(g,a);return[f,d,p,g]}function d(t){var e,i="",r=32*t.length;for(e=0;r>e;e+=8)i+=String.fromCharCode(t[e>>5]>>>e%32&255);return i}function p(t){var e,i=[];for(i[(t.length>>2)-1]=void 0,e=0;i.length>e;e+=1)i[e]=0;var r=8*t.length;for(e=0;r>e;e+=8)i[e>>5]|=(255&t.charCodeAt(e/8))<<e%32;return i}function g(t){return d(f(p(t),8*t.length))}function v(t,e){var i,r,n=p(t),o=[],s=[];for(o[15]=s[15]=void 0,n.length>16&&(n=f(n,8*t.length)),i=0;16>i;i+=1)o[i]=909522486^n[i],s[i]=1549556828^n[i];return r=f(o.concat(p(e)),512+8*e.length),d(f(s.concat(r),640))}function m(t){var e,i,r="0123456789abcdef",n="";for(i=0;t.length>i;i+=1)e=t.charCodeAt(i),n+=r.charAt(e>>>4&15)+r.charAt(15&e);return n}function y(t){return unescape(encodeURIComponent(t))}function b(t){return g(y(t))}function _(t){return m(b(t))}function x(t,e){return v(y(t),y(e))}function w(t,e){return m(x(t,e))}function L(t,e,i){return e?i?x(e,t):w(e,t):i?b(t):_(t)}void 0!==(r=function(){return L}.call(e,i,e,t))&&(t.exports=r)}()},function(t,e){},function(t,e,i){"use strict";function r(t){return function(){return t}}var n=function(){};n.thatReturns=r,n.thatReturnsFalse=r(!1),n.thatReturnsTrue=r(!0),n.thatReturnsNull=r(null),n.thatReturnsThis=function(){return this},n.thatReturnsArgument=function(t){return t},t.exports=n},function(t,e,i){"use strict";function r(t,e,i,r,o,s,a,l){if(n(e),!t){var h;if(void 0===e)h=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[i,r,o,s,a,l],u=0;h=Error(e.replace(/%s/g,function(){return c[u++]})),h.name="Invariant Violation"}throw h.framesToPop=1,h}}var n=function(t){};t.exports=r},function(t,e){!function(t,e,i){function r(t,e){for(;(t=t.parentElement)&&!t.classList.contains(e););return t}L.drawVersion="0.4.14",L.Draw={},L.drawLocal={draw:{toolbar:{actions:{title:"Cancel drawing",text:"Cancel"},finish:{title:"Finish drawing",text:"Finish"},undo:{title:"Delete last point drawn",text:"Delete last point"},buttons:{polyline:"Draw a polyline",polygon:"Draw a polygon",rectangle:"Draw a rectangle",circle:"Draw a circle",marker:"Draw a marker",circlemarker:"Draw a circlemarker"}},handlers:{circle:{tooltip:{start:"Click and drag to draw circle."},radius:"Radius"},circlemarker:{tooltip:{start:"Click map to place circle marker."}},marker:{tooltip:{start:"Click map to place marker."}},polygon:{tooltip:{start:"Click to start drawing shape.",cont:"Click to continue drawing shape.",end:"Click first point to close this shape."}},polyline:{error:"<strong>Error:</strong> shape edges cannot cross!",tooltip:{start:"Click to start drawing line.",cont:"Click to continue drawing line.",end:"Click last point to finish line."}},rectangle:{tooltip:{start:"Click and drag to draw rectangle."}},simpleshape:{tooltip:{end:"Release mouse to finish drawing."}}}},edit:{toolbar:{actions:{save:{title:"Save changes",text:"Save"},cancel:{title:"Cancel editing, discards all changes",text:"Cancel"},clearAll:{title:"Clear all layers",text:"Clear All"}},buttons:{edit:"Edit layers",editDisabled:"No layers to edit",remove:"Delete layers",removeDisabled:"No layers to delete"}},handlers:{edit:{tooltip:{text:"Drag handles or markers to edit features.",subtext:"Click cancel to undo changes."}},remove:{tooltip:{text:"Click on a feature to remove."}}}}},L.Draw.Event={},L.Draw.Event.CREATED="draw:created",L.Draw.Event.EDITED="draw:edited",L.Draw.Event.DELETED="draw:deleted",L.Draw.Event.DRAWSTART="draw:drawstart",L.Draw.Event.DRAWSTOP="draw:drawstop",L.Draw.Event.DRAWVERTEX="draw:drawvertex",L.Draw.Event.EDITSTART="draw:editstart",L.Draw.Event.EDITMOVE="draw:editmove",L.Draw.Event.EDITRESIZE="draw:editresize",L.Draw.Event.EDITVERTEX="draw:editvertex",L.Draw.Event.EDITSTOP="draw:editstop",L.Draw.Event.DELETESTART="draw:deletestart",L.Draw.Event.DELETESTOP="draw:deletestop",L.Draw.Event.TOOLBAROPENED="draw:toolbaropened",L.Draw.Event.TOOLBARCLOSED="draw:toolbarclosed",L.Draw.Event.MARKERCONTEXT="draw:markercontext",L.Draw=L.Draw||{},L.Draw.Feature=L.Handler.extend({initialize:function(t,e){this._map=t,this._container=t._container,this._overlayPane=t._panes.overlayPane,this._popupPane=t._panes.popupPane,e&&e.shapeOptions&&(e.shapeOptions=L.Util.extend({},this.options.shapeOptions,e.shapeOptions)),L.setOptions(this,e);var i=L.version.split(".");1!==parseInt(i[0],10)||2>parseInt(i[1],10)?L.Draw.Feature.include(L.Mixin.Events):L.Draw.Feature.include(L.Evented.prototype)},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DRAWSTART,{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DRAWSTOP,{layerType:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var t=this._map;t&&(L.DomUtil.disableTextSelection(),t.getContainer().focus(),this._tooltip=new L.Draw.Tooltip(this._map),L.DomEvent.on(this._container,"keyup",this._cancelDrawing,this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.off(this._container,"keyup",this._cancelDrawing,this))},setOptions:function(t){L.setOptions(this,t)},_fireCreatedEvent:function(t){this._map.fire(L.Draw.Event.CREATED,{layer:t,layerType:this.type})},_cancelDrawing:function(t){27===t.keyCode&&(this._map.fire("draw:canceled",{layerType:this.type}),this.disable())}}),L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:"#b00b00",timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),guidelineDistance:20,maxGuideLineLength:4e3,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!1,clickable:!0},metric:!0,feet:!0,nautic:!1,showLength:!0,zIndexOffset:2e3,factor:1,maxPoints:0},initialize:function(t,e){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this.options.drawError.message=L.drawLocal.draw.handlers.polyline.error,e&&e.drawError&&(e.drawError=L.Util.extend({},this.options.drawError,e.drawError)),this.type=L.Draw.Polyline.TYPE,L.Draw.Feature.prototype.initialize.call(this,t,e)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._markers=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new L.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("mouseout",this._onMouseOut,this).on("mousemove",this._onMouseMove,this).on("mousedown",this._onMouseDown,this).on("mouseup",this._onMouseUp,this).addTo(this._map),this._map.on("mouseup",this._onMouseUp,this).on("mousemove",this._onMouseMove,this).on("zoomlevelschange",this._onZoomEnd,this).on("touchstart",this._onTouch,this).on("zoomend",this._onZoomEnd,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._clearHideErrorTimeout(),this._cleanUpShape(),this._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers,this._map.removeLayer(this._poly),delete this._poly,this._mouseMarker.off("mousedown",this._onMouseDown,this).off("mouseout",this._onMouseOut,this).off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._clearGuides(),this._map.off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this).off("zoomlevelschange",this._onZoomEnd,this).off("zoomend",this._onZoomEnd,this).off("touchstart",this._onTouch,this).off("click",this._onTouch,this)},deleteLastVertex:function(){if(1<this._markers.length){var t=this._markers.pop(),e=this._poly,i=e.getLatLngs(),r=i.splice(-1,1)[0];this._poly.setLatLngs(i),this._markerGroup.removeLayer(t),2>e.getLatLngs().length&&this._map.removeLayer(e),this._vertexChanged(r,!1)}},addVertex:function(t){if(this._markers.length>=2&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(t))return void this._showErrorTooltip();this._errorShown&&this._hideErrorTooltip(),this._markers.push(this._createMarker(t)),this._poly.addLatLng(t),2===this._poly.getLatLngs().length&&this._map.addLayer(this._poly),this._vertexChanged(t,!0)},completeShape:function(){1>=this._markers.length||(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_finishShape:function(){var t=this._poly._defaultShape?this._poly._defaultShape():this._poly.getLatLngs(),e=this._poly.newLatLngIntersects(t[t.length-1]);if(!this.options.allowIntersection&&e||!this._shapeIsValid())return void this._showErrorTooltip();this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_shapeIsValid:function(){return!0},_onZoomEnd:function(){null!==this._markers&&this._updateGuide()},_onMouseMove:function(t){var e=this._map.mouseEventToLayerPoint(t.originalEvent),i=this._map.layerPointToLatLng(e);this._currentLatLng=i,this._updateTooltip(i),this._updateGuide(e),this._mouseMarker.setLatLng(i),L.DomEvent.preventDefault(t.originalEvent)},_vertexChanged:function(t,e){this._map.fire(L.Draw.Event.DRAWVERTEX,{layers:this._markerGroup}),this._updateFinishHandler(),this._updateRunningMeasure(t,e),this._clearGuides(),this._updateTooltip()},_onMouseDown:function(t){if(!this._clickHandled&&!this._touchHandled&&!this._disableMarkers){this._onMouseMove(t),this._clickHandled=!0,this._disableNewMarkers();var e=t.originalEvent;this._startPoint.call(this,e.clientX,e.clientY)}},_startPoint:function(t,e){this._mouseDownOrigin=L.point(t,e)},_onMouseUp:function(t){var e=t.originalEvent;this._endPoint.call(this,e.clientX,e.clientY,t),this._clickHandled=null},_endPoint:function(e,i,r){if(this._mouseDownOrigin){var n=L.point(e,i).distanceTo(this._mouseDownOrigin),o=this._calculateFinishDistance(r.latlng);this.options.maxPoints>1&&this.options.maxPoints==this._markers.length+1?(this.addVertex(r.latlng),this._finishShape()):10>o&&L.Browser.touch?this._finishShape():Math.abs(n)<9*(t.devicePixelRatio||1)&&this.addVertex(r.latlng),this._enableNewMarkers()}this._mouseDownOrigin=null},_onTouch:function(t){var e,i,r=t.originalEvent;!r.touches||!r.touches[0]||this._clickHandled||this._touchHandled||this._disableMarkers||(e=r.touches[0].clientX,i=r.touches[0].clientY,this._disableNewMarkers(),this._touchHandled=!0,this._startPoint.call(this,e,i),this._endPoint.call(this,e,i,t),this._touchHandled=null),this._clickHandled=null},_onMouseOut:function(){this._tooltip&&this._tooltip._onMouseOut.call(this._tooltip)},_calculateFinishDistance:function(t){var e;if(this._markers.length>0){var i;if(this.type===L.Draw.Polyline.TYPE)i=this._markers[this._markers.length-1];else{if(this.type!==L.Draw.Polygon.TYPE)return 1/0;i=this._markers[0]}e=this._map.latLngToContainerPoint(i.getLatLng()).distanceTo(this._map.latLngToContainerPoint(new L.Marker(t,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset}).getLatLng()))}else e=1/0;return e},_updateFinishHandler:function(){var t=this._markers.length;t>1&&this._markers[t-1].on("click",this._finishShape,this),t>2&&this._markers[t-2].off("click",this._finishShape,this)},_createMarker:function(t){var e=new L.Marker(t,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});return this._markerGroup.addLayer(e),e},_updateGuide:function(t){var e=this._markers?this._markers.length:0;e>0&&(t=t||this._map.latLngToLayerPoint(this._currentLatLng),this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[e-1].getLatLng()),t))},_updateTooltip:function(t){var e=this._getTooltipText();t&&this._tooltip.updatePosition(t),this._errorShown||this._tooltip.updateContent(e)},_drawGuide:function(t,e){var i,r,n,o=Math.floor(Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))),s=this.options.guidelineDistance,a=this.options.maxGuideLineLength,l=o>a?o-a:s;for(this._guidesContainer||(this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane));o>l;l+=this.options.guidelineDistance)i=l/o,r={x:Math.floor(t.x*(1-i)+i*e.x),y:Math.floor(t.y*(1-i)+i*e.y)},n=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer),n.style.backgroundColor=this._errorShown?this.options.drawError.color:this.options.shapeOptions.color,L.DomUtil.setPosition(n,r)},_updateGuideColor:function(t){if(this._guidesContainer)for(var e=0,i=this._guidesContainer.childNodes.length;i>e;e++)this._guidesContainer.childNodes[e].style.backgroundColor=t},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var t,e,i=this.options.showLength;return 0===this._markers.length?t={text:L.drawLocal.draw.handlers.polyline.tooltip.start}:(e=i?this._getMeasurementString():"",t=1===this._markers.length?{text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:e}:{text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:e}),t},_updateRunningMeasure:function(t,e){var i,r,n=this._markers.length;1===this._markers.length?this._measurementRunningTotal=0:(i=n-(e?2:1),r=L.GeometryUtil.isVersion07x()?t.distanceTo(this._markers[i].getLatLng())*(this.options.factor||1):this._map.distance(t,this._markers[i].getLatLng())*(this.options.factor||1),this._measurementRunningTotal+=r*(e?1:-1))},_getMeasurementString:function(){var t,e=this._currentLatLng,i=this._markers[this._markers.length-1].getLatLng();return t=L.GeometryUtil.isVersion07x()?i&&e&&e.distanceTo?this._measurementRunningTotal+e.distanceTo(i)*(this.options.factor||1):this._measurementRunningTotal||0:i&&e?this._measurementRunningTotal+this._map.distance(e,i)*(this.options.factor||1):this._measurementRunningTotal||0,L.GeometryUtil.readableDistance(t,this.options.metric,this.options.feet,this.options.nautic,this.options.precision)},_showErrorTooltip:function(){this._errorShown=!0,this._tooltip.showAsError().updateContent({text:this.options.drawError.message}),this._updateGuideColor(this.options.drawError.color),this._poly.setStyle({color:this.options.drawError.color}),this._clearHideErrorTimeout(),this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1,this._clearHideErrorTimeout(),this._tooltip.removeError().updateContent(this._getTooltipText()),this._updateGuideColor(this.options.shapeOptions.color),this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_disableNewMarkers:function(){this._disableMarkers=!0},_enableNewMarkers:function(){setTimeout(function(){this._disableMarkers=!1}.bind(this),50)},_cleanUpShape:function(){this._markers.length>1&&this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var t=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,t)}}),L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:!1,showLength:!1,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},metric:!0,feet:!0,nautic:!1,precision:{}},initialize:function(t,e){L.Draw.Polyline.prototype.initialize.call(this,t,e),this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var t=this._markers.length;1===t&&this._markers[0].on("click",this._finishShape,this),t>2&&(this._markers[t-1].on("dblclick",this._finishShape,this),t>3&&this._markers[t-2].off("dblclick",this._finishShape,this))},_getTooltipText:function(){var t,e;return 0===this._markers.length?t=L.drawLocal.draw.handlers.polygon.tooltip.start:3>this._markers.length?(t=L.drawLocal.draw.handlers.polygon.tooltip.cont,e=this._getMeasurementString()):(t=L.drawLocal.draw.handlers.polygon.tooltip.end,e=this._getMeasurementString()),{text:t,subtext:e}},_getMeasurementString:function(){var t=this._area,e="";return t||this.options.showLength?(this.options.showLength&&(e=L.Draw.Polyline.prototype._getMeasurementString.call(this)),t&&(e+="<br>"+L.GeometryUtil.readableArea(t,this.options.metric,this.options.precision)),e):null},_shapeIsValid:function(){return this._markers.length>=3},_vertexChanged:function(t,e){var i;!this.options.allowIntersection&&this.options.showArea&&(i=this._poly.getLatLngs(),this._area=L.GeometryUtil.geodesicArea(i)),L.Draw.Polyline.prototype._vertexChanged.call(this,t,e)},_cleanUpShape:function(){var t=this._markers.length;t>0&&(this._markers[0].off("click",this._finishShape,this),t>2&&this._markers[t-1].off("dblclick",this._finishShape,this))}}),L.SimpleShape={},L.Draw.SimpleShape=L.Draw.Feature.extend({options:{repeatMode:!1},initialize:function(t,e){this._endLabelText=L.drawLocal.draw.handlers.simpleshape.tooltip.end,L.Draw.Feature.prototype.initialize.call(this,t,e)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._mapDraggable=this._map.dragging.enabled(),this._mapDraggable&&this._map.dragging.disable(),this._container.style.cursor="crosshair",this._tooltip.updateContent({text:this._initialLabelText}),this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this).on("touchstart",this._onMouseDown,this).on("touchmove",this._onMouseMove,this),e.addEventListener("touchstart",L.DomEvent.preventDefault,{passive:!1}))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._mapDraggable&&this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this).off("touchstart",this._onMouseDown,this).off("touchmove",this._onMouseMove,this),L.DomEvent.off(e,"mouseup",this._onMouseUp,this),L.DomEvent.off(e,"touchend",this._onMouseUp,this),e.removeEventListener("touchstart",L.DomEvent.preventDefault),this._shape&&(this._map.removeLayer(this._shape),delete this._shape)),this._isDrawing=!1},_getTooltipText:function(){return{text:this._endLabelText}},_onMouseDown:function(t){this._isDrawing=!0,this._startLatLng=t.latlng,L.DomEvent.on(e,"mouseup",this._onMouseUp,this).on(e,"touchend",this._onMouseUp,this).preventDefault(t.originalEvent)},_onMouseMove:function(t){var e=t.latlng;this._tooltip.updatePosition(e),this._isDrawing&&(this._tooltip.updateContent(this._getTooltipText()),this._drawShape(e))},_onMouseUp:function(){this._shape&&this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()}}),L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,showArea:!0,clickable:!0},metric:!0},initialize:function(t,e){this.type=L.Draw.Rectangle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.rectangle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,t,e)},disable:function(){this._enabled&&(this._isCurrentlyTwoClickDrawing=!1,L.Draw.SimpleShape.prototype.disable.call(this))},_onMouseUp:function(t){if(!this._shape&&!this._isCurrentlyTwoClickDrawing)return void(this._isCurrentlyTwoClickDrawing=!0);this._isCurrentlyTwoClickDrawing&&!r(t.target,"leaflet-pane")||L.Draw.SimpleShape.prototype._onMouseUp.call(this)},_drawShape:function(t){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,t)):(this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,t),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var t=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,t)},_getTooltipText:function(){var t,e,i,r=L.Draw.SimpleShape.prototype._getTooltipText.call(this),n=this._shape,o=this.options.showArea;return n&&(t=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),e=L.GeometryUtil.geodesicArea(t),i=o?L.GeometryUtil.readableArea(e,this.options.metric):""),{text:r.text,subtext:i}}}),L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default,repeatMode:!1,zIndexOffset:2e3},initialize:function(t,e){this.type=L.Draw.Marker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.marker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,t,e)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._tooltip.updateContent({text:this._initialLabelText}),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onTouch,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._map.off("click",this._onClick,this).off("click",this._onTouch,this),this._marker&&(this._marker.off("click",this._onClick,this),this._map.removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(t){var e=t.latlng;this._tooltip.updatePosition(e),this._mouseMarker.setLatLng(e),this._marker?(e=this._mouseMarker.getLatLng(),this._marker.setLatLng(e)):(this._marker=this._createMarker(e),this._marker.on("click",this._onClick,this),this._map.on("click",this._onClick,this).addLayer(this._marker))},_createMarker:function(t){return new L.Marker(t,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset})},_onClick:function(){this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_onTouch:function(t){this._onMouseMove(t),this._onClick()},_fireCreatedEvent:function(){var t=new L.Marker.Touch(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,t)}}),L.Draw.CircleMarker=L.Draw.Marker.extend({statics:{TYPE:"circlemarker"},options:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0,zIndexOffset:2e3},initialize:function(t,e){this.type=L.Draw.CircleMarker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circlemarker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,t,e)},_fireCreatedEvent:function(){var t=new L.CircleMarker(this._marker.getLatLng(),this.options);L.Draw.Feature.prototype._fireCreatedEvent.call(this,t)},_createMarker:function(t){return new L.CircleMarker(t,this.options)}}),L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showRadius:!0,metric:!0,feet:!0,nautic:!1},initialize:function(t,e){this.type=L.Draw.Circle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,t,e)},_drawShape:function(t){if(L.GeometryUtil.isVersion07x())var e=this._startLatLng.distanceTo(t);else var e=this._map.distance(this._startLatLng,t);this._shape?this._shape.setRadius(e):(this._shape=new L.Circle(this._startLatLng,e,this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var t=new L.Circle(this._startLatLng,this._shape.getRadius(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,t)},_onMouseMove:function(t){var e,i=t.latlng,r=this.options.showRadius,n=this.options.metric;if(this._tooltip.updatePosition(i),this._isDrawing){this._drawShape(i),e=this._shape.getRadius().toFixed(1);var o="";r&&(o=L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(e,n,this.options.feet,this.options.nautic)),this._tooltip.updateContent({text:this._endLabelText,subtext:o})}}}),L.Edit=L.Edit||{},L.Edit.Marker=L.Handler.extend({initialize:function(t,e){this._marker=t,L.setOptions(this,e)},addHooks:function(){var t=this._marker;t.dragging.enable(),t.on("dragend",this._onDragEnd,t),this._toggleMarkerHighlight()},removeHooks:function(){var t=this._marker;t.dragging.disable(),t.off("dragend",this._onDragEnd,t),this._toggleMarkerHighlight()},_onDragEnd:function(t){var e=t.target;e.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:e})},_toggleMarkerHighlight:function(){var t=this._marker._icon;t&&(t.style.display="none",L.DomUtil.hasClass(t,"leaflet-edit-marker-selected")?(L.DomUtil.removeClass(t,"leaflet-edit-marker-selected"),this._offsetMarker(t,-4)):(L.DomUtil.addClass(t,"leaflet-edit-marker-selected"),this._offsetMarker(t,4)),t.style.display="")},_offsetMarker:function(t,e){var i=parseInt(t.style.marginTop,10)-e,r=parseInt(t.style.marginLeft,10)-e;t.style.marginTop=i+"px",t.style.marginLeft=r+"px"}}),L.Marker.addInitHook(function(){L.Edit.Marker&&(this.editing=new L.Edit.Marker(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.Poly=L.Handler.extend({initialize:function(t){this.latlngs=[t._latlngs],t._holes&&(this.latlngs=this.latlngs.concat(t._holes)),this._poly=t,this._poly.on("revert-edited",this._updateLatLngs,this)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._poly._latlngs)?this._poly._latlngs:this._poly._latlngs[0]:this._poly._latlngs},_eachVertexHandler:function(t){for(var e=0;this._verticesHandlers.length>e;e++)t(this._verticesHandlers[e])},addHooks:function(){this._initHandlers(),this._eachVertexHandler(function(t){t.addHooks()})},removeHooks:function(){this._eachVertexHandler(function(t){t.removeHooks()})},updateMarkers:function(){this._eachVertexHandler(function(t){t.updateMarkers()})},_initHandlers:function(){this._verticesHandlers=[];for(var t=0;this.latlngs.length>t;t++)this._verticesHandlers.push(new L.Edit.PolyVerticesEdit(this._poly,this.latlngs[t],this._poly.options.poly))},_updateLatLngs:function(t){this.latlngs=[t.layer._latlngs],t.layer._holes&&(this.latlngs=this.latlngs.concat(t.layer._holes))}}),L.Edit.PolyVerticesEdit=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),drawError:{color:"#b00b00",timeout:1e3}},initialize:function(t,e,i){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this._poly=t,i&&i.drawError&&(i.drawError=L.Util.extend({},this.options.drawError,i.drawError)),this._latlngs=e,L.setOptions(this,i)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]:this._latlngs},addHooks:function(){var t=this._poly,e=t._path;t instanceof L.Polygon||(t.options.fill=!1,t.options.editing&&(t.options.editing.fill=!1)),e&&t.options.editing.className&&(t.options.original.className&&t.options.original.className.split(" ").forEach(function(t){L.DomUtil.removeClass(e,t)}),t.options.editing.className.split(" ").forEach(function(t){L.DomUtil.addClass(e,t)})),t.setStyle(t.options.editing),this._poly._map&&(this._map=this._poly._map,this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){var t=this._poly,e=t._path;e&&t.options.editing.className&&(t.options.editing.className.split(" ").forEach(function(t){L.DomUtil.removeClass(e,t)}),t.options.original.className&&t.options.original.className.split(" ").forEach(function(t){L.DomUtil.addClass(e,t)})),t.setStyle(t.options.original),t._map&&(t._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._markers=[];var t,e,i,r,n=this._defaultShape();for(t=0,i=n.length;i>t;t++)r=this._createMarker(n[t],t),r.on("click",this._onMarkerClick,this),r.on("contextmenu",this._onContextMenu,this),this._markers.push(r);var o,s;for(t=0,e=i-1;i>t;e=t++)(0!==t||L.Polygon&&this._poly instanceof L.Polygon)&&(o=this._markers[e],s=this._markers[t],this._createMiddleMarker(o,s),this._updatePrevNext(o,s))},_createMarker:function(t,e){var i=new L.Marker.Touch(t,{draggable:!0,icon:this.options.icon});return i._origLatLng=t,i._index=e,i.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._fireEdit,this).on("touchmove",this._onTouchMove,this).on("touchend",this._fireEdit,this).on("MSPointerMove",this._onTouchMove,this).on("MSPointerUp",this._fireEdit,this),this._markerGroup.addLayer(i),i},_onMarkerDragStart:function(){this._poly.fire("editstart")},_spliceLatLngs:function(){var t=this._defaultShape(),e=[].splice.apply(t,arguments);return this._poly._convertLatLngs(t,!0),this._poly.redraw(),e},_removeMarker:function(t){var e=t._index;this._markerGroup.removeLayer(t),this._markers.splice(e,1),this._spliceLatLngs(e,1),this._updateIndexes(e,-1),t.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("touchmove",this._onMarkerDrag,this).off("touchend",this._fireEdit,this).off("click",this._onMarkerClick,this).off("MSPointerMove",this._onTouchMove,this).off("MSPointerUp",this._fireEdit,this)},_fireEdit:function(){this._poly.edited=!0,this._poly.fire("edit"),this._poly._map.fire(L.Draw.Event.EDITVERTEX,{layers:this._markerGroup,poly:this._poly})},_onMarkerDrag:function(t){var e=t.target,i=this._poly;if(L.extend(e._origLatLng,e._latlng),e._middleLeft&&e._middleLeft.setLatLng(this._getMiddleLatLng(e._prev,e)),e._middleRight&&e._middleRight.setLatLng(this._getMiddleLatLng(e,e._next)),i.options.poly){var r=i._map._editTooltip;if(!i.options.poly.allowIntersection&&i.intersects()){var n=i.options.color;i.setStyle({color:this.options.drawError.color}),0!==L.version.indexOf("0.7")&&e.dragging._draggable._onUp(t),this._onMarkerClick(t),r&&r.updateContent({text:L.drawLocal.draw.handlers.polyline.error}),setTimeout(function(){i.setStyle({color:n}),r&&r.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext})},1e3)}}this._poly._bounds._southWest=L.latLng(1/0,1/0),this._poly._bounds._northEast=L.latLng(-1/0,-1/0),this._poly._convertLatLngs(this._poly.getLatLngs(),!0),this._poly.redraw(),this._poly.fire("editdrag")},_onMarkerClick:function(t){var e=L.Polygon&&this._poly instanceof L.Polygon?4:3,i=t.target;this._defaultShape().length<e||(this._removeMarker(i),this._updatePrevNext(i._prev,i._next),i._middleLeft&&this._markerGroup.removeLayer(i._middleLeft),i._middleRight&&this._markerGroup.removeLayer(i._middleRight),i._prev&&i._next?this._createMiddleMarker(i._prev,i._next):i._prev?i._next||(i._prev._middleRight=null):i._next._middleLeft=null,this._fireEdit())},_onContextMenu:function(t){var e=t.target;this._poly._map.fire(L.Draw.Event.MARKERCONTEXT,{marker:e,layers:this._markerGroup,poly:this._poly}),L},_onTouchMove:function(t){var e=this._map.mouseEventToLayerPoint(t.originalEvent.touches[0]),i=this._map.layerPointToLatLng(e),r=t.target;L.extend(r._origLatLng,i),r._middleLeft&&r._middleLeft.setLatLng(this._getMiddleLatLng(r._prev,r)),r._middleRight&&r._middleRight.setLatLng(this._getMiddleLatLng(r,r._next)),this._poly.redraw(),this.updateMarkers()},_updateIndexes:function(t,e){this._markerGroup.eachLayer(function(i){i._index>t&&(i._index+=e)})},_createMiddleMarker:function(t,e){var i,r,n,o=this._getMiddleLatLng(t,e),s=this._createMarker(o);s.setOpacity(.6),t._middleRight=e._middleLeft=s,r=function(){s.off("touchmove",r,this);var n=e._index;s._index=n,s.off("click",i,this).on("click",this._onMarkerClick,this),o.lat=s.getLatLng().lat,o.lng=s.getLatLng().lng,this._spliceLatLngs(n,0,o),this._markers.splice(n,0,s),s.setOpacity(1),this._updateIndexes(n,1),e._index++,this._updatePrevNext(t,s),this._updatePrevNext(s,e),this._poly.fire("editstart")},n=function(){s.off("dragstart",r,this),s.off("dragend",n,this),s.off("touchmove",r,this),this._createMiddleMarker(t,s),this._createMiddleMarker(s,e)},i=function(){r.call(this),n.call(this),this._fireEdit()},s.on("click",i,this).on("dragstart",r,this).on("dragend",n,this).on("touchmove",r,this),this._markerGroup.addLayer(s)},_updatePrevNext:function(t,e){t&&(t._next=e),e&&(e._prev=t)},_getMiddleLatLng:function(t,e){var i=this._poly._map;return i.unproject(i.project(t.getLatLng())._add(i.project(e.getLatLng()))._divideBy(2))}}),L.Polyline.addInitHook(function(){this.editing||(L.Edit.Poly&&(this.editing=new L.Edit.Poly(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()}))}),L.Edit=L.Edit||{},L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"}),touchMoveIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move leaflet-touch-icon"}),touchResizeIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize leaflet-touch-icon"})},initialize:function(t,e){L.Browser.touch&&(this.options.moveIcon=this.options.touchMoveIcon,this.options.resizeIcon=this.options.touchResizeIcon),this._shape=t,L.Util.setOptions(this,e)},addHooks:function(){var t=this._shape;this._shape._map&&(this._map=this._shape._map,t.setStyle(t.options.editing),t._map&&(this._map=t._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup)))},removeHooks:function(){var t=this._shape;if(t.setStyle(t.options.original),t._map){this._unbindMarker(this._moveMarker);for(var e=0,i=this._resizeMarkers.length;i>e;e++)this._unbindMarker(this._resizeMarkers[e]);this._resizeMarkers=null,this._map.removeLayer(this._markerGroup),delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._createMoveMarker(),this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(t,e){var i=new L.Marker.Touch(t,{draggable:!0,icon:e,zIndexOffset:10});return this._bindMarker(i),this._markerGroup.addLayer(i),i},_bindMarker:function(t){t.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this).on("touchstart",this._onTouchStart,this).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onTouchEnd,this).on("MSPointerUp",this._onTouchEnd,this)},_unbindMarker:function(t){t.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this).off("touchstart",this._onTouchStart,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onTouchEnd,this).off("MSPointerUp",this._onTouchEnd,this)},_onMarkerDragStart:function(t){t.target.setOpacity(0),this._shape.fire("editstart")},_fireEdit:function(){this._shape.edited=!0,this._shape.fire("edit")},_onMarkerDrag:function(t){var e=t.target,i=e.getLatLng();e===this._moveMarker?this._move(i):this._resize(i),this._shape.redraw(),this._shape.fire("editdrag")},_onMarkerDragEnd:function(t){t.target.setOpacity(1),this._fireEdit()},_onTouchStart:function(t){if(L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,t),"function"==typeof this._getCorners){var e=this._getCorners(),i=t.target,r=i._cornerIndex;i.setOpacity(0),this._oppositeCorner=e[(r+2)%4],this._toggleCornerMarkers(0,r)}this._shape.fire("editstart")},_onTouchMove:function(t){var e=this._map.mouseEventToLayerPoint(t.originalEvent.touches[0]),i=this._map.layerPointToLatLng(e);return t.target===this._moveMarker?this._move(i):this._resize(i),this._shape.redraw(),!1},_onTouchEnd:function(t){t.target.setOpacity(1),this.updateMarkers(),this._fireEdit()},_move:function(){},_resize:function(){}}),L.Edit=L.Edit||{},L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){this._moveMarker=this._createMarker(this._shape.getBounds().getCenter(),this.options.moveIcon)},_createResizeMarker:function(){var t=this._getCorners();this._resizeMarkers=[];for(var e=0,i=t.length;i>e;e++)this._resizeMarkers.push(this._createMarker(t[e],this.options.resizeIcon)),this._resizeMarkers[e]._cornerIndex=e},_onMarkerDragStart:function(t){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,t);var e=this._getCorners(),i=t.target,r=i._cornerIndex;this._oppositeCorner=e[(r+2)%4],this._toggleCornerMarkers(0,r)},_onMarkerDragEnd:function(t){var e,i,r=t.target;r===this._moveMarker&&(e=this._shape.getBounds(),i=e.getCenter(),r.setLatLng(i)),this._toggleCornerMarkers(1),this._repositionCornerMarkers(),L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,t)},_move:function(t){for(var e,i=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),r=this._shape.getBounds(),n=r.getCenter(),o=[],s=0,a=i.length;a>s;s++)e=[i[s].lat-n.lat,i[s].lng-n.lng],o.push([t.lat+e[0],t.lng+e[1]]);this._shape.setLatLngs(o),this._repositionCornerMarkers(),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})},_resize:function(t){var e;this._shape.setBounds(L.latLngBounds(t,this._oppositeCorner)),e=this._shape.getBounds(),this._moveMarker.setLatLng(e.getCenter()),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})},_getCorners:function(){var t=this._shape.getBounds();return[t.getNorthWest(),t.getNorthEast(),t.getSouthEast(),t.getSouthWest()]},_toggleCornerMarkers:function(t){for(var e=0,i=this._resizeMarkers.length;i>e;e++)this._resizeMarkers[e].setOpacity(t)},_repositionCornerMarkers:function(){for(var t=this._getCorners(),e=0,i=this._resizeMarkers.length;i>e;e++)this._resizeMarkers[e].setLatLng(t[e])}}),L.Rectangle.addInitHook(function(){L.Edit.Rectangle&&(this.editing=new L.Edit.Rectangle(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.CircleMarker=L.Edit.SimpleShape.extend({_createMoveMarker:function(){this._moveMarker=this._createMarker(this._shape.getLatLng(),this.options.moveIcon)},_createResizeMarker:function(){this._resizeMarkers=[]},_move:function(t){if(this._resizeMarkers.length){this._resizeMarkers[0].setLatLng(this._getResizeMarkerPoint(t))}this._shape.setLatLng(t),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})}}),L.CircleMarker.addInitHook(function(){L.Edit.CircleMarker&&(this.editing=new L.Edit.CircleMarker(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),L.Edit=L.Edit||{},L.Edit.Circle=L.Edit.CircleMarker.extend({_createResizeMarker:function(){var t=this._shape.getLatLng(),e=this._getResizeMarkerPoint(t);this._resizeMarkers=[],this._resizeMarkers.push(this._createMarker(e,this.options.resizeIcon))},_getResizeMarkerPoint:function(t){var e=this._shape._radius*Math.cos(Math.PI/4),i=this._map.project(t);return this._map.unproject([i.x+e,i.y-e])},_resize:function(t){var e=this._moveMarker.getLatLng();L.GeometryUtil.isVersion07x()?radius=e.distanceTo(t):radius=this._map.distance(e,t),this._shape.setRadius(radius),this._map._editTooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.subtext+"<br />"+L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(radius,!0,this.options.feet,this.options.nautic)}),this._shape.setRadius(radius),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})}}),L.Circle.addInitHook(function(){L.Edit.Circle&&(this.editing=new L.Edit.Circle(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),L.Map.mergeOptions({touchExtend:!0}),L.Map.TouchExtend=L.Handler.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane},addHooks:function(){L.DomEvent.on(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.on(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.on(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.on(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.on(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.on(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.on(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.on(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.on(this._container,"touchleave",this._onTouchLeave,this))},removeHooks:function(){L.DomEvent.off(this._container,"touchstart",this._onTouchStart),L.DomEvent.off(this._container,"touchend",this._onTouchEnd),L.DomEvent.off(this._container,"touchmove",this._onTouchMove),this._detectIE()?(L.DomEvent.off(this._container,"MSPointerDowm",this._onTouchStart),L.DomEvent.off(this._container,"MSPointerUp",this._onTouchEnd),L.DomEvent.off(this._container,"MSPointerMove",this._onTouchMove),L.DomEvent.off(this._container,"MSPointerCancel",this._onTouchCancel)):(L.DomEvent.off(this._container,"touchcancel",this._onTouchCancel),L.DomEvent.off(this._container,"touchleave",this._onTouchLeave))},_touchEvent:function(t,e){var i={};if(void 0!==t.touches){if(!t.touches.length)return;i=t.touches[0]}else{if("touch"!==t.pointerType)return;if(i=t,!this._filterClick(t))return}var r=this._map.mouseEventToContainerPoint(i),n=this._map.mouseEventToLayerPoint(i);this._map.fire(e,{latlng:this._map.layerPointToLatLng(n),layerPoint:n,containerPoint:r,pageX:i.pageX,pageY:i.pageY,originalEvent:t})},_filterClick:function(t){var e=t.timeStamp||t.originalEvent.timeStamp,i=L.DomEvent._lastClick&&e-L.DomEvent._lastClick;return i&&i>100&&500>i||t.target._simulatedClick&&!t._simulated?(L.DomEvent.stop(t),!1):(L.DomEvent._lastClick=e,!0)},_onTouchStart:function(t){this._map._loaded&&this._touchEvent(t,"touchstart")},_onTouchEnd:function(t){this._map._loaded&&this._touchEvent(t,"touchend")},_onTouchCancel:function(t){if(this._map._loaded){var e="touchcancel";this._detectIE()&&(e="pointercancel"),this._touchEvent(t,e)}},_onTouchLeave:function(t){this._map._loaded&&this._touchEvent(t,"touchleave")},_onTouchMove:function(t){this._map._loaded&&this._touchEvent(t,"touchmove")},_detectIE:function(){var e=t.navigator.userAgent,i=e.indexOf("MSIE ");if(i>0)return parseInt(e.substring(i+5,e.indexOf(".",i)),10);if(e.indexOf("Trident/")>0){var r=e.indexOf("rv:");return parseInt(e.substring(r+3,e.indexOf(".",r)),10)}var n=e.indexOf("Edge/");return n>0&&parseInt(e.substring(n+5,e.indexOf(".",n)),10)}}),L.Map.addInitHook("addHandler","touchExtend",L.Map.TouchExtend),L.Marker.Touch=L.Marker.extend({_initInteraction:function(){return this.addInteractiveTarget?L.Marker.prototype._initInteraction.apply(this):this._initInteractionLegacy()},_initInteractionLegacy:function(){if(this.options.clickable){var t=this._icon,e=["dblclick","mousedown","mouseover","mouseout","contextmenu","touchstart","touchend","touchmove"];e.concat(this._detectIE?["MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"]:["touchcancel"]),L.DomUtil.addClass(t,"leaflet-clickable"),L.DomEvent.on(t,"click",this._onMouseClick,this),L.DomEvent.on(t,"keypress",this._onKeyPress,this);for(var i=0;e.length>i;i++)L.DomEvent.on(t,e[i],this._fireMouseEvent,this);L.Handler.MarkerDrag&&(this.dragging=new L.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_detectIE:function(){var e=t.navigator.userAgent,i=e.indexOf("MSIE ");if(i>0)return parseInt(e.substring(i+5,e.indexOf(".",i)),10);if(e.indexOf("Trident/")>0){var r=e.indexOf("rv:");return parseInt(e.substring(r+3,e.indexOf(".",r)),10)}var n=e.indexOf("Edge/");return n>0&&parseInt(e.substring(n+5,e.indexOf(".",n)),10)}}),L.LatLngUtil={cloneLatLngs:function(t){for(var e=[],i=0,r=t.length;r>i;i++)e.push(Array.isArray(t[i])?L.LatLngUtil.cloneLatLngs(t[i]):this.cloneLatLng(t[i]));return e},cloneLatLng:function(t){return L.latLng(t.lat,t.lng)}},function(){var t={km:2,ha:2,m:0,mi:2,ac:2,yd:0,ft:0,nm:2};L.GeometryUtil=L.extend(L.GeometryUtil||{},{geodesicArea:function(t){var e,i,r=t.length,n=0,o=Math.PI/180;if(r>2){for(var s=0;r>s;s++)e=t[s],i=t[(s+1)%r],n+=(i.lng-e.lng)*o*(2+Math.sin(e.lat*o)+Math.sin(i.lat*o));n=6378137*n*6378137/2}return Math.abs(n)},formattedNumber:function(t,e){var i=parseFloat(t).toFixed(e),r=L.drawLocal.format&&L.drawLocal.format.numeric,n=r&&r.delimiters,o=n&&n.thousands,s=n&&n.decimal;if(o||s){var a=i.split(".");i=o?a[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+o):a[0],s=s||".",a.length>1&&(i=i+s+a[1])}return i},readableArea:function(e,i,r){var n,o,r=L.Util.extend({},t,r);return i?(o=["ha","m"],type=typeof i,"string"===type?o=[i]:"boolean"!==type&&(o=i),n=1e6>e||-1===o.indexOf("km")?1e4>e||-1===o.indexOf("ha")?L.GeometryUtil.formattedNumber(e,r.m)+" m":L.GeometryUtil.formattedNumber(1e-4*e,r.ha)+" ha":L.GeometryUtil.formattedNumber(1e-6*e,r.km)+" km"):(e/=.836127,n=3097600>e?4840>e?L.GeometryUtil.formattedNumber(e,r.yd)+" yd":L.GeometryUtil.formattedNumber(e/4840,r.ac)+" acres":L.GeometryUtil.formattedNumber(e/3097600,r.mi)+" mi"),n},readableDistance:function(e,i,r,n,o){var s,o=L.Util.extend({},t,o);switch(i?"string"==typeof i?i:"metric":r?"feet":n?"nauticalMile":"yards"){case"metric":s=e>1e3?L.GeometryUtil.formattedNumber(e/1e3,o.km)+" km":L.GeometryUtil.formattedNumber(e,o.m)+" m";break;case"feet":e*=3.28083,s=L.GeometryUtil.formattedNumber(e,o.ft)+" ft";break;case"nauticalMile":e*=.53996,s=L.GeometryUtil.formattedNumber(e/1e3,o.nm)+" nm";break;case"yards":default:e*=1.09361,s=e>1760?L.GeometryUtil.formattedNumber(e/1760,o.mi)+" miles":L.GeometryUtil.formattedNumber(e,o.yd)+" yd"}return s},isVersion07x:function(){var t=L.version.split(".");return 0===parseInt(t[0],10)&&7===parseInt(t[1],10)}})}(),L.Util.extend(L.LineUtil,{segmentsIntersect:function(t,e,i,r){return this._checkCounterclockwise(t,i,r)!==this._checkCounterclockwise(e,i,r)&&this._checkCounterclockwise(t,e,i)!==this._checkCounterclockwise(t,e,r)},_checkCounterclockwise:function(t,e,i){return(i.y-t.y)*(e.x-t.x)>(e.y-t.y)*(i.x-t.x)}}),L.Polyline.include({intersects:function(){var t,e,i,r=this._getProjectedPoints(),n=r?r.length:0;if(this._tooFewPointsForIntersection())return!1;for(t=n-1;t>=3;t--)if(e=r[t-1],i=r[t],this._lineSegmentsIntersectsRange(e,i,t-2))return!0;return!1},newLatLngIntersects:function(t,e){return!!this._map&&this.newPointIntersects(this._map.latLngToLayerPoint(t),e)},newPointIntersects:function(t,e){var i=this._getProjectedPoints(),r=i?i.length:0,n=i?i[r-1]:null,o=r-2;return!this._tooFewPointsForIntersection(1)&&this._lineSegmentsIntersectsRange(n,t,o,e?1:0)},_tooFewPointsForIntersection:function(t){var e=this._getProjectedPoints(),i=e?e.length:0;return i+=t||0,!e||3>=i},_lineSegmentsIntersectsRange:function(t,e,i,r){var n,o,s=this._getProjectedPoints();r=r||0;for(var a=i;a>r;a--)if(n=s[a-1],o=s[a],L.LineUtil.segmentsIntersect(t,e,n,o))return!0;return!1},_getProjectedPoints:function(){if(!this._defaultShape)return this._originalPoints;for(var t=[],e=this._defaultShape(),i=0;e.length>i;i++)t.push(this._map.latLngToLayerPoint(e[i]));return t}}),L.Polygon.include({intersects:function(){var t,e,i,r,n=this._getProjectedPoints();return!this._tooFewPointsForIntersection()&&(!!L.Polyline.prototype.intersects.call(this)||(t=n.length,e=n[0],i=n[t-1],r=t-2,this._lineSegmentsIntersectsRange(i,e,r,1)))}}),L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:!1},initialize:function(t){if("0.7">L.version)throw Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/");L.Control.prototype.initialize.call(this,t);var e;this._toolbars={},L.DrawToolbar&&this.options.draw&&(e=new L.DrawToolbar(this.options.draw),this._toolbars[L.DrawToolbar.TYPE]=e,this._toolbars[L.DrawToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.EditToolbar&&this.options.edit&&(e=new L.EditToolbar(this.options.edit),this._toolbars[L.EditToolbar.TYPE]=e,this._toolbars[L.EditToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.toolbar=this},onAdd:function(t){var e,i=L.DomUtil.create("div","leaflet-draw"),r=!1;for(var n in this._toolbars)this._toolbars.hasOwnProperty(n)&&(e=this._toolbars[n].addToolbar(t))&&(r||(L.DomUtil.hasClass(e,"leaflet-draw-toolbar-top")||L.DomUtil.addClass(e.childNodes[0],"leaflet-draw-toolbar-top"),r=!0),i.appendChild(e));return i},onRemove:function(){for(var t in this._toolbars)this._toolbars.hasOwnProperty(t)&&this._toolbars[t].removeToolbar()},setDrawingOptions:function(t){for(var e in this._toolbars)this._toolbars[e]instanceof L.DrawToolbar&&this._toolbars[e].setOptions(t)},_toolbarEnabled:function(t){var e=t.target;for(var i in this._toolbars)this._toolbars[i]!==e&&this._toolbars[i].disable()}}),L.Map.mergeOptions({drawControlTooltips:!0,drawControl:!1}),L.Map.addInitHook(function(){this.options.drawControl&&(this.drawControl=new L.Control.Draw,this.addControl(this.drawControl))}),L.Toolbar=L.Class.extend({initialize:function(t){L.setOptions(this,t),this._modes={},this._actionButtons=[],this._activeMode=null;var e=L.version.split(".");1!==parseInt(e[0],10)||2>parseInt(e[1],10)?L.Toolbar.include(L.Mixin.Events):L.Toolbar.include(L.Evented.prototype)},enabled:function(){return null!==this._activeMode},disable:function(){this.enabled()&&this._activeMode.handler.disable()},addToolbar:function(t){var e,i=L.DomUtil.create("div","leaflet-draw-section"),r=0,n=this._toolbarClass||"",o=this.getModeHandlers(t);for(this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this._map=t,e=0;o.length>e;e++)o[e].enabled&&this._initModeHandler(o[e].handler,this._toolbarContainer,r++,n,o[e].title);if(r)return this._lastButtonIndex=--r,this._actionsContainer=L.DomUtil.create("ul","leaflet-draw-actions"),i.appendChild(this._toolbarContainer),i.appendChild(this._actionsContainer),i},removeToolbar:function(){for(var t in this._modes)this._modes.hasOwnProperty(t)&&(this._disposeButton(this._modes[t].button,this._modes[t].handler.enable,this._modes[t].handler),this._modes[t].handler.disable(),this._modes[t].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this));this._modes={};for(var e=0,i=this._actionButtons.length;i>e;e++)this._disposeButton(this._actionButtons[e].button,this._actionButtons[e].callback,this);this._actionButtons=[],this._actionsContainer=null},_initModeHandler:function(t,e,i,r,n){var o=t.type;this._modes[o]={},this._modes[o].handler=t,this._modes[o].button=this._createButton({type:o,title:n,className:r+"-"+o,container:e,callback:this._modes[o].handler.enable,context:this._modes[o].handler}),this._modes[o].buttonIndex=i,this._modes[o].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)},_detectIOS:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!t.MSStream},_createButton:function(t){var e=L.DomUtil.create("a",t.className||"",t.container),i=L.DomUtil.create("span","sr-only",t.container);e.href="#",e.appendChild(i),t.title&&(e.title=t.title,i.innerHTML=t.title),t.text&&(e.innerHTML=t.text,i.innerHTML=t.text);var r=this._detectIOS()?"touchstart":"click";return L.DomEvent.on(e,"click",L.DomEvent.stopPropagation).on(e,"mousedown",L.DomEvent.stopPropagation).on(e,"dblclick",L.DomEvent.stopPropagation).on(e,"touchstart",L.DomEvent.stopPropagation).on(e,"click",L.DomEvent.preventDefault).on(e,r,t.callback,t.context),e},_disposeButton:function(t,e){var i=this._detectIOS()?"touchstart":"click";L.DomEvent.off(t,"click",L.DomEvent.stopPropagation).off(t,"mousedown",L.DomEvent.stopPropagation).off(t,"dblclick",L.DomEvent.stopPropagation).off(t,"touchstart",L.DomEvent.stopPropagation).off(t,"click",L.DomEvent.preventDefault).off(t,i,e)},_handlerActivated:function(t){this.disable(),this._activeMode=this._modes[t.handler],L.DomUtil.addClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._showActionsToolbar(),this.fire("enable")},_handlerDeactivated:function(){this._hideActionsToolbar(),L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._activeMode=null,this.fire("disable")},_createActions:function(t){var e,i,r,n,o=this._actionsContainer,s=this.getActions(t),a=s.length;for(i=0,r=this._actionButtons.length;r>i;i++)this._disposeButton(this._actionButtons[i].button,this._actionButtons[i].callback);for(this._actionButtons=[];o.firstChild;)o.removeChild(o.firstChild);for(var l=0;a>l;l++)"enabled"in s[l]&&!s[l].enabled||(e=L.DomUtil.create("li","",o),n=this._createButton({title:s[l].title,text:s[l].text,container:e,callback:s[l].callback,context:s[l].context}),this._actionButtons.push({button:n,callback:s[l].callback}))},_showActionsToolbar:function(){var t=this._activeMode.buttonIndex,e=this._lastButtonIndex,i=this._activeMode.button.offsetTop-1;this._createActions(this._activeMode.handler),this._actionsContainer.style.top=i+"px",0===t&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top")),t===e&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom")),this._actionsContainer.style.display="block",this._map.fire(L.Draw.Event.TOOLBAROPENED)},_hideActionsToolbar:function(){this._actionsContainer.style.display="none",L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-bottom"),this._map.fire(L.Draw.Event.TOOLBARCLOSED)}}),L.Draw=L.Draw||{},L.Draw.Tooltip=L.Class.extend({initialize:function(t){this._map=t,this._popupPane=t._panes.popupPane,this._visible=!1,this._container=t.options.drawControlTooltips?L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane):null,this._singleLineLabel=!1,this._map.on("mouseout",this._onMouseOut,this)},dispose:function(){this._map.off("mouseout",this._onMouseOut,this),this._container&&(this._popupPane.removeChild(this._container),this._container=null)},updateContent:function(t){return this._container?(t.subtext=t.subtext||"",0!==t.subtext.length||this._singleLineLabel?t.subtext.length>0&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!0),this._container.innerHTML=(t.subtext.length>0?'<span class="leaflet-draw-tooltip-subtext">'+t.subtext+"</span><br />":"")+"<span>"+t.text+"</span>",t.text||t.subtext?(this._visible=!0,this._container.style.visibility="inherit"):(this._visible=!1,this._container.style.visibility="hidden"),this):this},updatePosition:function(t){var e=this._map.latLngToLayerPoint(t),i=this._container;return this._container&&(this._visible&&(i.style.visibility="inherit"),L.DomUtil.setPosition(i,e)),this},showAsError:function(){return this._container&&L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip"),this},removeError:function(){return this._container&&L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip"),this},_onMouseOut:function(){this._container&&(this._container.style.visibility="hidden")}}),L.DrawToolbar=L.Toolbar.extend({statics:{TYPE:"draw"},options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{},circlemarker:{}},initialize:function(t){for(var e in this.options)this.options.hasOwnProperty(e)&&t[e]&&(t[e]=L.extend({},this.options[e],t[e]));this._toolbarClass="leaflet-draw-draw",L.Toolbar.prototype.initialize.call(this,t)},getModeHandlers:function(t){return[{enabled:this.options.polyline,handler:new L.Draw.Polyline(t,this.options.polyline),title:L.drawLocal.draw.toolbar.buttons.polyline},{enabled:this.options.polygon,handler:new L.Draw.Polygon(t,this.options.polygon),title:L.drawLocal.draw.toolbar.buttons.polygon},{enabled:this.options.rectangle,handler:new L.Draw.Rectangle(t,this.options.rectangle),title:L.drawLocal.draw.toolbar.buttons.rectangle},{enabled:this.options.circle,handler:new L.Draw.Circle(t,this.options.circle),title:L.drawLocal.draw.toolbar.buttons.circle},{enabled:this.options.marker,handler:new L.Draw.Marker(t,this.options.marker),title:L.drawLocal.draw.toolbar.buttons.marker},{enabled:this.options.circlemarker,handler:new L.Draw.CircleMarker(t,this.options.circlemarker),title:L.drawLocal.draw.toolbar.buttons.circlemarker}]},getActions:function(t){return[{enabled:t.completeShape,title:L.drawLocal.draw.toolbar.finish.title,text:L.drawLocal.draw.toolbar.finish.text,callback:t.completeShape,context:t},{enabled:t.deleteLastVertex,title:L.drawLocal.draw.toolbar.undo.title,text:L.drawLocal.draw.toolbar.undo.text,callback:t.deleteLastVertex,context:t},{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]},setOptions:function(t){L.setOptions(this,t);for(var e in this._modes)this._modes.hasOwnProperty(e)&&t.hasOwnProperty(e)&&this._modes[e].handler.setOptions(t[e])}}),L.EditToolbar=L.Toolbar.extend({statics:{TYPE:"edit"},options:{edit:{selectedPathOptions:{dashArray:"10, 10",fill:!0,fillColor:"#fe57a1",fillOpacity:.1,maintainColor:!1}},remove:{},poly:null,featureGroup:null},initialize:function(t){t.edit&&(void 0===t.edit.selectedPathOptions&&(t.edit.selectedPathOptions=this.options.edit.selectedPathOptions),t.edit.selectedPathOptions=L.extend({},this.options.edit.selectedPathOptions,t.edit.selectedPathOptions)),t.remove&&(t.remove=L.extend({},this.options.remove,t.remove)),t.poly&&(t.poly=L.extend({},this.options.poly,t.poly)),this._toolbarClass="leaflet-draw-edit",L.Toolbar.prototype.initialize.call(this,t),this._selectedFeatureCount=0},getModeHandlers:function(t){var e=this.options.featureGroup;return[{enabled:this.options.edit,handler:new L.EditToolbar.Edit(t,{featureGroup:e,selectedPathOptions:this.options.edit.selectedPathOptions,poly:this.options.poly}),title:L.drawLocal.edit.toolbar.buttons.edit},{enabled:this.options.remove,handler:new L.EditToolbar.Delete(t,{featureGroup:e}),title:L.drawLocal.edit.toolbar.buttons.remove}]},getActions:function(t){var e=[{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}];return t.removeAllLayers&&e.push({title:L.drawLocal.edit.toolbar.actions.clearAll.title,text:L.drawLocal.edit.toolbar.actions.clearAll.text,callback:this._clearAllLayers,context:this}),e},addToolbar:function(t){var e=L.Toolbar.prototype.addToolbar.call(this,t);return this._checkDisabled(),this.options.featureGroup.on("layeradd layerremove",this._checkDisabled,this),e},removeToolbar:function(){this.options.featureGroup.off("layeradd layerremove",this._checkDisabled,this),L.Toolbar.prototype.removeToolbar.call(this)},disable:function(){this.enabled()&&(this._activeMode.handler.revertLayers(),L.Toolbar.prototype.disable.call(this))},_save:function(){this._activeMode.handler.save(),this._activeMode&&this._activeMode.handler.disable()},_clearAllLayers:function(){this._activeMode.handler.removeAllLayers(),this._activeMode&&this._activeMode.handler.disable()},_checkDisabled:function(){var t,e=this.options.featureGroup,i=0!==e.getLayers().length;this.options.edit&&(t=this._modes[L.EditToolbar.Edit.TYPE].button,i?L.DomUtil.removeClass(t,"leaflet-disabled"):L.DomUtil.addClass(t,"leaflet-disabled"),t.setAttribute("title",i?L.drawLocal.edit.toolbar.buttons.edit:L.drawLocal.edit.toolbar.buttons.editDisabled)),this.options.remove&&(t=this._modes[L.EditToolbar.Delete.TYPE].button,i?L.DomUtil.removeClass(t,"leaflet-disabled"):L.DomUtil.addClass(t,"leaflet-disabled"),t.setAttribute("title",i?L.drawLocal.edit.toolbar.buttons.remove:L.drawLocal.edit.toolbar.buttons.removeDisabled))}}),L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},initialize:function(t,e){if(L.Handler.prototype.initialize.call(this,t),L.setOptions(this,e),!((this._featureGroup=e.featureGroup)instanceof L.FeatureGroup))throw Error("options.featureGroup must be a L.FeatureGroup");this._uneditedLayerProps={},this.type=L.EditToolbar.Edit.TYPE;var i=L.version.split(".");1!==parseInt(i[0],10)||2>parseInt(i[1],10)?L.EditToolbar.Edit.include(L.Mixin.Events):L.EditToolbar.Edit.include(L.Evented.prototype)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.EDITSTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._featureGroup.on("layeradd",this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this))},disable:function(){this._enabled&&(this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.EDITSTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var t=this._map;t&&(t.getContainer().focus(),this._featureGroup.eachLayer(this._enableLayerEdit,this),this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}),t._editTooltip=this._tooltip,this._updateTooltip(),this._map.on("mousemove",this._onMouseMove,this).on("touchmove",this._onMouseMove,this).on("MSPointerMove",this._onMouseMove,this).on(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},removeHooks:function(){this._map&&(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this).off("touchmove",this._onMouseMove,this).off("MSPointerMove",this._onMouseMove,this).off(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},revertLayers:function(){this._featureGroup.eachLayer(function(t){this._revertLayer(t)},this)},save:function(){var t=new L.LayerGroup;this._featureGroup.eachLayer(function(e){e.edited&&(t.addLayer(e),e.edited=!1)}),this._map.fire(L.Draw.Event.EDITED,{layers:t})},_backupLayer:function(t){var e=L.Util.stamp(t);this._uneditedLayerProps[e]||(t instanceof L.Polyline||t instanceof L.Polygon||t instanceof L.Rectangle?this._uneditedLayerProps[e]={latlngs:L.LatLngUtil.cloneLatLngs(t.getLatLngs())}:t instanceof L.Circle?this._uneditedLayerProps[e]={latlng:L.LatLngUtil.cloneLatLng(t.getLatLng()),radius:t.getRadius()}:(t instanceof L.Marker||t instanceof L.CircleMarker)&&(this._uneditedLayerProps[e]={latlng:L.LatLngUtil.cloneLatLng(t.getLatLng())}))},_getTooltipText:function(){return{text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}},_updateTooltip:function(){this._tooltip.updateContent(this._getTooltipText())},_revertLayer:function(t){var e=L.Util.stamp(t);t.edited=!1,this._uneditedLayerProps.hasOwnProperty(e)&&(t instanceof L.Polyline||t instanceof L.Polygon||t instanceof L.Rectangle?t.setLatLngs(this._uneditedLayerProps[e].latlngs):t instanceof L.Circle?(t.setLatLng(this._uneditedLayerProps[e].latlng),t.setRadius(this._uneditedLayerProps[e].radius)):(t instanceof L.Marker||t instanceof L.CircleMarker)&&t.setLatLng(this._uneditedLayerProps[e].latlng),t.fire("revert-edited",{layer:t}))},_enableLayerEdit:function(t){var e,i,r=t.layer||t.target||t;this._backupLayer(r),this.options.poly&&(i=L.Util.extend({},this.options.poly),r.options.poly=i),this.options.selectedPathOptions&&(e=L.Util.extend({},this.options.selectedPathOptions),e.maintainColor&&(e.color=r.options.color,e.fillColor=r.options.fillColor),r.options.original=L.extend({},r.options),r.options.editing=e),r instanceof L.Marker?(r.editing&&r.editing.enable(),r.dragging.enable(),r.on("dragend",this._onMarkerDragEnd).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onMarkerDragEnd,this).on("MSPointerUp",this._onMarkerDragEnd,this)):r.editing.enable()},_disableLayerEdit:function(t){var e=t.layer||t.target||t;e.edited=!1,e.editing&&e.editing.disable(),delete e.options.editing,delete e.options.original,this._selectedPathOptions&&(e instanceof L.Marker?this._toggleMarkerHighlight(e):(e.setStyle(e.options.previousOptions),delete e.options.previousOptions)),e instanceof L.Marker?(e.dragging.disable(),e.off("dragend",this._onMarkerDragEnd,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onMarkerDragEnd,this).off("MSPointerUp",this._onMarkerDragEnd,this)):e.editing.disable()},_onMouseMove:function(t){this._tooltip.updatePosition(t.latlng)},_onMarkerDragEnd:function(t){var e=t.target;e.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:e})},_onTouchMove:function(t){t.target.setLatLng(this._map.layerPointToLatLng(this._map.mouseEventToLayerPoint(t.originalEvent.changedTouches[0])))},_hasAvailableLayers:function(){return 0!==this._featureGroup.getLayers().length}}),L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},initialize:function(t,e){if(L.Handler.prototype.initialize.call(this,t),L.Util.setOptions(this,e),!((this._deletableLayers=this.options.featureGroup)instanceof L.FeatureGroup))throw Error("options.featureGroup must be a L.FeatureGroup");this.type=L.EditToolbar.Delete.TYPE;var i=L.version.split(".");1!==parseInt(i[0],10)||2>parseInt(i[1],10)?L.EditToolbar.Delete.include(L.Mixin.Events):L.EditToolbar.Delete.include(L.Evented.prototype)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DELETESTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this))},disable:function(){this._enabled&&(this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DELETESTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var t=this._map;t&&(t.getContainer().focus(),this._deletableLayers.eachLayer(this._enableLayerDelete,this),this._deletedLayers=new L.LayerGroup,this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),this._deletedLayers=null,this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._deletedLayers.eachLayer(function(t){this._deletableLayers.addLayer(t),t.fire("revert-deleted",{layer:t})},this)},save:function(){this._map.fire(L.Draw.Event.DELETED,{layers:this._deletedLayers})},removeAllLayers:function(){this._deletableLayers.eachLayer(function(t){this._removeLayer({layer:t})},this),this.save()},_enableLayerDelete:function(t){(t.layer||t.target||t).on("click",this._removeLayer,this)},_disableLayerDelete:function(t){var e=t.layer||t.target||t;e.off("click",this._removeLayer,this),this._deletedLayers.removeLayer(e)},_removeLayer:function(t){var e=t.layer||t.target||t;this._deletableLayers.removeLayer(e),this._deletedLayers.addLayer(e),e.fire("deleted")},_onMouseMove:function(t){this._tooltip.updatePosition(t.latlng)},_hasAvailableLayers:function(){return 0!==this._deletableLayers.getLayers().length}})}(window,document)},function(t,e,i){"use strict";function r(t,e){return Array.prototype.slice.call(t,e||0)}function n(t){return"[object Function]"===Object.prototype.toString.call(t)}function o(t){var e=[],i=t.length;return new a(function(r,n){var o=!1;t.forEach(function(t,s){t.then(function(t){if(!o)return e[s]=t,i--,0===i?r(e):void 0},function(t){o=!0,n(t)})})})}function s(t,e){var i,r=new a(function(e,r){i=r,t(e,r)});return r.cancel=function(){i(Error(e||"promise is canceled")),r.cancel=null,r.isCancel=!0,i=null},r}var a;try{a=Promise}catch(t){}var l={setPromise:function(t){a=t},promisify:function(t,e){return function(){var i=r(arguments),n=this;return new a(function(o,s){i.push(function(t){var i=r(arguments,1);return e&&!1===e.withError&&(i=[t].concat(i),t=null),t?s(t):0===i.length?o(void 0):1===i.length?o(i[0]):void o(i)}),t.apply(n,i)})}},all:function(t){return a.all?a.all(t):o(t)},parallel:function(t,e){var i=t.length;if((e=e||i)>=i)return l.all(t.map(function(t){return t()}));var r=[];return new Promise(function(i,n){function o(e,a){e().then(function(e){if(r[a]=e,t.length>s)o(t[s],s),s++;else if(r.length===t.length)return i(r)},n)}var s=0;t.slice(0,e).forEach(o),s=e})},props:function(t){var e={},i=Object.keys(t),r=i.length;return new a(function(n,o){var s=!1;i.forEach(function(i){t[i].then(function(t){if(!s)return e[i]=t,r--,0===r?n(e):void 0},function(t){s=!0,o(t)})})})},cancelable:s,sleep:function(t){return new a(function(e,i){setTimeout(e,t)})},delay:function(t,e){var i=s(function(r,n){setTimeout(function(){if(!i.isCancel)return r(Promise.resolve().then(t))},e)},"delay is canceled");return i},interval:function(t,e){var i=s(function(r,n){function o(){setTimeout(function(){if(!i.isCancel)return Promise.resolve().then(t).then(o)},e)}o()},"interval is canceled");return i},retry:function(t,e,i){return new a(function(r,o){function s(){return e()?Promise.resolve().then(t).then(r,function(t){return a=t,l.sleep(n(i)?i():i).then(s)}):(a.isRetryFailed=!0,o(a))}var a=Error("retry failed");return s()})}};t.exports=l},function(t,e,i){"use strict";var r=i(46),n=i(47),o=i(51);t.exports=function(){function t(t,e,i,r,s,a){a!==o&&n(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function e(){return t}t.isRequired=t;var i={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e};return i.checkPropTypes=r,i.PropTypes=i,i}},function(t,e,i){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e,i){"use strict";function r(t){if(!(this instanceof r))return new r(t);this._canvas=t="string"==typeof t?document.getElementById(t):t,this._ctx=t.getContext("2d"),this._width=t.width,this._height=t.height,this._max=1,this._data=[]}t.exports=r,r.prototype={defaultRadius:25,defaultGradient:{.4:"blue",.6:"cyan",.7:"lime",.8:"yellow",1:"red"},data:function(t){return this._data=t,this},max:function(t){return this._max=t,this},add:function(t){return this._data.push(t),this},clear:function(){return this._data=[],this},radius:function(t,e){e=void 0===e?15:e;var i=this._circle=document.createElement("canvas"),r=i.getContext("2d"),n=this._r=t+e;return i.width=i.height=2*n,r.shadowOffsetX=r.shadowOffsetY=2*n,r.shadowBlur=e,r.shadowColor="black",r.beginPath(),r.arc(-n,-n,t,0,2*Math.PI,!0),r.closePath(),r.fill(),this},resize:function(){this._width=this._canvas.width,this._height=this._canvas.height},gradient:function(t){var e=document.createElement("canvas"),i=e.getContext("2d"),r=i.createLinearGradient(0,0,0,256);e.width=1,e.height=256;for(var n in t)r.addColorStop(n,t[n]);return i.fillStyle=r,i.fillRect(0,0,1,256),this._grad=i.getImageData(0,0,1,256).data,this},draw:function(t){this._circle||this.radius(this.defaultRadius),this._grad||this.gradient(this.defaultGradient);var e=this._ctx;e.clearRect(0,0,this._width,this._height);for(var i,r=0,n=this._data.length;n>r;r++)i=this._data[r],e.globalAlpha=Math.max(i[2]/this._max,void 0===t?.05:t),e.drawImage(this._circle,i[0]-this._r,i[1]-this._r);var o=e.getImageData(0,0,this._width,this._height);return this._colorize(o.data,this._grad),e.putImageData(o,0,0),this},_colorize:function(t,e){for(var i,r=0,n=t.length;n>r;r+=4)(i=4*t[r+3])&&(t[r]=e[i],t[r+1]=e[i+1],t[r+2]=e[i+2])}}},function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjAiIHdpZHRoPSIyMCIgdmVyc2lvbj0iMSI+CiAgPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS13aWR0aD0iNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBwb2ludHM9IgoJMCwwIDE1LDEwIDAsMjAiLz4KPC9zdmc+Cgo="},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAABSCAMAAAAhFXfZAAAC91BMVEVMaXEzeak2f7I4g7g3g7c3grY3grg8hJo3grY4g7c4g7c3grU0gLI4grY9hrpBi79HkMM2frE0daA0fq82gbROlslbo9Vgp9dcpNZQmcxFjsIwd6QzeKk3gbRfptdepdZcpdY2gLMtd5s3gLNZotVSntNPnNJLmtFImdBZodU1f7A2f7A1frA2f7I2f7FHmNBUnM9Wn9VGmNAydaNYoNJOm9M9hLc0e6w3fa46f7BKmdFFltBVndE1fK1Els82fq41fK1Dlc89g7RClc9XoNVUndQ0eqxClM9Jl9FRms81eqo0eqpHltFBk89Fi75Qm9M/k89KkcYzealSjbadvdPH2ufz9/r4+vzP3+qlxNljmL08gLNSnNQzeKgydqUzeKg/ks6NtM/////+/v8+kc/f6fFAgK1CiLwydKIzd6c8kM6Tt9C1zd5OmdNBh7pTjLRzn78xdKIydqU7j86jwdbM3egxdKIydaQydaMydKNGlNE6js5OiLAxc6FKkshDk9E5jc09e6Zekrcxc6I4jc03eagyc6FIldI3jM0wcaBMl9J+psNKltIwcZ82i83k7fMubJhLlc81is1Lg6pklbZNl9I/j9AvbJlEjcVdkLPt8/cwcZ4ubZkwcJ00icy0y9swcJwvb5wzicxHkcpTh60ubZhCkNAyiMwvbpoxh8xAicBHj8hGk9FHks0+jdAubJcubJdEkdEwhsw6i88ubJgta5cvhswxapgubJcuhcstbJcubZcuhMsubJcvbJZBjMgthMsubJcvbZkubJcrg8stbJctbZcubJgrgssua5gubJc6is8qgcs8i9A9iMYtg8spgcoogMo7hcMrbZcubJcngMonf8olfsoubJc4gr8kfckua5g5iM8jfMk4iM8he8k1froua5g7itAgeskubJc2hs8eecgzfLcofssdeMg0hc4ubJccd8g2hcsxeLQbdsgZdcgxeLImfcszhM0vda4xgckzhM4xg84wf8Yxgs4udKsvfcQucqjbZ8obAAAA7HRSTlMAHDdTb4yPA+L/7ZxE/////yYLgvb///////8SYf/////qB/////////+1wNHd//////8s////r/////////+O/P///////////8f///////////////////////+P2P///////////3f//////////5j/////tczn//////L///////////////////////8+////////R/////Ww////tf////9q////////////4P/////Yd/8W+P/xov+UNv///STN/7hc1P/AUv//////////MMT///+m//+e//////+M//+C////////6cqo94AAAAXmSURBVHgBrNKDoipBGADgbHMRpjuKi2xOdu//MHe2Y6tvOdZvuhGzxWqzO2xWi9lp+g6L3eV+5PH6vmpltrv8nDsQDIWCAbef83jDpo9FojFeJxhPJO8JosQzYnb5oxYpVzodiCcyhiwA2esPEAPpdM727vT+eSH0x7McwoTmOUpxIcvF/RAWI29byCUIpUQ2m8A0/xwx8kIQls2vW4QrihIHQMDqGyQBgAiVnOXVTuWUtAaAnq++I48B0PxKrPZiq8qKvy4IpPqBhiDUm0rl+ca12h1NQN3eh7pI6MN26WnfooNBPIHU4SdUlBAHg9Hj0seDEEJ08pxKqfoio4tQaDAOP0xrMEWIzB4NCWaIK8xJ7ymXItQcFO/jcLGIF+bLRytW4LS18Wbd5SNcEBcLn8mw2TYZ2+3vLRuMaYdme7sdTA8iY8flQ0mPscC2fB1ku12z4+necs7YebDlri9JZ3rvoazB1tutxdiuy1TXl4/Zer95ufzneq7524qBAIBr61TmtxXX/MK4FC6cKIwvViozXMDMzLbCTF+1JBn/4/EtLi2vrK6tbywsbE506vVxnZ3fF7YIIQamdX7dVqb/RtnCr1X+n3F9gA2MdA7Vsl87nzEDId2MTUCHSdr+As/Y1DKvM1uYFWBGpTtggrFuYrMPApgc0jhMTNmdvInLbn8NqNImgEG7jWzZnwB1KAg79t1V3mzPvgm6Q+n9m98n/e5ZQI+iw6Dby1v43AzApPIIs24/Cbg1GFcRE+h29xpvseJ2v4cxjzQOmjtAgqF5PRyRZvTXIfcqbxUNPdOnI1JYnw8FSSwUp4mklKDzoRRvkw7N0vF6QTwUI4aMRsNZyUQnMhkzb2HMZeJ0RhUMUy1jIP68lRaKUpLSXN7FW5jz+QnqKEoFas37yX6pD8tFpYybpQpv4S3lEGv5KvaV9olNDPwNHUhh1ETex5scpsQOVg8UxAFhI0dCHKPjRIogDorT1aZPzkTuHC9U2oPnQlySRzFxhYkTJYHHIXFt5srNnhBxLDSyV+L2IyF395vnhQflpHCuifv80g3/a+UPIXWNEDEAQEE0HR23weEk6XGnwR1iH3eJu7udbt26fe30I17x/PYH+9iv+CB5qT1v+YhlL5WeS5ZV72RZftvlNF6Wj75Zdn2kHcl6e5Sy/A3D7DsBMP0gd/DkC/Bp9l3gW5Y7a5asWVCm3WcaAFSHnFtxAXivwwAsWf9E25dl+TiwhwIKPVRgD33Ct6wvom0ijKapOBllpkEcf6ZCMsqjyCgjuvKIoajXYgya8vhIJ7rKKnKOP+sxjOPJZmV0DRRHGIZx/KW6npaOvor3M/G+pqalS00TT5q4G7qzPGe4O+wu7mxw59wt8p3LCre//pn/J+iupIwe1HKcpVdXI8c9QB9l9QMDnHVQF8+9xdAw5YzgBmfuHdVh4bj7GKO8cZYxW/UmvHkAeEl5pgncMJt7JzVZzOYaTFGh6WRGEDVJ5pniCDOCWw0Ns3MaLA0NdRijYm+AmQZhXoO1YQFYpBJLqGloGF1W1ZuMfKRSL1OZFVXJyNBlUhhD7evXk6sqZl+/rscaKfUDC68FtYn19Xr64xU+oo7nxQ2FWZ6vxyapuTyEdV5WTgR+HZ3DpGoN9Szzu8Qkzz9CH6kbZhlpa7uELO2gs4I0bOKRJInFC1GyPsMuaanoxPre1n6hbXlvB90dpKkPj4Q9sXAi7gnfcEDaOjqxIxwe5e1vCcforiIdu/gkyyenOSeyrBthqrpxvHV2lF0cHW4d47ySdB3g29bWiSPjZMvZBDvpqzxPZk7Ti9PDLZcyomBHk/PwxJ1ycsgiv4guzrgOz9wexn126EVbNV3oVzLj8zBaEYXqNnjP/G4W8Z8F0GYiKisTPGMZ31kQGKdymGwIhMIeTzgUgM1EZRkHgmGfL8wi01Qe0wQCYSaAESrXNBCJRiN6EYURxKLRmF5E4Q0QjwNvyIAlJBKYIiNegnlJhowBY2RMP9BPBn38SEYtLpKG/+tgQe8M5cY7AAAAAElFTkSuQmCC"},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII="},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC"}])});