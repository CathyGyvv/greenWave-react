# GeoEngineSDK USAGE

## import

如果使用的是jQuery和Bootstrap，请使用 `geoengine`
react开发者，请使用 `react_geoengine`
webGL高性能支持请使用 `react_geoengine_gl`
```
import {
  geoengine,
  react_geoengine,
  react_geoengine_gl
} from 'gas.gl'
```

## webGL supported Layer(Recommand 推荐使用 渲染性能高，速度快)

### 通用说明

- webGL的图层data作为props传入，data必须是geojson的格式

### 支持的图层列表

- [GridHeatLayerGL 栅格热力图](https://gas.data.aliyun.com/external/sdk/#story/3)
- [GridHeatLayerGL 屏幕栅格热力图](https://gas.data.aliyun.com/external/sdk/#story/4)
- [HoneyCombLayerGL 蜂窝图](https://gas.data.aliyun.com/external/sdk/#story/6)
- [ScatterLayerGL 麻点图](https://gas.data.aliyun.com/external/sdk/#story/9)
- [PolylineLayerGL 折线图](https://gas.data.aliyun.com/external/sdk/#story/14)
- [PolygonLayerGL 多边形图](https://gas.data.aliyun.com/external/sdk/#story/18)
- [MarkerCluster marker聚合图](http://10.125.29.27/external/sdk/#story/13)

### 效果展示

- GridHeatLayerGL 栅格热力图
![栅格热力图](http://7xk5b7.com1.z0.glb.clouddn.com/GridHeatLayerGLpng.png)

- GridHeatLayerGL 屏幕栅格热力图
![屏幕栅格热力图](http://7xk5b7.com1.z0.glb.clouddn.com/GridHeatLayerGL2.png)

- HoneyCombLayerGL 蜂窝图
![蜂窝图](http://7xk5b7.com1.z0.glb.clouddn.com/HoneyCombLayerGL.png)

- ScatterLayerGL 麻点图
![麻点图](http://7xk5b7.com1.z0.glb.clouddn.com/ScatterLayerGL.png)

- PolylineLayerGL 折线图
![折线图](http://7xk5b7.com1.z0.glb.clouddn.com/PolylineLayerGL.png)

- PolygonLayerGL 多边形图
![多边形图](http://7xk5b7.com1.z0.glb.clouddn.com/PolygonLayerGL2.png)

- MarkerCluster marker聚合图
![marker聚合图](http://7xk5b7.com1.z0.glb.clouddn.com/MarkerCluster.png)

## 非WebGL图层使用(deprecated 不推荐使用)

## 基础通用配置介绍

- GeoEngineSDK在做样式渲染时，提供了大量的可配置参数给用户，以下就针对通用的配置参数做一个介绍，之后在用到的图层中，只介绍个性化的配置，通用配置就不再重复介绍

- 数据源配置

```
ds : geoengineDS // 除了TileLayer其他的图层都需要和数据绑定，ds参数就是指定绑定的数据源
```

- 指定数据值字段

```
valueName: 'cnt',
或者
getValue(feature) {
   return feature.properties.cnt + feature.properties.id
},
```

获取数据中用来渲染图层所用的值，返回的值在`domain`区间内，`valueName`和`getValue`只需设置一个即可，默认的`valueName`是'value'

- 填充色彩配置

```
fill : {
   domain: [0, 1000, 2000, 3000], // 色彩定义域
   range: ['rgb(0, 167, 157)', 'rgb(255, 250, 0)', 'rgb(255, 162, 0)', 'rgb(200, 7, 0)'], // 色彩值的值域
}
```

表示是数据值在domain范围内对应的色彩，例如如果数据中数据值位0，那么用`rgb(0, 167, 157)`填充，如果是30，则用`rgb(0, 167, 157)`到`rgb(255, 250, 0)`渐变的色域填充

- 线的色彩值

```
stroke: {
    domain: [1,2,3,4],
    range: ['rgb(0, 167, 157)', 'rgb(255, 250, 0)', 'rgb(255, 162, 0)', 'rgb(200, 7, 0)'],
},
```

表示是数据值在domain范围内对应的色彩，例如如果数据中数据值小于1，那么用`rgb(0, 167, 157)`填充，如果大于1小于2，则用`rgb(255, 250, 0)`



## 数据源

### BaseDatasource(数据源基类, 下面所有数据源均是BaseDatasource的子类)

- 适用场景: 自定义Datasource
- API(所有子类均继承下面方法, 当需要抛出事件时使用`emitLoadXXX`方法, 而不是`emit(....)`):
  - setProps(props: Any)
      - 描述: 设置datasource属性
      - return: 无
  - request()
      - 描述: 请求数据, 会根据所处生命周期抛出事件, 生命周期为 `loadstart -> 若干个loaddata -> load`, `loaddata`期间出错则抛出`loaderror`事件
      - return: Promise<请求结果>
  - on(event: String, handler: Function)
      - 描述: 监听事件
      - return: 无
  - emitLoadStart(rid: String)
      - 描述: 发送loadstart事件
      - return: 无
  - emitLoadData(rid: String, data: Any)
      - 描述: 发送loaddata事件
      - return: 无
  - emitLoad(rid: String)
      - 描述: 发送load事件
      - return: 无
  - emitLoadError(rid: String, err: Any)
      - 描述: 发送loaderror事件
      - return: 无
  - destroy()
      - 描述: 销毁数据源, 移除所有监听函数
      - return: 无

- 事件(所有子类均会抛出下面事件)
  - loadstart
      - 描述: 请求开始
      - 事件参数: [rid:String]
  - loaddata
      - 描述: 请求数据返回
      - 事件参数: [rid:String, data:Any]
  - load
      - 描述: 请求结束
      - 事件参数: [rid:String]
  - loaderror
      - 描述: 请求出错
      - 事件参数: [rid:String, err:Any]

    EXAMPLES

      ```
        ds.on('loadstart', info => console.log(`start loading data:${info}`)) //数据开始加载  
        ds.on('load', info => console.log(`loading data: ${info}`)) // 数据加载中  
        ds.on('loaddata', data => console.log(`loading data done:${JSON.stringify(data)}`)) //数据加载完成  
        ds.on('loaderror', error => console.error(`loading data error:${error}`)) // 数据加载出错  
      ```

- 需复写方法
  - _request(rid: String)
      - 描述: 
      - return: Promise<请求结果>

### GeoEngineDatasource(GeoEngine数据源)

- 适用场景: 请求GAS数据

- 特有API
  - preload()
      - 描述: 预加载数据而不会触发`loadstart`, `loaddata`, `load`事件
      - return: Promise<请求结果>
  - setTemplate(template: Function)
      - 描述: 设置解析模板, 如果不知这方法怎么用不要调用
      - return: 无

- EXAMPLES:

```
const transforms = [{name: 'type', value: 'geojson'}]
const filter = [{name: 'sql', value: 'select * from t1'}]
const geoengineDs = new geoengine.GeoEngineDatasource({
    id: '124',
    version: 'v1',
    baseUrl: '//ip:port',
    token: '********',
    transforms,
    filter,
    extent: {
      geohashes: ['1', '2', '3']
    }
})
```

### HttpDatasource (http数据源)

- 适用场景: 请求普通http数据
- 别名: Datasource(`geoengine.HttpDatasource === geoengine.Datasource //return true`)

- 特有API
  - preload()
      - 描述: 预加载数据而不会触发`loadstart`, `loaddata`, `load`事件
      - return: Promise<请求结果>

- EXAMPLES:

  ```
  const ds = new geoengine.HttpDatasource({
    url: 'http://xxx.com',
    //可选
    headers: {},
    //可选
    credentials: "same-origin",
    //可选
    method: 'GET',
    //可选
    body: '',
    //可选
    parseData: function (data) {
      if (data === null) return data
      if (data.isError == void 0) return data
      if (data.isError) throw data.error
      return data.data
    }
  })
  ```

### MemoryDatasource(内存数据源)

- 适用场景: 使用内存对象作为数据源

- 特有API
  - setData()
      - 描述: 更新数据, 但不会触发`loadstart`, `loaddata`, `load`事件, 如需触发请调用request函数
      - return: 无

- EXAMPLES:

  ```
  const ds = new geoengine.MemoryDatasource({
    data: {
      "type": "FeatureCollection",
      "features": [
        {
          "type": "Feature",
          "geometry": {
            "type":"LineString",
            "coordinates":[
              [120.15, 30.27],[120.16, 30.28],[120.17, 30.27],[120.16, 30.26],[120.15, 30.27]
              ]
            },
          "properties": {
            "level": 1
          }
        }
      ]
    }
  })
  ```

### MixDatasource(混合数据源)

- 适用场景: 需要结合多个基础数据源生成新的数据源

- 特有API
  - setDsMap(map: Map<String,BaseDatasource>)
      - 描述: 设置数据源Map
      - return: 无
  - addDs(key: String, datasource: BaseDatasource)
      - 描述: 添加基础数据源到混合数据源中
      - return: 无
  - removeDs(key: String)
      - 描述: 从混合数据源中移除指定基础数据源
      - return: 无

- EXAMPLES:

  ```
  const shapefileDs = new geoengine.HttpDatasource({
    url: "/examples/shapefile.json"
  })

  const dynamicDs = new geoengine.HttpDatasource({
    url: "/examples/shapefile-dynamic.json"
  })

  const mixDs = new geoengine.MixDatasource({
    dsMap: {
      shapefile: shapefileDs,
      dynamic: dynamicDs,
    },
    parseData(dataMap) {
      const shapefile = dataMap["shapefile"]
      const dynamic = dataMap["dynamic"]
      if (shapefile == void 0 || dynamic == void 0) return
      const layerData = JSON.parse(dynamic[0].layer_data)
      const features = shapefile.features.map((feature) => {
        const linkID = feature.properties.linkId
        const speeds = layerData[linkID] || [90]
        // console.log(speeds)
        return {
          ...feature,
          properties: {
            ...feature.properties,
            ROADCLASS: 410000,
            traffic_0: speeds[0],
          }
        }
      })
      return {features}
    }
  })
  ```

## 图层

- tileLayer(静态瓦片 图层)
- heatLayer(热力图 图层)
- gridHeatLayer(栅格图 图层)
- scatterLayer(散点图 图层)
- bubbleLayer(气泡图 图层)
- symbolLayer(标注图 图层)
- adminDistrictLayer(区划热力图 图层)
- polylineLayer(折线图 图层)
- polygonLayer(多边形 图层)
- circleRangeLayer(圈选 图层)

### 数据图层事件

```
Layer.on('loaddata', (e) => {
  console.log('[load data]', e)
})
Layer.on('load', (e) => {
  console.log('[load data done]', e)
}) // 图层数据加载完成
Layer.on('loaderror', (e) => {
  console.error('[loaderror]', e)
}) // 图层加载出错
```

### TileLayer(静态瓦片)

#### 适用场景

- 一般作为贴图，底图，采用第三方底图服务，如高德，百度等，或者展现自己的瓦片服务

#### 示例代码

```
const options = {
    tms:true,
    maxZoom: 15,
    opacity: 0.75,
}
geoengine.tileLayer('http://xxxx.map.com/{z}/{x}/{y}.png', options).addTo(map);
```
[查看更多options](http://leafletjs.com/reference-1.0.3.html#tilelayer)

#### 默认配置

```
{
    errorTileUrl: 'our public path to empty.png'
}
```

#### 效果图
![tilelayer](http://7xk5b7.com1.z0.glb.clouddn.com/tilelayer.png)

### heatLayer(热力图)

#### 适用场景
- 热力图是以特殊高亮的形式显示访客所在的地理区域的图示，通过热力图可以分析某个事件的热度，比如景点的人流量等等。

#### 示例代码

```
const geoengineDs = new geoengine.Datasource({
    url: 'router to ur data service'
})
const heatLayer = geoengine.heatLayer({
  ds: geoengineDs,
  fill: {
    range: ['rgb(0, 167, 157)', 'rgb(255, 250, 0)', 'rgb(255, 162, 0)', 'rgb(200, 7, 0)'],
    domain: [0, 1000, 2000, 3000],
  },
  valueName: 'value',
  blur: 20, // 光晕尺寸
  radius: 15, // 半径大小
  // getValue(feature) {
  //   console.log('feature===', feature);
  //   return feature.properties.product + feature.properties.id
  // },
})
heatLayer.addTo(map)
```
- [了解更多关于blur和radius配置信息](http://mourner.github.io/simpleheat/demo/)

#### 默认配置

```
{
  blur: 3,
  radius: 5,
}
```
- 可选配置属性包括 `['fill', 'radius', 'blur', 'valueName', 'getValue']`

#### 效果图
![heatmap](http://7xk5b7.com1.z0.glb.clouddn.com/heatmap.png)

### gridHeatLayer(栅格图)

#### 适用场景
- 展现栅格类数据，如气象数据，海洋数据，地块热度数据等

#### 示例代码

```
const gridHeatLayer = geoengine.gridHeatLayer({
  ds: geoengineDs,
  fill: {
    range: ['rgb(0, 167, 157)', 'rgb(255, 250, 0)', 'rgb(255, 162, 0)', 'rgb(200, 7, 0)'],
    domain: [0, 1000, 2000, 3000],
  },
  valueName: 'product',
  minPixel: 6, //当gridSize中unit为arc的时候，该配置生效并且表示当zoom缩放级别很小时，最小的像素尺寸
  gridSize: {
    width: 1,
    height: 1,
    unit: 'arc' // 支持pixel和arc两种, arc表示单位是度，pixel表示单位是像素。简单理解pixel不会随着地图的缩放进行缩放，
    //arc会随着地图的缩放进行缩放，并且为了在缩放级别很小时，看起来还是网格，可以设置minPixel参数
  } // 设置每一个grid的尺寸，包括宽度，高度和单位
})
gridHeatLayer.addTo(map)
```

#### 默认配置

```
{
  minPixel: 5,
  gridSize: {
    width: 1,
    height: 1,
    unit: 'arc'
  }
}
```
- 可选配置属性包括 `['gridSize', 'fill', 'minPixel', 'valueName', 'getValue']`

#### 效果图
![grid_heat](http://7xk5b7.com1.z0.glb.clouddn.com/grid_heat.png)

### scatterLayer(散点图)

#### 适用场景
- 适用于展现数据点，并根据颜色进行区分不同的数据

#### 示例代码

```
const scatterLayer = geoengine.scatterLayer({
  ds: geoengineDs,
  fill: {
    range: ['rgb(0, 167, 157)', 'rgb(255, 250, 0)', 'rgb(255, 162, 0)', 'rgb(200, 7, 0)'],
    domain: [0, 1000, 2000, 3000],
  },
  valueName: 'product',
  radius: 7 // 设置点的半径大小
})
scatterLayer.addTo(map)
```

#### 默认配置
```
{
    radius: 5
}
```
- 可选配置属性包括`['radius', 'fill', 'valueName', 'getValue']`

#### 效果图
![scatter](http://7xk5b7.com1.z0.glb.clouddn.com/scatter.png)

### bubbleLayer(气泡图）

#### 适用场景
- 适用于气泡图和散点图有点类似，但是气泡图可以依据数据确定气泡的大小和颜色

#### 示例代码
```
var bubbleLayer = geoengine.bubbleLayer({
  ds: geoengineDs,
  fill: {
    range: ['rgb(0, 167, 157)', 'rgb(255, 250, 0)', 'rgb(255, 162, 0)', 'rgb(200, 7, 0)'],
    domain: [0, 1000, 2000, 3000],
  },
  radius: {
    range: [5, 10, 15, 20],
    domain: [0, 1000, 2000, 3000],
  },
  gap: 4, // 这只填充颜色内圈和外圈之间的间隔，可认为是内圈半径等于radius减去gas得到内圈半径进行fill
  font: { // 设置气泡图上的字体的大小和颜色
    size: 12,
    fill: 'black'
  },
  valueName: 'product',
})
bubbleLayer.addTo(map)
```

#### 默认配置
```
{
    gap:3
}
```
- 可选配置属性包括`['radius', 'fill', 'gap', 'valueName', 'getValue']`

#### 效果图
![bubble](http://7xk5b7.com1.z0.glb.clouddn.com/bubble.png)

### symbolLayer(标注图)

#### 适用场景

- 与散点图不同的是，散点图根据颜色区分，标注图根据不同的图片或者形状来标注数据

#### 示例代码
```
const symbolLayer = geoengine.symbolLayer({
  ds: geoengineDs,
  symbol: {
    domain: [0, 1000, 2000, 3000],
    range: [
      {
        src: 'http://pic.58pic.com/58pic/15/44/82/36A58PICtFS_1024.jpg',
      },
      {
        src: 'http://img4.imgtn.bdimg.com/it/u=4019847970,3718827910&fm=21&gp=0.jpg',
      },
      {
        src: 'http://www.w3school.com.cn/svg/ellipse1.svg',
        originX: 'center', // 可以是center, left, right，表示图形相对于横轴轴的位置
        originY: 'center', // 可以是center, top, bottom，表示图形相对于纵轴的位置
        width: 10, // 宽度
        height: 10, // 高度
        angle: 45, // 顺时针转动的角度
      },
      {
        src: 'http://tupian.enterdesk.com/2012/0828/cyf/04/enter%20%2811%29.jpg',
      }
    ],
  },
  valueName: 'product',
})
symbolLayer.addTo(map)
```

#### 默认配置
```
const defaultSymbol = {
  src: 'http://img4.imgtn.bdimg.com/it/u=4019847970,3718827910&fm=21&gp=0.jpg',
  originX: 'center',
  originY: 'center',
  width: 10,
  height: 10,
  angle: 0
}
```
- 可选配置属性包括`['symbol', 'valueName', 'getValue']`

#### 效果图
![symbol](http://7xk5b7.com1.z0.glb.clouddn.com/symbol.png)

### adminDistrictLayer(区划热力图)

#### 适合场景
- 适合展现和省市区域相关数据，并且希望结合地形展现

#### 示例代码
```
const adminDistrictLayer = geoengine.adminDistrictLayer({
  ds: geoengineDs,
  fill: {
    range: ['rgb(0, 167, 157)', 'rgb(255, 250, 0)', 'rgb(255, 162, 0)', 'rgb(200, 7, 0)'],
    domain: [90, 95, 100, 105],
  },
  url: {
    city: '/examples/city.svg', // 城市级别的基础svg
    province: '/examples/province.svg', // 省份级别的基础svg，默认级别，返回数据中，若properties有city属性，则为城市级别
  }
})
adminDistrictLayer.addTo(map)
```
#### 默认配置
```
{
  
}
```
- 可选配置属性包括`['fill', 'valueName', 'getValue', 'url']`

#### 效果图
![admint_district](http://7xk5b7.com1.z0.glb.clouddn.com/admin_district.png)

### polylineLayer(折线图)

#### 适用场景
- 适用于绘制和展现道路路况，物流路径等

#### 示例代码

```
const polylineLayer = geoengine.polylineLayer({
  ds: simpleDs,
  stroke: {
    domain: [1,2,3,4],
    range: ['rgb(0, 167, 157)', 'rgb(255, 250, 0)', 'rgb(255, 162, 0)', 'rgb(200, 7, 0)']
  },
  pattern: { // 设置pattern
    src: geoengine.resource.arrowSample, //url 内置箭头pattern
    patternWidth: 7, //模板宽度
    patternHeight: 7, //模板高度
    cropOffsetX: 0, //裁剪x轴起点
    cropOffsetY: 0, //裁剪y轴起点
    paddingX: 10, //x轴模板间距
    paddingY: 0, //y轴模板间距
    background: "#00a79d", //背景颜色
  },
  getValue(feature) {
    const { properties } = feature
    const traffic = properties.traffic_0
    if (traffic > 50) return 1
    if (traffic >= 30) return 2
    if (traffic >= 15) return 3
    return 4
  }, // 每一个feature返回domain中某一个值，对应range色彩值，根据路况着色
  strokeWidth: 3,
})
polylineLayer.addTo(map)
```

#### 效果图
![polyline](http://7xk5b7.com1.z0.glb.clouddn.com/polyline.png)
![polyline_pattern](http://7xk5b7.com1.z0.glb.clouddn.com/polyline_pattern.png)

### polygonLayer(多边形）

#### 适用场景
- 适用于展示不规则的封闭区域数据

#### 示例代码

```
const polygonLayer = geoengine.polygonLayer({
  ds: simpleDs,
  stroke: { // 外围线的色彩的定义域和值域
    range: ['rgb(0, 167, 157)', 'rgb(255, 250, 0)', 'rgb(255, 162, 0)', 'rgb(200, 7, 0)'],
    domain: [1, 2, 3, 4, 5],
  },
  fill: { // 多边形填充的色彩的定义域和值域
    range: ['rgb(0, 167, 157)', 'rgba(255, 250, 0, 0.5)', 'rgba(255, 162, 0, 0.5)', 'rgba(200, 7, 0, 0.5)'],
    domain: [1, 2, 3, 4, 5],
  },
  strokeWidth: 10, // 线宽
  valueName: 'id',
})
polygonLayer.addTo(map)
```

#### 默认配置
```
{
  strokeWidth: 3,
  stroke: {
    range: ['rgb(0, 167, 157)'],
  },
  fill: {
    range: ['rgba(0, 167, 157, 0.5)'],
  },
}
```
- 可选配置属性包括`['fill', 'stroke', 'strokeWidth', 'valueName', 'getValue']`

#### 效果图
![polygon](http://7xk5b7.com1.z0.glb.clouddn.com/polygon.png)

### circleRangeLayer(圈选)

#### 适用场景

- 对数据进行圈选分析

#### 圈选事件

```
circleRangeLayer.on('circlechange', function(circle) { //圈选变化事件
    console.log(circle)
})

circleRangeLayer.on('circleconfirm', function(circle) { //单击圈选锁定事件
    console.log(circle)
})

circleRangeLayer.on('enableedit', function() { // 可重新圈选事件

})

circleRangeLayer.on('disableedit', function() { // 不可重新圈选事件

})

circleRangeLayer.on('circleaffirm', function(circle) { // 双击圈选确认事件
  console.log('center.lat===', circle.startLatlng.lat);
  console.log('center.lng===', circle.startLatlng.lng);
  console.log('radius===', circle.radius);
})

```

#### 示例代码
```
function setTooltip(center, radius, isCirclEditEnabled) {
  const {lat, lng} = center
  return `经度: ${lng.toFixed(9)}
    <br/>
    纬度: ${lat.toFixed(9)}
    <br/>
    半径: ${radius} 米
    <br/>
    单击圆圈${isCirclEditEnabled ? "锁定圈选" : "重新圈选"}
    <br/>
    双击圆圈确认圈选范围和半径
  `
}
const circleRangeLayer = geoengine.circleRangeLayer({
  strokeColor: "rgba(255,0,0,1)", // 设置圆形颜色
  strokeWeight: 3, // 设置圆圈线宽
  fillColor: "rgba(255,0,0,0.5)", // 设置填充颜色
  toolTipContent: setTooltip, // 设置提示内容
  toolTipClass: "circle-range-tooltip", // 提示内容样式
  disableEditWhenMouseUp: false, // 鼠标释放时静止重绘
})
circleRangeLayer.on('circleaffirm', function(circle) {
  console.log('center.lat===', circle.startLatlng.lat);
  console.log('center.lng===', circle.startLatlng.lng);
  console.log('radius===', circle.radius);
  sendCircleRequest(circle)
})
circleRangeLayer.addTo(map)
```

#### 默认配置

```
function defaultTooltip(center, radius, isCirclEditEnabled) {
  const {lat, lng} = center
  return `经度: ${lng.toFixed(9)}
    <br/>
    纬度: ${lat.toFixed(9)}
    <br/>
    半径: ${radius} 米
    <br/>
    单击圆圈${isCirclEditEnabled ? "锁定圈选" : "重新圈选"}
    <br/>
    双击圆圈确认圈选范围和半径
  `
}
{
  strokeColor: "rgba(255,0,0,1)",
  strokeWeight: 3,
  fillColor: "rgba(255,0,0,0.5)",
  toolTipContent: defaultTooltip,
  toolTipClass: "circle-range-tooltip",
  disableEditWhenMouseUp: false,
}
```

- 可选配置属性包括`['strokeColor', 'strokeWeight', 'fillColor', 'toolTipContent', 'toolTipClass', 'disableEditWhenMouseUp']`

#### 效果图
![circle_range](http://7xk5b7.com1.z0.glb.clouddn.com/circle_range.png)

## 工具

- 当需要和页面做交互的时候，例如点击道路，出现具体的路况数据，而当有多个图层叠加的时候，需要确认图层数据查找的先后顺序，layerDB就是用来做前端交互，获取数据，所属图层，和页面点击的位置。

- layerDB(图层数据库)


```
  //注册图层到layerDB中
  geoengine.layerDB.register('polyline', polylineLayer, 1) //图层名, 图层实例, 查询优先级

  //绑定点击图像事件
  geoengine.layerDB.on('clickobject', function (obj, layer, containerPoint) {
    console.log(obj, layer, containerPoint) //分别为feature数据, 所属图层, 鼠标相对于map的位置
  })
```

## React Usage

- HeatLayer
- ScatterLayer
- BubbleLayer
- AdminDistrictLayer
- SymbolLayer
- GridHeatLayer
- PolylineLayer
- PolygonLayer

```
import React, { Component, PropTypes } from 'react'
import ReactDOM from 'react-dom'
import ReactGeoEngine, { Datasource } from 'react-geoengine'

class ReactExample extends Component {
  constructor(props) {
    super(props)
  }
  render() {
    return  <ReactGeoEngine.PolylineLayer {...this.props} />
  }
}

const domainAndRange = {
  range  : PropTypes.arrayOf(PropTypes.string),
  domain : PropTypes.arrayOf(PropTypes.number),
}

ReactExample.propTypes = {
  ds              : PropTypes.instanceOf(Datasource).isRequired,
  storke          : PropTypes.shape(domainAndRange),
  strokeWidth     : PropTypes.number,
  fill            : PropTypes.shape(domainAndRange),
  onClickObject   : PropTypes.func,
  onAddToMap      : PropTypes.func,
  onRemoveFromMap : PropTypes.func,
  layerDBIndex    : PropTypes.number,
  name            : PropTypes.string
}

export default ReactExample

```

- LayerDB的设置也通过props传入

- CircleRangeLayer有些许不同，作为一个强交互的图层，事件直接通过props传入，不需要加`on`关键字。

## Example Code
```
import * as geoengine from './geoengine'
var mapInfo = {
  //beijing
  center: [39.92,116.46],
  zoom: 10
}
var map = L.map('map', mapInfo);
var baseLayer = L.tileLayer
('http://webrd01.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=8&x={x}&y={y}&z={z}', {})
baseLayer.addTo(map);

geoengine.tileLayer('http://xxxx.com/bj/{z}/{x}/{y}.png', {
    maxZoom: 15,
}).addTo(map);
```
