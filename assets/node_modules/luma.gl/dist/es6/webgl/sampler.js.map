{"version":3,"sources":["../../../src/webgl/sampler.js"],"names":["GL","isWebGL2","assertWebGL2Context","Resource","Sampler","isSupported","gl","isHandle","handle","isSampler","constructor","opts","Object","seal","bind","unit","bindSampler","unbind","_createHandle","createSampler","_deleteHandle","deleteSampler","_getParameter","pname","value","getSamplerParameter","_setParameter","param","TEXTURE_MIN_LOD","TEXTURE_MAX_LOD","samplerParameterf","samplerParameteri"],"mappings":"AAAA;AACA,OAAOA,EAAP,MAAe,cAAf;AACA,SAAQC,QAAR,EAAkBC,mBAAlB,QAA4C,gBAA5C;AACA,OAAOC,QAAP,MAAqB,YAArB;AAEA,eAAe,MAAMC,OAAN,SAAsBD,QAAtB,CAA+B;AAE5C,SAAOE,WAAP,CAAmBC,EAAnB,EAAuB;AACrB,WAAOL,SAASK,EAAT,CAAP;AACD;;AAED,SAAOC,QAAP,CAAgBC,MAAhB,EAAwB;AACtB,WAAO,KAAKF,EAAL,CAAQG,SAAR,CAAkB,KAAKD,MAAvB,CAAP;AACD;;AAEDE,cAAYJ,EAAZ,EAAgBK,IAAhB,EAAsB;AACpBT,wBAAoBI,EAApB;AACA,UAAMA,EAAN,EAAUK,IAAV;AACAC,WAAOC,IAAP,CAAY,IAAZ;AACD;AAED;;;;;;;AAKAC,OAAKC,IAAL,EAAW;AACT,SAAKT,EAAL,CAAQU,WAAR,CAAoBD,IAApB,EAA0B,KAAKP,MAA/B;AACA,WAAO,IAAP;AACD;AAED;;;;;;;AAKAS,SAAOF,IAAP,EAAa;AACX,SAAKT,EAAL,CAAQU,WAAR,CAAoBD,IAApB,EAA0B,IAA1B;AACA,WAAO,IAAP;AACD,GAlC2C,CAoC5C;;;AAEAG,kBAAgB;AACd,WAAO,KAAKZ,EAAL,CAAQa,aAAR,EAAP;AACD;;AAEDC,kBAAgB;AACd,SAAKd,EAAL,CAAQe,aAAR,CAAsB,KAAKb,MAA3B;AACD;;AAEDc,gBAAcC,KAAd,EAAqB;AACnB,UAAMC,QAAQ,KAAKlB,EAAL,CAAQmB,mBAAR,CAA4B,KAAKjB,MAAjC,EAAyCe,KAAzC,CAAd;AACA,WAAOC,KAAP;AACD;;AAEDE,gBAAcH,KAAd,EAAqBI,KAArB,EAA4B;AAC1B;AACA;AACA;AACA,YAAQJ,KAAR;AACA,WAAKvB,GAAG4B,eAAR;AACA,WAAK5B,GAAG6B,eAAR;AACE,aAAKvB,EAAL,CAAQwB,iBAAR,CAA0B,KAAKtB,MAA/B,EAAuCe,KAAvC,EAA8CI,KAA9C;AACA;;AACF;AACE,aAAKrB,EAAL,CAAQyB,iBAAR,CAA0B,KAAKvB,MAA/B,EAAuCe,KAAvC,EAA8CI,KAA9C;AACA;AAPF;;AASA,WAAO,IAAP;AACD;;AAjE2C","sourcesContent":["/* eslint-disable no-inline-comments */\nimport GL from '../constants';\nimport {isWebGL2, assertWebGL2Context} from '../webgl-utils';\nimport Resource from './resource';\n\nexport default class Sampler extends Resource {\n\n  static isSupported(gl) {\n    return isWebGL2(gl);\n  }\n\n  static isHandle(handle) {\n    return this.gl.isSampler(this.handle);\n  }\n\n  constructor(gl, opts) {\n    assertWebGL2Context(gl);\n    super(gl, opts);\n    Object.seal(this);\n  }\n\n  /**\n   * Bind to the same texture unit as a texture to control sampling for that texture\n   * @param {GLuint} unit - texture unit index\n   * @return {Sampler} - returns self to enable chaining\n   */\n  bind(unit) {\n    this.gl.bindSampler(unit, this.handle);\n    return this;\n  }\n\n  /**\n   * Bind to the same texture unit as a texture to control sampling for that texture\n   * @param {GLuint} unit - texture unit index\n   * @return {Sampler} - returns self to enable chaining\n   */\n  unbind(unit) {\n    this.gl.bindSampler(unit, null);\n    return this;\n  }\n\n  // RESOURCE METHODS\n\n  _createHandle() {\n    return this.gl.createSampler();\n  }\n\n  _deleteHandle() {\n    this.gl.deleteSampler(this.handle);\n  }\n\n  _getParameter(pname) {\n    const value = this.gl.getSamplerParameter(this.handle, pname);\n    return value;\n  }\n\n  _setParameter(pname, param) {\n    // Apparently there are some conversion integer/float rules that made\n    // the WebGL committe expose two parameter setting functions in JavaScript.\n    // For now, pick the float version for parameters specified as GLfloat.\n    switch (pname) {\n    case GL.TEXTURE_MIN_LOD:\n    case GL.TEXTURE_MAX_LOD:\n      this.gl.samplerParameterf(this.handle, pname, param);\n      break;\n    default:\n      this.gl.samplerParameteri(this.handle, pname, param);\n      break;\n    }\n    return this;\n  }\n\n}\n"],"file":"sampler.js"}