import View from './view';
import Viewport from '../viewports/viewport';
import { Matrix4 } from 'math.gl';
export default class OrthographicView extends View {
  _getViewport({
    x,
    y,
    width,
    height,
    viewState
  }) {
    // Get view matrix parameters from view state
    const _viewState$eye = viewState.eye,
          eye = _viewState$eye === void 0 ? [0, 0, 1] : _viewState$eye,
          _viewState$lookAt = viewState.lookAt,
          lookAt = _viewState$lookAt === void 0 ? [0, 0, 0] : _viewState$lookAt,
          _viewState$up = viewState.up,
          up = _viewState$up === void 0 ? [0, 1, 0] : _viewState$up; // Make sure Matrix4.ortho doesn't crash on 0 width/height

    width = width || 1;
    height = height || 1; // Get projection matrix parameters from the view itself
    // NOTE: automatically calculated from width and height if not provided

    const _this$props = this.props,
          _this$props$left = _this$props.left,
          left = _this$props$left === void 0 ? -width / 2 : _this$props$left,
          _this$props$top = _this$props.top,
          top = _this$props$top === void 0 ? -height / 2 : _this$props$top,
          _this$props$near = _this$props.near,
          near = _this$props$near === void 0 ? 1 : _this$props$near,
          _this$props$far = _this$props.far,
          far = _this$props$far === void 0 ? 100 : _this$props$far;
    let _this$props2 = this.props,
        _this$props2$right = _this$props2.right,
        right = _this$props2$right === void 0 ? null : _this$props2$right,
        _this$props2$bottom = _this$props2.bottom,
        bottom = _this$props2$bottom === void 0 ? null : _this$props2$bottom;
    right = Number.isFinite(right) ? right : left + width;
    bottom = Number.isFinite(bottom) ? bottom : top + height;
    return new Viewport({
      id: this.id,
      x,
      y,
      width,
      height,
      viewMatrix: new Matrix4().lookAt({
        eye,
        lookAt,
        up
      }),
      projectionMatrix: new Matrix4().ortho({
        left,
        right,
        bottom,
        top,
        near,
        far
      })
    });
  }

}
OrthographicView.displayName = 'OrthographicView';
//# sourceMappingURL=orthographic-view.js.map