{"version":3,"sources":["../../../src/utils/memoize.js"],"names":["isEqual","a","b","Array","isArray","len","length","i","memoize","compute","cachedArgs","cachedResult","args","key"],"mappings":"AAAA,SAASA,OAAT,CAAiBC,CAAjB,EAAoBC,CAApB,EAAuB;AACrB,MAAID,MAAMC,CAAV,EAAa;AACX,WAAO,IAAP;AACD;;AACD,MAAIC,MAAMC,OAAN,CAAcH,CAAd,CAAJ,EAAsB;AACpB;AACA;AACA,UAAMI,MAAMJ,EAAEK,MAAd;;AACA,QAAI,CAACJ,CAAD,IAAMA,EAAEI,MAAF,KAAaD,GAAvB,EAA4B;AAC1B,aAAO,KAAP;AACD;;AAED,SAAK,IAAIE,IAAI,CAAb,EAAgBA,IAAIF,GAApB,EAAyBE,GAAzB,EAA8B;AAC5B,UAAIN,EAAEM,CAAF,MAASL,EAAEK,CAAF,CAAb,EAAmB;AACjB,eAAO,KAAP;AACD;AACF;;AACD,WAAO,IAAP;AACD;;AACD,SAAO,KAAP;AACD;AAED;;;;;;;AAKA,eAAe,SAASC,OAAT,CAAiBC,OAAjB,EAA0B;AACvC,MAAIC,aAAa,EAAjB;AACA,MAAIC,YAAJ;AAEA,SAAOC,QAAQ;AACb,SAAK,MAAMC,GAAX,IAAkBD,IAAlB,EAAwB;AACtB,UAAI,CAACZ,QAAQY,KAAKC,GAAL,CAAR,EAAmBH,WAAWG,GAAX,CAAnB,CAAL,EAA0C;AACxCF,uBAAeF,QAAQG,IAAR,CAAf;AACAF,qBAAaE,IAAb;AACA;AACD;AACF;;AACD,WAAOD,YAAP;AACD,GATD;AAUD","sourcesContent":["function isEqual(a, b) {\n  if (a === b) {\n    return true;\n  }\n  if (Array.isArray(a)) {\n    // Special treatment for arrays: compare 1-level deep\n    // This is to support equality of matrix/coordinate props\n    const len = a.length;\n    if (!b || b.length !== len) {\n      return false;\n    }\n\n    for (let i = 0; i < len; i++) {\n      if (a[i] !== b[i]) {\n        return false;\n      }\n    }\n    return true;\n  }\n  return false;\n}\n\n/**\n * Speed up consecutive function calls by caching the result of calls with identical input\n * https://en.wikipedia.org/wiki/Memoization\n * @param {function} compute - the function to be memoized\n */\nexport default function memoize(compute) {\n  let cachedArgs = {};\n  let cachedResult;\n\n  return args => {\n    for (const key in args) {\n      if (!isEqual(args[key], cachedArgs[key])) {\n        cachedResult = compute(args);\n        cachedArgs = args;\n        break;\n      }\n    }\n    return cachedResult;\n  };\n}\n"],"file":"memoize.js"}