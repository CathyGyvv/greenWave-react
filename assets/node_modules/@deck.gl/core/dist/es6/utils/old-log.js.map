{"version":3,"sources":["../../../src/utils/old-log.js"],"names":["assert","cache","log","priority","arg","args","Number","isFinite","formatArgs","console","debug","info","once","checkForAssertionErrors","error","warn","deprecated","oldUsage","newUsage","removed","time","label","timeEnd","group","collapsed","groupCollapsed","groupEnd","firstArg","unshift","isAssertion","length","name","Array","prototype","slice","call","message"],"mappings":"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","sourcesContent":["// Copyright (c) 2015 - 2017 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n// TODO / DEPRECATED - remove once probe.gl log integration is proving\n/* eslint-disable no-console */\n/* global console */\nimport assert from '../utils/assert';\n\nconst cache = {};\n\nfunction log(priority, arg, ...args) {\n  assert(Number.isFinite(priority), 'log priority must be a number');\n  if (priority <= log.priority) {\n    // Node doesn't have console.debug, but using it looks better in browser consoles\n    args = formatArgs(arg, ...args);\n    if (console.debug) {\n      console.debug(...args);\n    } else {\n      console.info(...args);\n    }\n  }\n}\n\nfunction once(priority, arg, ...args) {\n  if (!cache[arg] && priority <= log.priority) {\n    args = checkForAssertionErrors(args);\n    console.error(...formatArgs(arg, ...args));\n    cache[arg] = true;\n  }\n}\n\nfunction warn(arg, ...args) {\n  if (!cache[arg]) {\n    console.warn(`deck.gl: ${arg}`, ...args);\n    cache[arg] = true;\n  }\n}\n\nfunction error(arg, ...args) {\n  console.error(`deck.gl: ${arg}`, ...args);\n}\n\nfunction deprecated(oldUsage, newUsage) {\n  log.warn(`\\`${oldUsage}\\` is deprecated and will be removed \\\nin a later version. Use \\`${newUsage}\\` instead`);\n}\n\nfunction removed(oldUsage, newUsage) {\n  log.error(`\\`${oldUsage}\\` is no longer supported. Use \\`${newUsage}\\` instead,\\\n check our upgrade-guide.md for more details`);\n}\n\n// Logs a message with a time\nfunction time(priority, label) {\n  assert(Number.isFinite(priority), 'log priority must be a number');\n  if (priority <= log.priority) {\n    // In case the platform doesn't have console.time\n    if (console.time) {\n      console.time(label);\n    } else {\n      console.info(label);\n    }\n  }\n}\n\nfunction timeEnd(priority, label) {\n  assert(Number.isFinite(priority), 'log priority must be a number');\n  if (priority <= log.priority) {\n    // In case the platform doesn't have console.timeEnd\n    if (console.timeEnd) {\n      console.timeEnd(label);\n    } else {\n      console.info(label);\n    }\n  }\n}\n\nfunction group(priority, arg, {collapsed = false} = {}) {\n  if (priority <= log.priority) {\n    if (collapsed) {\n      console.groupCollapsed(`luma.gl: ${arg}`);\n    } else {\n      console.group(`luma.gl: ${arg}`);\n    }\n  }\n}\n\nfunction groupEnd(priority, arg) {\n  if (priority <= log.priority) {\n    console.groupEnd(`luma.gl: ${arg}`);\n  }\n}\n\n// Helper functions\n\nfunction formatArgs(firstArg, ...args) {\n  if (typeof firstArg === 'function') {\n    firstArg = firstArg();\n  }\n  if (typeof firstArg === 'string') {\n    args.unshift(`deck.gl ${firstArg}`);\n  } else {\n    args.unshift(firstArg);\n    args.unshift('deck.gl');\n  }\n  return args;\n}\n\n// Assertions don't generate standard exceptions and don't print nicely\nfunction checkForAssertionErrors(args) {\n  const isAssertion =\n    args &&\n    args.length > 0 &&\n    typeof args[0] === 'object' &&\n    args[0] !== null &&\n    args[0].name === 'AssertionError';\n\n  if (isAssertion) {\n    args = Array.prototype.slice.call(args);\n    args.unshift(`assert(${args[0].message})`);\n  }\n  return args;\n}\n\nlog.priority = 0;\nlog.log = log;\nlog.once = once;\nlog.time = time;\nlog.timeEnd = timeEnd;\nlog.warn = warn;\nlog.error = error;\nlog.deprecated = deprecated;\nlog.removed = removed;\nlog.group = group;\nlog.groupEnd = groupEnd;\n\nexport default log;\n"],"file":"old-log.js"}