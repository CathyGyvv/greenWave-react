"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.diffImagePixels=diffImagePixels;var DEFAULT_THRESHOLD=.05*255,getY=function(r,g,b){return .29889531*r+.58662247*g+.11448223*b},getI=function(r,g,b){return .59597799*r-.2741761*g-.32180189*b},getQ=function(r,g,b){return .21147017*r-.52261711*g+.31114694*b},getESq=function(dY,dI,dQ){return .5053*dY*dY+.299*dI*dI+.1957*dQ*dQ},applyAlpha=function(c,a){return 255+(c-255)*a/255};function colorDelta(img1,img2,index){return Math.sqrt(colorDeltaSq(img1,img2,index))}function colorDeltaSq(img1,img2,index){var i=4*index,a1=img1[i+3],a2=img2[i+3],r1=applyAlpha(img1[i+0],a1),g1=applyAlpha(img1[i+1],a1),b1=applyAlpha(img1[i+2],a1),r2=applyAlpha(img2[i+0],a2),g2=applyAlpha(img2[i+1],a2),b2=applyAlpha(img2[i+2],a2);return getESq(getY(r1,g1,b1)-getY(r2,g2,b2),getI(r1,g1,b1)-getI(r2,g2,b2),getQ(r1,g1,b1)-getQ(r2,g2,b2))}function diffImagePixels(data1,data2){for(var delta,colorDeltaThreshold=2<arguments.length&&arguments[2]!==void 0?arguments[2]:DEFAULT_THRESHOLD,pixelCount=data1.data.length/4,badPixels=0,i=0;i<pixelCount;i++)delta=colorDeltaSq(data1.data,data2.data,i),delta>colorDeltaThreshold*colorDeltaThreshold&&badPixels++;var percentage=1-badPixels/pixelCount;return percentage}
//# sourceMappingURL=diff-images.js.map