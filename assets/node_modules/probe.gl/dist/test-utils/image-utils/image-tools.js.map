{"version":3,"sources":["../../../src/test-utils/image-utils/image-tools.js"],"names":["createImage","getImageFromContext","getImagePixelData","width","height","image","document","createElement","style","position","top","left","gl","drawingBufferWidth","drawingBufferHeight","Promise","onload","resolve","src","canvas","toDataURL","ctx","getContext","drawImage","getImageData"],"mappings":"4EAIgBA,W,CAAAA,W,SAUAC,mB,CAAAA,mB,SAUAC,iB,CAAAA,iB,CApBT,QAASF,YAAT,CAAqBG,KAArB,CAA4BC,MAA5B,CAAoC,CACzC,GAAMC,OAAQC,SAASC,aAAT,CAAuB,KAAvB,CAAd,CAMA,MALAF,OAAMF,KAAN,CAAcA,KAKd,CAJAE,MAAMD,MAAN,CAAeA,MAIf,CAHAC,MAAMG,KAAN,CAAYC,QAAZ,CAAuB,UAGvB,CAFAJ,MAAMG,KAAN,CAAYE,GAAZ,CAAkB,CAElB,CADAL,MAAMG,KAAN,CAAYG,IAAZ,CAAmB,CACnB,CAAON,KACR,CAEM,QAASJ,oBAAT,CAA6BW,EAA7B,CAAiC,CACtC,GAAMP,OAAQL,YAAYY,GAAGC,kBAAf,CAAmCD,GAAGE,mBAAtC,CAAd,CACA,MAAO,IAAIC,QAAJ,CAAY,iBAAW,CAC5BV,MAAMW,MAAN,CAAe,UAAM,CACnBC,QAAQZ,KAAR,CACD,CAH2B,CAI5BA,MAAMa,GAAN,CAAYN,GAAGO,MAAH,CAAUC,SAAV,EACb,CALM,CAMR,CAEM,QAASlB,kBAAT,CAA2BG,KAA3B,CAA+D,IAA7BF,MAA6B,wDAArB,IAAqB,CAAfC,MAAe,wDAAN,IAAM,CACpED,MAAQA,OAASE,MAAMF,KAD6C,CAEpEC,OAASA,QAAUC,MAAMD,MAF2C,CAIpE,GAAMe,QAASb,SAASC,aAAT,CAAuB,QAAvB,CAAf,CACAY,OAAOhB,KAAP,CAAeA,KALqD,CAMpEgB,OAAOf,MAAP,CAAgBA,MANoD,CAOpE,GAAMiB,KAAMF,OAAOG,UAAP,CAAkB,IAAlB,CAAZ,CAEA,MADAD,KAAIE,SAAJ,CAAclB,KAAd,CAAqB,CAArB,CAAwB,CAAxB,CAA2BF,KAA3B,CAAkCC,MAAlC,CACA,CAAOiB,IAAIG,YAAJ,CAAiB,CAAjB,CAAoB,CAApB,CAAuBrB,KAAvB,CAA8BC,MAA9B,CACR","file":"image-tools.js","sourcesContent":["// EXPERIMENTAL IMAGE TOOLS\n// TODO - only works in browser\n/* global document */\n\nexport function createImage(width, height) {\n  const image = document.createElement('img');\n  image.width = width;\n  image.height = height;\n  image.style.position = 'absolute';\n  image.style.top = 0;\n  image.style.left = 0;\n  return image;\n}\n\nexport function getImageFromContext(gl) {\n  const image = createImage(gl.drawingBufferWidth, gl.drawingBufferHeight);\n  return new Promise(resolve => {\n    image.onload = () => {\n      resolve(image);\n    };\n    image.src = gl.canvas.toDataURL();\n  });\n}\n\nexport function getImagePixelData(image, width = null, height = null) {\n  width = width || image.width;\n  height = height || image.height;\n\n  const canvas = document.createElement('canvas');\n  canvas.width = width;\n  canvas.height = height;\n  const ctx = canvas.getContext('2d');\n  ctx.drawImage(image, 0, 0, width, height);\n  return ctx.getImageData(0, 0, width, height);\n}\n"]}