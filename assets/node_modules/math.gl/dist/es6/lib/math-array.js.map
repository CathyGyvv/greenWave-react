{"version":3,"sources":["../../../src/lib/math-array.js"],"names":["config","formatValue","equals","MathArray","Array","clone","constructor","copy","check","array","i","ELEMENTS","set","args","fromArray","offset","toString","formatString","opts","string","printTypes","name","toArray","toFloat32Array","Float32Array","length","exactEquals","negate","inverse","lerp","a","b","t","undefined","ai","min","vector","Math","max","clamp","minVector","maxVector","validate","valid","Number","isFinite","debug","Error","sub","subtract","setScalar","addScalar","subScalar","multiplyScalar","scale","divideScalar","clampScalar"],"mappings":"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","sourcesContent":["// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport {config, formatValue, equals} from './common';\n\nexport default class MathArray extends Array {\n  clone() {\n    return new this.constructor().copy(this).check();\n  }\n\n  copy(array) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = array[i];\n    }\n    return this.check();\n  }\n\n  set(...args) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = args[i] || 0;\n    }\n    return this.check();\n  }\n\n  fromArray(array, offset = 0) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = array[i + offset];\n    }\n    return this.check();\n  }\n\n  toString() {\n    return this.formatString(config);\n  }\n\n  formatString(opts) {\n    let string = '';\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      string += (i > 0 ? ', ' : '') + formatValue(this[i], opts);\n    }\n    return `${opts.printTypes ? this.constructor.name : ''}[${string}]`;\n  }\n\n  toArray(array = [], offset = 0) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      array[offset + i] = this[i];\n    }\n    return array;\n  }\n\n  toFloat32Array() {\n    return new Float32Array(this);\n  }\n\n  equals(array) {\n    if (!array || this.length !== array.length) {\n      return false;\n    }\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      if (!equals(this[i], array[i])) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  exactEquals(array) {\n    if (!array || this.length !== array.length) {\n      return false;\n    }\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      if (this[i] !== array[i]) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  // Modifiers\n\n  negate() {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = -this[i];\n    }\n    return this.check();\n  }\n\n  inverse() {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = 1 / this[i];\n    }\n    return this.check();\n  }\n\n  lerp(a, b, t) {\n    if (t === undefined) {\n      t = b;\n      b = a;\n      a = this; // eslint-disable-line\n    }\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      const ai = a[i];\n      this[i] = ai + t * (b[i] - ai);\n    }\n    return this.check();\n  }\n\n  min(vector) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = Math.min(vector[i], this[i]);\n    }\n    return this.check();\n  }\n\n  max(vector) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = Math.max(vector[i], this[i]);\n    }\n    return this.check();\n  }\n\n  clamp(minVector, maxVector) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = Math.min(Math.max(this[i], minVector[i]), maxVector[i]);\n    }\n    return this.check();\n  }\n\n  // Debug checks\n\n  validate(array = this) {\n    let valid = array && array.length === this.ELEMENTS;\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      valid = valid && Number.isFinite(array[i]);\n    }\n    return valid;\n  }\n\n  check(array = this) {\n    if (config.debug && !this.validate(array)) {\n      throw new Error(`math.gl: ${this.constructor.name} some fields set to invalid numbers'`);\n    }\n    return this;\n  }\n\n  // three.js compatibility\n\n  sub(a) {\n    return this.subtract(a);\n  }\n\n  setScalar(a) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = a;\n    }\n    return this.check();\n  }\n\n  addScalar(a) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] += a;\n    }\n    return this.check();\n  }\n\n  subScalar(a) {\n    return this.addScalar(-a);\n  }\n\n  multiplyScalar(a) {\n    return this.scale(a);\n  }\n\n  divideScalar(a) {\n    return this.scale(1 / a);\n  }\n\n  clampScalar(min, max) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = Math.min(Math.max(this[i], min), max);\n    }\n    return this.check();\n  }\n}\n"],"file":"math-array.js"}